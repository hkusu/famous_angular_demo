!function(a,b,c){"use strict";function d(a){return function(){var b,c,d=arguments[0],e="["+(a?a+":":"")+d+"] ",f=arguments[1],g=arguments,h=function(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?JSON.stringify(a):a};for(b=e+f.replace(/\{\d+\}/g,function(a){var b,c=+a.slice(1,-1);return c+2<g.length?(b=g[c+2],"function"==typeof b?b.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof b?"undefined":"string"!=typeof b?Q(b):b):a}),b=b+"\nhttp://errors.angularjs.org/1.2.26/"+(a?a+"/":"")+d,c=2;c<arguments.length;c++)b=b+(2==c?"?":"&")+"p"+(c-2)+"="+encodeURIComponent(h(arguments[c]));return new Error(b)}}function e(a){if(null==a||z(a))return!1;var b=a.length;return 1===a.nodeType&&b?!0:u(a)||Cd(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d;if(a)if(x(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d);else if(Cd(a)||e(a))for(d=0;d<a.length;d++)b.call(c,a[d],d);else if(a.forEach&&a.forEach!==f)a.forEach(b,c);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d);return a}function g(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){for(var a,b=Bd.length;b;){if(b--,a=Bd[b].charCodeAt(0),57==a)return Bd[b]="A",Bd.join("");if(90!=a)return Bd[b]=String.fromCharCode(a+1),Bd.join("");Bd[b]="0"}return Bd.unshift("0"),Bd.join("")}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){var b=a.$$hashKey;return f(arguments,function(b){b!==a&&f(b,function(b,c){a[c]=b})}),k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(new(l(function(){},{prototype:a})),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!=a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===yd.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===yd.call(a)}function z(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===yd.call(a)}function C(a){return"[object Blob]"===yd.call(a)}function D(a){return a&&x(a.then)}function E(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function F(a,b,c){var d=[];return f(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d}function G(a,b){return-1!=H(a,b)}function H(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}function I(a,b){var c=H(a,b);return c>=0&&a.splice(c,1),b}function J(a,b,c,d){if(z(a)||A(a))throw zd("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw zd("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=H(c,a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(Cd(a)){b.length=0;for(var h=0;h<a.length;h++)g=J(a[h],null,c,d),t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;Cd(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)g=J(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g;k(b,i)}}else b=a,a&&(Cd(a)?b=J(a,[],c,d):w(a)?b=new Date(a.getTime()):y(a)?(b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex):t(a)&&(b=J(a,{},c,d)));return b}function K(a,b){if(Cd(a)){b=b||[];for(var c=0;c<a.length;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var d in a)!nd.call(a,d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(b[d]=a[d])}return b||a}function L(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!Cd(a)){if(w(a))return w(b)?isNaN(a.getTime())&&isNaN(b.getTime())||a.getTime()===b.getTime():!1;if(y(a)&&y(b))return a.toString()==b.toString();if(A(a)||A(b)||z(a)||z(b)||Cd(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!L(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!Cd(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!L(a[e],b[e]))return!1;return!0}}return!1}function M(a,b,c){return a.concat(wd.call(b,c))}function N(a,b){return wd.call(a,b||0)}function O(a,b){var c=arguments.length>2?N(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,c.concat(wd.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function P(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function Q(a,b){return"undefined"==typeof a?c:JSON.stringify(a,P,b?"  ":null)}function R(a){return u(a)?JSON.parse(a):a}function S(a){if("function"==typeof a)a=!0;else if(a&&0!==a.length){var b=md(""+a);a=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)}else a=!1;return a}function T(a){a=sd(a).clone();try{a.empty()}catch(b){}var c=3,d=sd("<div>").append(a).html();try{return a[0].nodeType===c?md(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+md(b)})}catch(b){return md(d)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;nd.call(d,c)?Cd(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){Cd(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function Z(a,c){function d(a){a&&h.push(a)}var e,g,h=[a],i=["ng:app","ng-app","x-ng-app","data-ng-app"],j=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;f(i,function(c){i[c]=!0,d(b.getElementById(c)),c=c.replace(":","\\:"),a.querySelectorAll&&(f(a.querySelectorAll("."+c),d),f(a.querySelectorAll("."+c+"\\:"),d),f(a.querySelectorAll("["+c+"]"),d))}),f(h,function(a){if(!e){var b=" "+a.className+" ",c=j.exec(b);c?(e=a,g=(c[2]||"").replace(/\s+/g,",")):f(a.attributes,function(b){!e&&i[b.name]&&(e=a,g=b.value)})}}),e&&c(e,g?[g]:[])}function $(c,d){var e=function(){if(c=sd(c),c.injector()){var a=c[0]===b?"document":T(c);throw zd("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),d.unshift("ng");var e=Hb(d);return e.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),e},g=/^NG_DEFER_BOOTSTRAP!/;return a&&!g.test(a.name)?e():(a.name=a.name.replace(g,""),void(Ad.resumeBootstrap=function(a){f(a,function(a){d.push(a)}),e()}))}function _(a,b){return b=b||"_",a.replace(Fd,function(a,c){return(c?b:"")+a.toLowerCase()})}function ab(){td=a.jQuery,td&&td.fn.on?(sd=td,l(td.fn,{scope:Td.scope,isolateScope:Td.isolateScope,controller:Td.controller,injector:Td.injector,inheritedData:Td.inheritedData}),kb("remove",!0,!0,!1),kb("empty",!1,!1,!1),kb("html",!1,!1,!0)):sd=ob,Ad.element=sd}function bb(a,b,c){if(!a)throw zd("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function cb(a,b,c){return c&&Cd(a)&&(a=a[a.length-1]),bb(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function db(a,b){if("hasOwnProperty"===a)throw zd("badname","hasOwnProperty is not a valid {0} name",b)}function eb(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?O(f,a):a}function fb(a){var b=a[0],c=a[a.length-1];if(b===c)return sd(b);var d=b,e=[d];do{if(d=d.nextSibling,!d)break;e.push(d)}while(d!==c);return sd(e)}function gb(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d){return function(){return b[d||"push"]([a,c,arguments]),i}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=a("$injector","invoke"),i={_invokeQueue:b,_runBlocks:e,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:h,run:function(a){return e.push(a),this}};return g&&h(g),i})}})}function hb(b){l(b,{bootstrap:$,copy:J,extend:l,equals:L,element:sd,forEach:f,injector:Hb,noop:o,bind:O,toJson:Q,fromJson:R,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:E,isArray:Cd,version:Gd,isDate:w,lowercase:md,uppercase:od,callbacks:{counter:0},$$minErr:d,$$csp:Ed}),ud=gb(a);try{ud("ngLocale")}catch(c){ud("ngLocale",[]).provider("$locale",cc)}ud("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Cc}),a.provider("$compile",Ob).directive({a:Ce,input:Ne,textarea:Ne,form:Ge,script:wf,select:zf,style:Bf,option:Af,ngBind:Ze,ngBindHtml:_e,ngBindTemplate:$e,ngClass:af,ngClassEven:cf,ngClassOdd:bf,ngCloak:df,ngController:ef,ngForm:He,ngHide:qf,ngIf:hf,ngInclude:jf,ngInit:lf,ngNonBindable:mf,ngPluralize:nf,ngRepeat:of,ngShow:pf,ngStyle:rf,ngSwitch:sf,ngSwitchWhen:tf,ngSwitchDefault:uf,ngOptions:yf,ngTransclude:vf,ngModel:Te,ngList:We,ngChange:Ue,required:Ve,ngRequired:Ve,ngValue:Ye}).directive({ngInclude:kf}).directive(De).directive(ff),a.provider({$anchorScroll:Ib,$animate:ae,$browser:Lb,$cacheFactory:Mb,$controller:Rb,$document:Sb,$exceptionHandler:Tb,$filter:Nc,$interpolate:ac,$interval:bc,$http:Yb,$httpBackend:$b,$location:pc,$log:qc,$parse:xc,$rootScope:Bc,$q:yc,$sce:Hc,$sceDelegate:Gc,$sniffer:Ic,$templateCache:Nb,$timeout:Jc,$window:Mc,$$rAF:Ac,$$asyncCallback:Jb})}])}function ib(){return++Id}function jb(a){return a.replace(Ld,function(a,b,c,d){return d?c.toUpperCase():c}).replace(Md,"Moz$1")}function kb(a,b,c,d){function e(a){var e,g,h,i,j,k,l,m=c&&a?[this.filter(a)]:[this],n=b;if(!d||null!=a)for(;m.length;)for(e=m.shift(),g=0,h=e.length;h>g;g++)for(i=sd(e[g]),n?i.triggerHandler("$destroy"):n=!n,j=0,k=(l=i.children()).length;k>j;j++)m.push(td(l[j]));return f.apply(this,arguments)}var f=td.fn[a];f=f.$original||f,e.$original=f,td.fn[a]=e}function lb(a){return!Pd.test(a)}function mb(a,b){var c,d,e,f,g,h,i=b.createDocumentFragment(),j=[];if(lb(a))j.push(b.createTextNode(a));else{for(c=i.appendChild(b.createElement("div")),d=(Qd.exec(a)||["",""])[1].toLowerCase(),e=Sd[d]||Sd._default,c.innerHTML="<div>&#160;</div>"+e[1]+a.replace(Rd,"<$1></$2>")+e[2],c.removeChild(c.firstChild),f=e[0];f--;)c=c.lastChild;for(g=0,h=c.childNodes.length;h>g;++g)j.push(c.childNodes[g]);c=i.firstChild,c.textContent=""}return i.textContent="",i.innerHTML="",j}function nb(a,c){c=c||b;var d;return(d=Od.exec(a))?[c.createElement(d[1])]:mb(a,c)}function ob(a){if(a instanceof ob)return a;if(u(a)&&(a=Dd(a)),!(this instanceof ob)){if(u(a)&&"<"!=a.charAt(0))throw Nd("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ob(a)}if(u(a)){yb(this,nb(a));var c=sd(b.createDocumentFragment());c.append(this)}else yb(this,a)}function pb(a){return a.cloneNode(!0)}function qb(a){sb(a);for(var b=0,c=a.childNodes||[];b<c.length;b++)qb(c[b])}function rb(a,b,c,d){if(s(d))throw Nd("offargs","jqLite#off() does not support the `selector` argument");var e=tb(a,"events"),g=tb(a,"handle");g&&(r(b)?f(e,function(b,c){Kd(a,c,b),delete e[c]}):f(b.split(" "),function(b){r(c)?(Kd(a,b,e[b]),delete e[b]):I(e[b]||[],c)}))}function sb(a,b){var d=a.ng339,e=Hd[d];if(e){if(b)return void delete Hd[d].data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),rb(a)),delete Hd[d],a.ng339=c}}function tb(a,b,c){var d=a.ng339,e=Hd[d||-1];return s(c)?(e||(a.ng339=d=ib(),e=Hd[d]={}),void(e[b]=c)):e&&e[b]}function ub(a,b,c){var d=tb(a,"data"),e=s(c),f=!e&&s(b),g=f&&!t(b);if(d||g||tb(a,"data",d={}),e)d[b]=c;else{if(!f)return d;if(g)return d&&d[b];l(d,b)}}function vb(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function wb(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",Dd((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Dd(b)+" "," ")))})}function xb(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=Dd(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",Dd(c))}}function yb(a,b){if(b){b=b.nodeName||!s(b.length)||z(b)?[b]:b;for(var c=0;c<b.length;c++)a.push(b[c])}}function zb(a,b){return Ab(a,"$"+(b||"ngController")+"Controller")}function Ab(a,b,d){9==a.nodeType&&(a=a.documentElement);for(var e=Cd(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=sd.data(a,e[f]))!==c)return d;a=a.parentNode||11===a.nodeType&&a.host}}function Bb(a){for(var b=0,c=a.childNodes;b<c.length;b++)qb(c[b]);for(;a.firstChild;)a.removeChild(a.firstChild)}function Cb(a,b){var c=Ud[b.toLowerCase()];return c&&Vd[a.nodeName]&&c}function Db(a,c){var d=function(d,e){if(d.preventDefault||(d.preventDefault=function(){d.returnValue=!1}),d.stopPropagation||(d.stopPropagation=function(){d.cancelBubble=!0}),d.target||(d.target=d.srcElement||b),r(d.defaultPrevented)){var g=d.preventDefault;d.preventDefault=function(){d.defaultPrevented=!0,g.call(d)},d.defaultPrevented=!1}d.isDefaultPrevented=function(){return d.defaultPrevented||d.returnValue===!1};var h=K(c[e||d.type]||[]);f(h,function(b){b.call(a,d)}),8>=rd?(d.preventDefault=null,d.stopPropagation=null,d.isDefaultPrevented=null):(delete d.preventDefault,delete d.stopPropagation,delete d.isDefaultPrevented)};return d.elem=a,d}function Eb(a,b){var d,e=typeof a;return"function"==e||"object"==e&&null!==a?"function"==typeof(d=a.$$hashKey)?d=a.$$hashKey():d===c&&(d=a.$$hashKey=(b||j)()):d=a,e+":"+d}function Fb(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Gb(a){var b,c,d,e;return"function"==typeof a?(b=a.$inject)||(b=[],a.length&&(c=a.toString().replace(Zd,""),d=c.match(Wd),f(d[1].split(Xd),function(a){a.replace(Yd,function(a,c,d){b.push(d)})})),a.$inject=b):Cd(a)?(e=a.length-1,cb(a[e],"fn"),b=a.slice(0,e)):cb(a,"fn",!0),b}function Hb(a){function b(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function c(a,b){if(db(a,"service"),(x(b)||Cd(b))&&(b=v.instantiate(b)),!b.$get)throw $d("pget","Provider '{0}' must define $get factory method.",a);return s[a+n]=b}function d(a,b){return c(a,{$get:b})}function e(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}function g(a,b){return d(a,q(b))}function h(a,b){db(a,"constant"),s[a]=b,w[a]=b}function j(a,b){var c=v.get(a+n),d=c.$get;c.$get=function(){var a=y.invoke(d,c);return y.invoke(b,null,{$delegate:a})}}function k(a){var b,c,d,e,g=[];return f(a,function(a){if(!r.get(a)){r.put(a,!0);try{if(u(a))for(b=ud(a),g=g.concat(k(b.requires)).concat(b._runBlocks),c=b._invokeQueue,d=0,e=c.length;e>d;d++){var f=c[d],h=v.get(f[0]);h[f[1]].apply(h,f[2])}else x(a)?g.push(v.invoke(a)):Cd(a)?g.push(v.invoke(a)):cb(a,"module")}catch(i){throw Cd(a)&&(a=a[a.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),$d("modulerr","Failed to instantiate module {0} due to:\n{1}",a,i.stack||i.message||i)}}}),g}function l(a,b){function c(c){if(a.hasOwnProperty(c)){if(a[c]===m)throw $d("cdep","Circular dependency found: {0}",c+" <- "+p.join(" <- "));return a[c]}try{return p.unshift(c),a[c]=m,a[c]=b(c)}catch(d){throw a[c]===m&&delete a[c],d}finally{p.shift()}}function d(a,b,d){var e,f,g,h=[],i=Gb(a);for(f=0,e=i.length;e>f;f++){if(g=i[f],"string"!=typeof g)throw $d("itkn","Incorrect injection token! Expected service name as string, got {0}",g);h.push(d&&d.hasOwnProperty(g)?d[g]:c(g))}return Cd(a)&&(a=a[e]),a.apply(b,h)}function e(a,b){var c,e,f=function(){};return f.prototype=(Cd(a)?a[a.length-1]:a).prototype,c=new f,e=d(a,c,b),t(e)||x(e)?e:c}return{invoke:d,instantiate:e,get:c,annotate:Gb,has:function(b){return s.hasOwnProperty(b+n)||a.hasOwnProperty(b)}}}var m={},n="Provider",p=[],r=new Fb([],!0),s={$provide:{provider:b(c),factory:b(d),service:b(e),value:b(g),constant:b(h),decorator:j}},v=s.$injector=l(s,function(){throw $d("unpr","Unknown provider: {0}",p.join(" <- "))}),w={},y=w.$injector=l(w,function(a){var b=v.get(a+n);return y.invoke(b.$get,b)});return f(k(a),function(a){y.invoke(a||o)}),y}function Ib(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return f(a,function(a){b||"a"!==md(a.nodeName)||(b=a)}),b}function g(){var a,d=c.hash();d?(a=h.getElementById(d))?a.scrollIntoView():(a=e(h.getElementsByName(d)))?a.scrollIntoView():"top"===d&&b.scrollTo(0,0):b.scrollTo(0,0)}var h=b.document;return a&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(g)}),g}]}function Jb(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Kb(a,b,d,e){function g(a){try{a.apply(null,N(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(b){d.error(b)}}}function h(a,b){!function c(){f(w,function(a){a()}),v=b(c,a)}()}function i(){z=null,x!=j.url()&&(x=j.url(),f(A,function(a){a(j.url())}))}var j=this,k=b[0],l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,q={};j.isMock=!1;var s=0,t=[];j.$$completeOutstandingRequest=g,j.$$incOutstandingRequestCount=function(){s++},j.notifyWhenNoOutstandingRequests=function(a){f(w,function(a){a()}),0===s?a():t.push(a)};var v,w=[];j.addPollFn=function(a){return r(v)&&h(100,n),w.push(a),a};var x=l.href,y=b.find("base"),z=null;j.url=function(b,c){if(l!==a.location&&(l=a.location),m!==a.history&&(m=a.history),b){if(x==b)return;return x=b,e.history?c?m.replaceState(null,"",b):(m.pushState(null,"",b),y.attr("href",y.attr("href"))):(z=b,c?l.replace(b):l.href=b),j}return z||l.href.replace(/%27/g,"'")};var A=[],B=!1;j.onUrlChange=function(b){return B||(e.history&&sd(a).on("popstate",i),e.hashchange?sd(a).on("hashchange",i):j.addPollFn(i),B=!0),A.push(b),b},j.$$checkUrlChange=i,j.baseHref=function(){var a=y.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var C={},D="",E=j.baseHref();j.cookies=function(a,b){var e,f,g,h,i;if(!a){if(k.cookie!==D)for(D=k.cookie,f=D.split("; "),C={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=unescape(g.substring(0,i)),C[a]===c&&(C[a]=unescape(g.substring(i+1))));return C}b===c?k.cookie=escape(a)+"=;path="+E+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(k.cookie=escape(a)+"="+escape(b)+";path="+E).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},j.defer=function(a,b){var c;return s++,c=n(function(){delete q[c],g(a)},b||0),q[c]=!0,c},j.defer.cancel=function(a){return q[a]?(delete q[a],p(a),g(o),!0):!1}}function Lb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Kb(a,d,b,c)}]}function Mb(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Nb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Ob(a,d){var e={},g="Directive",h=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,j=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,k=/^(on[a-z]+|formaction)$/;this.directive=function m(b,c){return db(b,"directive"),u(b)?(bb(c,"directiveFactory"),e.hasOwnProperty(b)||(e[b]=[],a.factory(b+g,["$injector","$exceptionHandler",function(a,c){var d=[];return f(e[b],function(e,f){try{var g=a.invoke(e);x(g)?g={compile:q(g)}:!g.compile&&g.link&&(g.compile=q(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||b,g.require=g.require||g.controller&&g.name,g.restrict=g.restrict||"A",d.push(g)}catch(h){c(h)}}),d}])),e[b].push(c)):f(b,i(m)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,i,m,o,q,r,s,v,w,y,z){function A(a,b,c,d,e){a instanceof sd||(a=sd(a)),f(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=b=sd(b).wrap("<span></span>").parent()[0])});var g=C(a,b,a,c,d,e);return B(a,"ng-scope"),function(b,c,d,e){bb(b,"scope");var h=c?Td.clone.call(a):a;f(d,function(a,b){h.data("$"+b+"Controller",a)});for(var i=0,j=h.length;j>i;i++){var k=h[i],l=k.nodeType;(1===l||9===l)&&h.eq(i).data("$scope",b)}return c&&c(h,b),g&&g(b,h,h,e),h}}function B(a,b){try{a.addClass(b)}catch(c){}}function C(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,p=d.length,q=new Array(p);for(k=0;p>k;k++)q[k]=d[k];for(k=0,m=0,l=o.length;l>k;m++)i=q[m],g=o[k++],h=o[k++],g?(g.scope?(j=a.$new(),sd.data(i,"$scope",j)):j=a,n=g.transcludeOnThisElement?D(a,g.transclude,f):!g.templateOnThisElement&&f?f:!f&&b?D(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o=[],p=0;p<a.length;p++)i=new X,j=E(a[p],[],i,0===p?e:c,f),k=j.length?H(j,a[p],i,b,d,null,[],[],g):null,k&&k.scope&&B(i.$$element,"ng-scope"),m=k&&k.terminal||!(l=a[p].childNodes)||!l.length?null:C(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),o.push(k,m),n=n||k||m,g=null;return n?h:null}function D(a,b,c){var d=function(d,e,f){var g=!1;d||(d=a.$new(),d.$$transcluded=!0,g=!0);var h=b(d,e,f,c);return g&&h.on("$destroy",function(){d.$destroy()}),h};return d}function E(a,b,c,d,e){var f,g,i=a.nodeType,k=c.$attr;switch(i){case 1:J(b,Pb(vd(a).toLowerCase()),"E",d,e);for(var l,m,n,o,p,q,r=a.attributes,s=0,t=r&&r.length;t>s;s++){var v=!1,w=!1;if(l=r[s],!rd||rd>=8||l.specified){m=l.name,p=Dd(l.value),o=Pb(m),(q=ab.test(o))&&(m=_(o.substr(6),"-"));var x=o.replace(/(Start|End)$/,"");o===x+"Start"&&(v=m,w=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),n=Pb(m.toLowerCase()),k[n]=m,(q||!c.hasOwnProperty(n))&&(c[n]=p,Cb(a,n)&&(c[n]=!0)),U(a,b,p,n),J(b,n,"A",d,e,v,w)}}if(g=a.className,u(g)&&""!==g)for(;f=j.exec(g);)n=Pb(f[2]),J(b,n,"C",d,e)&&(c[n]=Dd(f[3])),g=g.substr(f.index+f[0].length);break;case 3:R(b,a.nodeValue);break;case 8:try{f=h.exec(a.nodeValue),f&&(n=Pb(f[1]),J(b,n,"M",d,e)&&(c[n]=Dd(f[2])))}catch(y){}}return b.sort(P),b}function F(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw be("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return sd(d)}function G(a,b,c){return function(d,e,f,g,h){return e=F(e[0],b,c),a(d,e,f,g,h)}}function H(a,e,g,h,j,k,l,m,n){function o(a,b,c,d){a&&(c&&(a=G(a,c,d)),a.require=w.require,a.directiveName=y,(P===w||w.$$isolateScope)&&(a=W(a,{isolateScope:!0})),l.push(a)),b&&(c&&(b=G(b,c,d)),b.require=w.require,b.directiveName=y,(P===w||w.$$isolateScope)&&(b=W(b,{isolateScope:!0})),m.push(b))}function p(a,b,c,d){var e,g="data",h=!1;if(u(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(g="inheritedData"),h=h||"?"==e;if(e=null,d&&"data"===g&&(e=d[b]),e=e||c[g]("$"+b+"Controller"),!e&&!h)throw be("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e}return Cd(b)&&(e=[],f(b,function(b){e.push(p(a,b,c,d))})),e}function s(a,b,h,j,k){function n(a,b){var d;return arguments.length<2&&(b=a,a=c),Z&&(d=z),k(a,b,d)}var o,s,t,u,v,w,x,y,z={};if(o=e===h?g:K(g,new X(sd(h),g.$attr)),s=o.$$element,P){var A=/^\s*([@=&])(\??)\s*(\w*)\s*$/;x=b.$new(!0),!R||R!==P&&R!==P.$$originalDirective?s.data("$isolateScopeNoTemplate",x):s.data("$isolateScope",x),B(s,"ng-isolate-scope"),f(P.scope,function(a,c){var e,f,g,h,i=a.match(A)||[],j=i[3]||c,k="?"==i[2],l=i[1];switch(x.$$isolateBindings[c]=l+j,l){case"@":o.$observe(j,function(a){x[c]=a}),o.$$observers[j].$$scope=b,o[j]&&(x[c]=d(o[j])(b));break;case"=":if(k&&!o[j])return;f=q(o[j]),h=f.literal?L:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=x[c]=f(b),be("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",o[j],P.name)},e=x[c]=f(b),x.$watch(function(){var a=f(b);return h(a,x[c])||(h(a,e)?g(b,a=x[c]):x[c]=a),e=a},null,f.literal);break;case"&":f=q(o[j]),x[c]=function(a){return f(b,a)};break;default:throw be("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",P.name,c,a)}})}for(y=k&&n,J&&f(J,function(a){var c,d={$scope:a===P||a.$$isolateScope?x:b,$element:s,$attrs:o,$transclude:y};w=a.controller,"@"==w&&(w=o[a.name]),c=r(w,d),z[a.name]=c,Z||s.data("$"+a.name+"Controller",c),a.controllerAs&&(d.$scope[a.controllerAs]=c)}),t=0,u=l.length;u>t;t++)try{v=l[t],v(v.isolateScope?x:b,s,o,v.require&&p(v.directiveName,v.require,s,z),y)}catch(C){i(C,T(s))}var D=b;for(P&&(P.template||null===P.templateUrl)&&(D=x),a&&a(D,h.childNodes,c,k),t=m.length-1;t>=0;t--)try{v=m[t],v(v.isolateScope?x:b,s,o,v.require&&p(v.directiveName,v.require,s,z),y)}catch(C){i(C,T(s))}}n=n||{};for(var v,w,y,z,C,D,H=-Number.MAX_VALUE,J=n.controllerDirectives,P=n.newIsolateScopeDirective,R=n.templateDirective,S=n.nonTlbTranscludeDirective,U=!1,Y=!1,Z=n.hasElementTranscludeDirective,_=g.$$element=sd(e),ab=k,bb=h,cb=0,db=a.length;db>cb;cb++){w=a[cb];var eb=w.$$start,fb=w.$$end;if(eb&&(_=F(e,eb,fb)),z=c,H>w.priority)break;if((D=w.scope)&&(v=v||w,w.templateUrl||(Q("new/isolated scope",P,w,_),t(D)&&(P=w))),y=w.name,!w.templateUrl&&w.controller&&(D=w.controller,J=J||{},Q("'"+y+"' controller",J[y],w,_),J[y]=w),(D=w.transclude)&&(U=!0,w.$$tlb||(Q("transclusion",S,w,_),S=w),"element"==D?(Z=!0,H=w.priority,z=_,_=g.$$element=sd(b.createComment(" "+y+": "+g[y]+" ")),e=_[0],V(j,N(z),e),bb=A(z,h,H,ab&&ab.name,{nonTlbTranscludeDirective:S})):(z=sd(pb(e)).contents(),_.empty(),bb=A(z,h))),w.template)if(Y=!0,Q("template",R,w,_),R=w,D=x(w.template)?w.template(_,g):w.template,D=$(D),w.replace){if(ab=w,z=lb(D)?[]:sd(Dd(D)),e=z[0],1!=z.length||1!==e.nodeType)throw be("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");V(j,_,e);var gb={$attr:{}},hb=E(e,[],gb),ib=a.splice(cb+1,a.length-(cb+1));P&&I(hb),a=a.concat(hb).concat(ib),M(g,gb),db=a.length}else _.html(D);if(w.templateUrl)Y=!0,Q("template",R,w,_),R=w,w.replace&&(ab=w),s=O(a.splice(cb,a.length-cb),_,g,j,U&&bb,l,m,{controllerDirectives:J,newIsolateScopeDirective:P,templateDirective:R,nonTlbTranscludeDirective:S}),db=a.length;else if(w.compile)try{C=w.compile(_,g,bb),x(C)?o(null,C,eb,fb):C&&o(C.pre,C.post,eb,fb)}catch(jb){i(jb,T(_))}w.terminal&&(s.terminal=!0,H=Math.max(H,w.priority))}return s.scope=v&&v.scope===!0,s.transcludeOnThisElement=U,s.templateOnThisElement=Y,s.transclude=bb,n.hasElementTranscludeDirective=Z,s}function I(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function J(b,d,f,h,j,k,l){if(d===j)return null;var m=null;if(e.hasOwnProperty(d))for(var o,p=a.get(d+g),q=0,r=p.length;r>q;q++)try{o=p[q],(h===c||h>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){i(s)}return m}function M(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(B(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function O(a,b,c,d,e,g,h,i){var j,k,n=[],p=b[0],q=a.shift(),r=l({},q,{templateUrl:null,transclude:null,replace:null,$$originalDirective:q}),s=x(q.templateUrl)?q.templateUrl(b,c):q.templateUrl;return b.empty(),m.get(w.getTrustedResourceUrl(s),{cache:o}).success(function(l){var m,o,u,v;if(l=$(l),q.replace){if(u=lb(l)?[]:sd(Dd(l)),m=u[0],1!=u.length||1!==m.nodeType)throw be("tplrt","Template for directive '{0}' must have exactly one root element. {1}",q.name,s);o={$attr:{}},V(d,b,m);var w=E(m,[],o);t(q.scope)&&I(w),a=w.concat(a),M(c,o)}else m=p,b.html(l);for(a.unshift(r),j=H(a,m,c,e,b,q,g,h,i),f(d,function(a,c){a==m&&(d[c]=b[0])}),k=C(b[0].childNodes,e);n.length;){var x=n.shift(),y=n.shift(),z=n.shift(),A=n.shift(),F=b[0];if(y!==p){var G=y.className;i.hasElementTranscludeDirective&&q.replace||(F=pb(m)),V(z,sd(y),F),B(sd(F),G)}v=j.transcludeOnThisElement?D(x,j.transclude,A):A,j(k,x,F,d,v)}n=null}).error(function(a,b,c,d){throw be("tpload","Failed to load template: {0}",d.url)}),function(a,b,c,d,e){var f=e;n?(n.push(b),n.push(c),n.push(d),n.push(f)):(j.transcludeOnThisElement&&(f=D(b,j.transclude,e)),j(k,b,c,d,f))}}function P(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Q(a,b,c,d){if(b)throw be("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function R(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=b.length;return d&&B(a.parent(),"ng-binding"),function(a,b){var e=b.parent(),f=e.data("$binding")||[];f.push(c),e.data("$binding",f),d||B(e,"ng-binding"),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function S(a,b){if("srcdoc"==b)return w.HTML;var c=vd(a);return"xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b)?w.RESOURCE_URL:void 0}function U(a,b,c,e){var f=d(c,!0);if(f){if("multiple"===e&&"SELECT"===vd(a))throw be("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(b,c,g){var h=g.$$observers||(g.$$observers={});if(k.test(e))throw be("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");f=d(g[e],!0,S(a,e)),f&&(g[e]=f(b),(h[e]||(h[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||b).$watch(f,function(a,b){"class"===e&&a!=b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function V(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];
a.length-=h-1;break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),d[sd.expando]=g[sd.expando];for(var n=1,o=c.length;o>n;n++){var p=c[n];sd(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function W(a,b){return l(function(){return a.apply(null,arguments)},a,b)}var X=function(a,b){this.$$element=a,this.$attr=b||{}};X.prototype={$normalize:Pb,$addClass:function(a){a&&a.length>0&&y.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&y.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Qb(a,b),d=Qb(b,a);0===c.length?y.removeClass(this.$$element,d):0===d.length?y.addClass(this.$$element,c):y.setClass(this.$$element,c,d)},$set:function(a,b,d,e){var g,h=Cb(this.$$element[0],a);h&&(this.$$element.prop(a,b),e=h),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a],e||(this.$attr[a]=e=_(a,"-"))),g=vd(this.$$element),("A"===g&&"href"===a||"IMG"===g&&"src"===a)&&(this[a]=b=z(b,"src"===a)),d!==!1&&(null===b||b===c?this.$$element.removeAttr(e):this.$$element.attr(e,b));var j=this.$$observers;j&&f(j[a],function(a){try{a(b)}catch(c){i(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);return e.push(b),s.$evalAsync(function(){e.$$inter||b(c[a])}),b}};var Y=d.startSymbol(),Z=d.endSymbol(),$="{{"==Y||"}}"==Z?p:function(a){return a.replace(/\{\{/g,Y).replace(/}}/g,Z)},ab=/^ngAttr[A-Z]/;return A}]}function Pb(a){return jb(a.replace(ce,""))}function Qb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function Rb(){var a={},b=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){db(b,"controller"),t(b)?l(a,b):a[b]=c},this.$get=["$injector","$window",function(c,e){return function(f,g){var h,i,j,k;if(u(f)&&(i=f.match(b),j=i[1],k=i[3],f=a.hasOwnProperty(j)?a[j]:eb(g.$scope,j,!0)||eb(e,j,!0),cb(f,j,!0)),h=c.instantiate(f,g),k){if(!g||"object"!=typeof g.$scope)throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",j||f.name,k);g.$scope[k]=h}return h}}]}function Sb(){this.$get=["$window",function(a){return sd(a.document)}]}function Tb(){this.$get=["$log",function(a){return function(){a.error.apply(a,arguments)}}]}function Ub(a){var b,c,d,e={};return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=md(Dd(a.substr(0,d))),c=Dd(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function Vb(a){var b=t(a)?a:c;return function(c){return b||(b=Ub(a)),c?b[md(c)]||null:b}}function Wb(a,b,c){return x(c)?c(a,b):(f(c,function(c){a=c(a,b)}),a)}function Xb(a){return a>=200&&300>a}function Yb(){var a=/^\s*(\[|\{[^\{])/,b=/[\}\]]\s*$/,d=/^\)\]\}',?\n/,e={"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(c){return u(c)&&(c=c.replace(d,""),a.test(c)&&b.test(c)&&(c=R(c))),c}],transformRequest:[function(a){return!t(a)||B(a)||C(a)?a:Q(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:K(e),put:K(e),patch:K(e)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],j=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,d,e,k,m){function n(a){function b(a){var b=l({},a,{data:Wb(a.data,a.headers,e.transformResponse)});return Xb(a.status)?b:k.reject(b)}function d(a){function b(a){var b;f(a,function(c,d){x(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})}var c,d,e,h=g.headers,i=l({},a.headers);h=l({},h.common,h[md(a.method)]);a:for(c in h){d=md(c);for(e in i)if(md(e)===d)continue a;i[c]=h[c]}return b(i),i}var e={method:"get",transformRequest:g.transformRequest,transformResponse:g.transformResponse},h=d(a);l(e,a),e.headers=h,e.method=od(e.method);var i=function(a){h=a.headers;var c=Wb(a.data,Vb(h),a.transformRequest);return r(c)&&f(h,function(a,b){"content-type"===md(b)&&delete h[b]}),r(a.withCredentials)&&!r(g.withCredentials)&&(a.withCredentials=g.withCredentials),q(a,c,h).then(b,b)},j=[i,c],m=k.when(e);for(f(z,function(a){(a.request||a.requestError)&&j.unshift(a.request,a.requestError),(a.response||a.responseError)&&j.push(a.response,a.responseError)});j.length;){var n=j.shift(),o=j.shift();m=m.then(n,o)}return m.success=function(a){return m.then(function(b){a(b.data,b.status,b.headers,e)}),m},m.error=function(a){return m.then(null,function(b){a(b.data,b.status,b.headers,e)}),m},m}function o(){f(arguments,function(a){n[a]=function(b,c){return n(l(c||{},{method:a,url:b}))}})}function p(){f(arguments,function(a){n[a]=function(b,c,d){return n(l(d||{},{method:a,url:b,data:c}))}})}function q(d,f,h){function i(a,b,c,d){m&&(Xb(a)?m.put(u,[a,b,Ub(c),d]):m.remove(u)),j(b,a,c,d),e.$$phase||e.$apply()}function j(a,b,c,e){b=Math.max(b,0),(Xb(b)?p.resolve:p.reject)({data:a,status:b,headers:Vb(c),config:d,statusText:e})}function l(){var a=H(n.pendingRequests,d);-1!==a&&n.pendingRequests.splice(a,1)}var m,o,p=k.defer(),q=p.promise,u=v(d.url,d.params);if(n.pendingRequests.push(d),q.then(l,l),!d.cache&&!g.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(m=t(d.cache)?d.cache:t(g.cache)?g.cache:y),m)if(o=m.get(u),s(o)){if(D(o))return o.then(l,l),o;Cd(o)?j(o[1],o[0],K(o[2]),o[3]):j(o,200,{},"OK")}else m.put(u,q);if(r(o)){var w=Lc(d.url)?b.cookies()[d.xsrfCookieName||g.xsrfCookieName]:c;w&&(h[d.xsrfHeaderName||g.xsrfHeaderName]=w),a(d.method,u,f,i,h,d.timeout,d.withCredentials,d.responseType)}return q}function v(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(Cd(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():Q(a)),c.push(Y(b)+"="+Y(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var y=d("$http"),z=[];return f(i,function(a){z.unshift(u(a)?m.get(a):m.invoke(a))}),f(j,function(a,b){var c=u(a)?m.get(a):m.invoke(a);z.splice(b,0,{response:function(a){return c(k.when(a))},responseError:function(a){return c(k.reject(a))}})}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put"),n.defaults=g,n}]}function Zb(b){if(8>=rd&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!a.XMLHttpRequest))return new a.ActiveXObject("Microsoft.XMLHTTP");if(a.XMLHttpRequest)return new a.XMLHttpRequest;throw d("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function $b(){this.$get=["$browser","$window","$document",function(a,b,c){return _b(a,Zb,a.defer,b.angular.callbacks,c[0])}]}function _b(a,b,c,d,e){function g(a,b,c){var f=e.createElement("script"),g=null;return f.type="text/javascript",f.src=a,f.async=!0,g=function(a){Kd(f,"load",g),Kd(f,"error",g),e.body.removeChild(f),f=null;var h=-1,i="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},Jd(f,"load",g),Jd(f,"error",g),8>=rd&&(f.onreadystatechange=function(){u(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))}),e.body.appendChild(f),g}var h=-1;return function(e,i,j,k,l,m,n,p){function q(){t=h,v&&v(),w&&w.abort()}function r(b,d,e,f,g){y&&c.cancel(y),v=w=null,0===d&&(d=e?200:"file"==Kc(i).protocol?404:0),d=1223===d?204:d,g=g||"",b(d,e,f,g),a.$$completeOutstandingRequest(o)}var t;if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==md(e)){var u="_"+(d.counter++).toString(36);d[u]=function(a){d[u].data=a,d[u].called=!0};var v=g(i.replace("JSON_CALLBACK","angular.callbacks."+u),u,function(a,b){r(k,a,d[u].data,"",b),d[u]=o})}else{var w=b(e);if(w.open(e,i,!0),f(l,function(a,b){s(a)&&w.setRequestHeader(b,a)}),w.onreadystatechange=function(){if(w&&4==w.readyState){var a=null,b=null,c="";t!==h&&(a=w.getAllResponseHeaders(),b="response"in w?w.response:w.responseText),t===h&&10>rd||(c=w.statusText),r(k,t||w.status,b,a,c)}},n&&(w.withCredentials=!0),p)try{w.responseType=p}catch(x){if("json"!==p)throw x}w.send(j||null)}if(m>0)var y=c(q,m);else D(m)&&m.then(q)}}function ac(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,i,j){for(var k,l,m,n,o=0,p=[],q=f.length,r=!1,s=[];q>o;)-1!=(k=f.indexOf(a,o))&&-1!=(l=f.indexOf(b,k+g))?(o!=k&&p.push(f.substring(o,k)),p.push(m=c(n=f.substring(k+g,l))),m.exp=n,o=l+h,r=!0):(o!=q&&p.push(f.substring(o)),o=q);if((q=p.length)||(p.push(""),q=1),j&&p.length>1)throw de("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);return!i||r?(s.length=q,m=function(a){try{for(var b,c=0,g=q;g>c;c++){if("function"==typeof(b=p[c]))if(b=b(a),b=j?e.getTrusted(j,b):e.valueOf(b),null==b)b="";else switch(typeof b){case"string":break;case"number":b=""+b;break;default:b=Q(b)}s[c]=b}return s.join("")}catch(h){var i=de("interr","Can't interpolate: {0}\n{1}",f,h.toString());d(i)}},m.exp=f,m.parts=p,m):void 0}var g=a.length,h=b.length;return f.startSymbol=function(){return a},f.endSymbol=function(){return b},f}]}function bc(){this.$get=["$rootScope","$window","$q",function(a,b,c){function d(d,f,g,h){var i=b.setInterval,j=b.clearInterval,k=c.defer(),l=k.promise,m=0,n=s(h)&&!h;return g=s(g)?g:0,l.then(null,null,d),l.$$intervalId=i(function(){k.notify(m++),g>0&&m>=g&&(k.resolve(m),j(l.$$intervalId),delete e[l.$$intervalId]),n||a.$apply()},f),e[l.$$intervalId]=k,l}var e={};return d.cancel=function(a){return a&&a.$$intervalId in e?(e[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete e[a.$$intervalId],!0):!1},d}]}function cc(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function dc(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function ec(a,b,c){var d=Kc(a,c);b.$$protocol=d.protocol,b.$$host=d.hostname,b.$$port=m(d.port)||fe[d.protocol]||null}function fc(a,b,c){var d="/"!==a.charAt(0);d&&(a="/"+a);var e=Kc(a,c);b.$$path=decodeURIComponent(d&&"/"===e.pathname.charAt(0)?e.pathname.substring(1):e.pathname),b.$$search=V(e.search),b.$$hash=decodeURIComponent(e.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function gc(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function hc(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function ic(a){return a.substr(0,hc(a).lastIndexOf("/")+1)}function jc(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function kc(a,b){this.$$html5=!0,b=b||"";var d=ic(a);ec(a,this,a),this.$$parse=function(b){var c=gc(d,b);if(!u(c))throw ge("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',b,d);fc(c,this,a),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),b=this.$$hash?"#"+X(this.$$hash):"";this.$$url=dc(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$rewrite=function(e){var f,g;return(f=gc(a,e))!==c?(g=f,(f=gc(b,f))!==c?d+(gc("/",f)||f):a+g):(f=gc(d,e))!==c?d+f:d==e+"/"?d:void 0}}function lc(a,b){var c=ic(a);ec(a,this,a),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f=gc(a,d)||gc(c,d),g="#"==f.charAt(0)?gc(b,f):this.$$html5?f:"";if(!u(g))throw ge("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',d,b);fc(g,this,a),this.$$path=e(this.$$path,g,a),this.$$compose()},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=dc(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$rewrite=function(b){return hc(a)==hc(b)?b:void 0}}function mc(a,b){this.$$html5=!0,lc.apply(this,arguments);var c=ic(a);this.$$rewrite=function(d){var e;return a==hc(d)?d:(e=gc(c,d))?a+b+e:c===d+"/"?c:void 0},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=dc(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function nc(a){return function(){return this[a]}}function oc(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function pc(){var b="",c=!1;this.hashPrefix=function(a){return s(a)?(b=a,this):b},this.html5Mode=function(a){return s(a)?(c=a,this):c},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,e,f,g){function h(a){d.$broadcast("$locationChangeSuccess",i.absUrl(),a)}var i,j,k,l=e.baseHref(),m=e.url();c?(k=jc(m)+(l||"/"),j=f.history?kc:mc):(k=hc(m),j=lc),i=new j(k,"#"+b),i.$$parse(i.$$rewrite(m));var n=/^\s*(javascript|mailto):/i;g.on("click",function(c){if(!c.ctrlKey&&!c.metaKey&&2!=c.which){for(var f=sd(c.target);"a"!==md(f[0].nodeName);)if(f[0]===g[0]||!(f=f.parent())[0])return;var h=f.prop("href");if(t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Kc(h.animVal).href),!n.test(h)){if(j===mc){var l=f.attr("href")||f.attr("xlink:href");if(l&&l.indexOf("://")<0){var m="#"+b;if("/"==l[0])h=k+m+l;else if("#"==l[0])h=k+m+(i.path()||"/")+l;else{var o=i.path().split("/"),p=l.split("/");2!==o.length||o[1]||(o.length=1);for(var q=0;q<p.length;q++)"."!=p[q]&&(".."==p[q]?o.pop():p[q].length&&o.push(p[q]));h=k+m+o.join("/")}}}var r=i.$$rewrite(h);h&&!f.attr("target")&&r&&!c.isDefaultPrevented()&&(c.preventDefault(),r!=e.url()&&(i.$$parse(r),d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),i.absUrl()!=m&&e.url(i.absUrl(),!0),e.onUrlChange(function(a){i.absUrl()!=a&&(d.$evalAsync(function(){var b=i.absUrl();i.$$parse(a),d.$broadcast("$locationChangeStart",a,b).defaultPrevented?(i.$$parse(b),e.url(b)):h(b)}),d.$$phase||d.$digest())});var o=0;return d.$watch(function(){var a=e.url(),b=i.$$replace;return o&&a==i.absUrl()||(o++,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",i.absUrl(),a).defaultPrevented?i.$$parse(a):(e.url(i.absUrl(),b),h(a))})),i.$$replace=!1,o}),i}]}function qc(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function rc(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw ie("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function sc(a,b){if(a){if(a.constructor===a)throw ie("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.document&&a.location&&a.alert&&a.setInterval)throw ie("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw ie("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw ie("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function tc(a,b){if(a){if(a.constructor===a)throw ie("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===ke||a===le||me&&a===me)throw ie("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function uc(a,b,d,e,f){sc(a,e),f=f||{};for(var g,h=b.split("."),i=0;h.length>1;i++){g=rc(h.shift(),e);var j=sc(a[g],e);j||(j={},a[g]=j),a=j,a.then&&f.unwrapPromises&&(he(e),"$$v"in a||!function(a){a.then(function(b){a.$$v=b})}(a),a.$$v===c&&(a.$$v={}),a=a.$$v)}return g=rc(h.shift(),e),sc(a[g],e),a[g]=d,d}function vc(a,b,d,e,f,g,h){return rc(a,g),rc(b,g),rc(d,g),rc(e,g),rc(f,g),h.unwrapPromises?function(h,i){var j,k=i&&i.hasOwnProperty(a)?i:h;return null==k?k:(k=k[a],k&&k.then&&(he(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),b?null==k?c:(k=k[b],k&&k.then&&(he(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),d?null==k?c:(k=k[d],k&&k.then&&(he(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),e?null==k?c:(k=k[e],k&&k.then&&(he(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),f?null==k?c:(k=k[f],k&&k.then&&(he(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),k):k):k):k):k)}:function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=i[a],b?null==i?c:(i=i[b],d?null==i?c:(i=i[d],e?null==i?c:(i=i[e],f?null==i?c:i=i[f]:i):i):i):i)}}function wc(a,b,d){if(re.hasOwnProperty(a))return re[a];var e,g=a.split("."),h=g.length;if(b.csp)e=6>h?vc(g[0],g[1],g[2],g[3],g[4],d,b):function(a,e){var f,i=0;do f=vc(g[i++],g[i++],g[i++],g[i++],g[i++],d,b)(a,e),e=c,a=f;while(h>i);return f};else{var i="var p;\n";f(g,function(a,c){rc(a,d),i+="if(s == null) return undefined;\ns="+(c?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\n'+(b.unwrapPromises?'if (s && s.then) {\n pw("'+d.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),i+="return s;";var j=new Function("s","k","pw",i);j.toString=q(i),e=b.unwrapPromises?function(a,b){return j(a,b,he)}:j}return"hasOwnProperty"!==a&&(re[a]=e),e}function xc(){var a={},b={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(a){return s(a)?(b.unwrapPromises=!!a,this):b.unwrapPromises},this.logPromiseWarnings=function(a){return s(a)?(b.logPromiseWarnings=a,this):b.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(c,d,e){return b.csp=d.csp,he=function(a){b.logPromiseWarnings&&!je.hasOwnProperty(a)&&(je[a]=!0,e.warn("[$parse] Promise found in the expression `"+a+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(d){var e;switch(typeof d){case"string":if(a.hasOwnProperty(d))return a[d];var f=new pe(b),g=new qe(f,c,b);return e=g.parse(d),"hasOwnProperty"!==d&&(a[d]=e),e;case"function":return d;default:return o}}}]}function yc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return zc(function(b){a.$evalAsync(b)},b)}]}function zc(a,b){function d(a){return a}function e(a){return j(a)}function g(a){var b=h(),c=0,d=Cd(a)?[]:{};return f(a,function(a,e){c++,i(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var h=function(){var f,g,j=[];return g={resolve:function(b){if(j){var d=j;j=c,f=i(b),d.length&&a(function(){for(var a,b=0,c=d.length;c>b;b++)a=d[b],f.then(a[0],a[1],a[2])})}},reject:function(a){g.resolve(k(a))},notify:function(b){if(j){var c=j;j.length&&a(function(){for(var a,d=0,e=c.length;e>d;d++)a=c[d],a[2](b)})}},promise:{then:function(a,c,g){var i=h(),k=function(c){try{i.resolve((x(a)?a:d)(c))}catch(e){i.reject(e),b(e)}},l=function(a){try{i.resolve((x(c)?c:e)(a))}catch(d){i.reject(d),b(d)}},m=function(a){try{i.notify((x(g)?g:d)(a))}catch(c){b(c)}};return j?j.push([k,l,m]):f.then(k,l,m),i.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,b){var c=h();return b?c.resolve(a):c.reject(a),c.promise}function c(c,e){var f=null;try{f=(a||d)()}catch(g){return b(g,!1)}return D(f)?f.then(function(){return b(c,e)},function(a){return b(a,!1)}):b(c,e)}return this.then(function(a){return c(a,!0)},function(a){return c(a,!1)})}}}},i=function(b){return D(b)?b:{then:function(c){var d=h();return a(function(){d.resolve(c(b))}),d.promise}}},j=function(a){var b=h();return b.reject(a),b.promise},k=function(c){return{then:function(d,f){var g=h();return a(function(){try{g.resolve((x(f)?f:e)(c))}catch(a){g.reject(a),b(a)}}),g.promise}}},l=function(c,f,g,k){var l,m=h(),n=function(a){try{return(x(f)?f:d)(a)}catch(c){return b(c),j(c)}},o=function(a){try{return(x(g)?g:e)(a)}catch(c){return b(c),j(c)}},p=function(a){try{return(x(k)?k:d)(a)}catch(c){b(c)}};return a(function(){i(c).then(function(a){l||(l=!0,m.resolve(i(a).then(n,o,p)))},function(a){l||(l=!0,m.resolve(o(a)))},function(a){l||m.notify(p(a))})}),m.promise};return{defer:h,reject:j,when:l,all:g}}function Ac(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function Bc(){var a=10,b=d("$rootScope"),c=null;this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,g,h,i){function k(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function l(a){if(r.$$phase)throw b("inprog","{0} already in progress",r.$$phase);r.$$phase=a}function m(){r.$$phase=null}function n(a,b){var c=h(a);return cb(c,b),c}function p(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function q(){}k.prototype={constructor:k,$new:function(a){var b;return a?(b=new k,b.$root=this.$root,b.$$asyncQueue=this.$$asyncQueue,b.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=j(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),b=new this.$$childScopeClass),b["this"]=b,b.$parent=this,b.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=b,this.$$childTail=b):this.$$childHead=this.$$childTail=b,b},$watch:function(a,b,d){var e=this,f=n(a,"watch"),g=e.$$watchers,h={fn:b,last:q,get:f,exp:a,eq:!!d};if(c=null,!x(b)){var i=n(b||o,"listener");h.fn=function(a,b,c){i(c)}}if("string"==typeof a&&f.constant){var j=h.fn;h.fn=function(a,b,c){j.call(this,a,b,c),I(g,h)}}return g||(g=e.$$watchers=[]),g.unshift(h),function(){I(g,h),c=null}},$watchCollection:function(a,b){function c(){f=m(j);var a,b,c;if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),a=f.length,q!==a&&(l++,g.length=q=a);for(var d=0;a>d;d++)c=g[d]!==g[d]&&f[d]!==f[d],c||g[d]===f[d]||(l++,g[d]=f[d])}else{g!==o&&(g=o={},q=0,l++),a=0;for(b in f)f.hasOwnProperty(b)&&(a++,g.hasOwnProperty(b)?(c=g[b]!==g[b]&&f[b]!==f[b],c||g[b]===f[b]||(l++,g[b]=f[b])):(q++,g[b]=f[b],l++));if(q>a){l++;for(b in g)g.hasOwnProperty(b)&&!f.hasOwnProperty(b)&&(q--,delete g[b])}}else g!==f&&(g=f,l++);return l}function d(){if(p?(p=!1,b(f,f,j)):b(f,i,j),k)if(t(f))if(e(f)){i=new Array(f.length);for(var a=0;a<f.length;a++)i[a]=f[a]}else{i={};for(var c in f)nd.call(f,c)&&(i[c]=f[c])}else i=f}var f,g,i,j=this,k=b.length>1,l=0,m=h(a),n=[],o={},p=!0,q=0;return this.$watch(c,d)},$digest:function(){var d,e,f,h,j,k,n,o,p,r,s,t=this.$$asyncQueue,u=this.$$postDigestQueue,v=a,w=this,y=[];l("$digest"),i.$$checkUrlChange(),c=null;do{for(k=!1,o=w;t.length;){try{s=t.shift(),s.scope.$eval(s.expression)}catch(z){m(),g(z)}c=null}a:do{if(h=o.$$watchers)for(j=h.length;j--;)try{if(d=h[j])if((e=d.get(o))===(f=d.last)||(d.eq?L(e,f):"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))){if(d===c){k=!1;break a}}else k=!0,c=d,d.last=d.eq?J(e,null):e,d.fn(e,f===q?e:f,o),5>v&&(p=4-v,y[p]||(y[p]=[]),r=x(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,r+="; newVal: "+Q(e)+"; oldVal: "+Q(f),y[p].push(r))}catch(z){m(),g(z)}if(!(n=o.$$childHead||o!==w&&o.$$nextSibling))for(;o!==w&&!(n=o.$$nextSibling);)o=o.$parent}while(o=n);if((k||t.length)&&!v--)throw m(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",a,Q(y))}while(k||t.length);for(m();u.length;)try{u.shift()()}catch(z){g(z)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==r&&(f(this.$$listenerCount,O(null,p,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=o,this.$on=this.$watch=function(){return o})}},$eval:function(a,b){return h(a)(this,b)},$evalAsync:function(a){r.$$phase||r.$$asyncQueue.length||i.defer(function(){r.$$asyncQueue.length&&r.$digest()}),this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return l("$apply"),this.$eval(a)}catch(b){g(b)}finally{m();try{r.$digest()}catch(b){throw g(b),b}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[H(c,b)]=null,p(e,1,a)}},$emit:function(a){var b,c,d,e=[],f=this,h=!1,i={name:a,targetScope:f,stopPropagation:function(){h=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=M([i],arguments,1);do{for(b=f.$$listeners[a]||e,i.currentScope=f,c=0,d=b.length;d>c;c++)if(b[c])try{b[c].apply(null,j)}catch(k){g(k)}else b.splice(c,1),c--,d--;if(h)return i;f=f.$parent}while(f);return i},$broadcast:function(a){for(var b,c,d,e=this,f=e,h=e,i={name:a,targetScope:e,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=M([i],arguments,1);f=h;){for(i.currentScope=f,b=f.$$listeners[a]||[],c=0,d=b.length;d>c;c++)if(b[c])try{b[c].apply(null,j)}catch(k){g(k)}else b.splice(c,1),c--,d--;if(!(h=f.$$listenerCount[a]&&f.$$childHead||f!==e&&f.$$nextSibling))for(;f!==e&&!(h=f.$$nextSibling);)f=f.$parent}return i}};var r=new k;return r}]}function Cc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return rd&&!(rd>=8)||(e=Kc(c).href,""===e||e.match(f))?c:"unsafe:"+e}}}function Dc(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Ec(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw se("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=Dc(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw se("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Fc(a){var b=[];return s(a)&&f(a,function(a){b.push(Ec(a))}),b}function Gc(){this.SCE_CONTEXTS=te;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Fc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Fc(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?Lc(b):!!a.exec(b.href)}function f(c){var d,f,g=Kc(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw se("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw se("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===te.RESOURCE_URL){if(f(b))return b;throw se("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===te.HTML)return k(b);throw se("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(){throw se("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[te.HTML]=g(l),m[te.CSS]=g(l),m[te.URL]=g(l),m[te.JS]=g(l),m[te.RESOURCE_URL]=g(m[te.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function Hc(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sniffer","$sceDelegate",function(b,c,d){if(a&&c.msie&&c.msieDocumentMode<8)throw se("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=K(te);e.isEnabled=function(){return a},e.trustAs=d.trustAs,e.getTrusted=d.getTrusted,e.valueOf=d.valueOf,a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=p),e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:function(b,c){return e.getTrusted(a,d(b,c))}};var g=e.parseAs,h=e.getTrusted,i=e.trustAs;return f(te,function(a,b){var c=md(b);e[jb("parse_as_"+c)]=function(b){return g(a,b)},e[jb("get_trusted_"+c)]=function(b){return h(a,b)},e[jb("trust_as_"+c)]=function(b){return i(a,b)}}),e}]}function Ic(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(md((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=h.documentMode,j=/^(Moz|webkit|O|ms)(?=[A-Z])/,k=h.body&&h.body.style,l=!1,n=!1;if(k){for(var o in k)if(d=j.exec(o)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in k&&"webkit"),l=!!("transition"in k||c+"Transition"in k),n=!!("animation"in k||c+"Animation"in k),!f||l&&n||(l=u(h.body.style.webkitTransition),n=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hashchange:"onhashchange"in a&&(!i||i>7),hasEvent:function(a){if("input"==a&&9==rd)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:Ed(),vendorPrefix:c,transitions:l,animations:n,android:f,msie:rd,msieDocumentMode:i}}]}function Jc(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(a,b,c,d){function e(e,g,h){var i,j=c.defer(),k=j.promise,l=s(h)&&!h;return i=b.defer(function(){try{j.resolve(e())}catch(b){j.reject(b),d(b)}finally{delete f[k.$$timeoutId]}l||a.$apply()},g),k.$$timeoutId=i,f[i]=j,k
}var f={};return e.cancel=function(a){return a&&a.$$timeoutId in f?(f[a.$$timeoutId].reject("canceled"),delete f[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},e}]}function Kc(a){var b=a;return rd&&(ue.setAttribute("href",b),b=ue.href),ue.setAttribute("href",b),{href:ue.href,protocol:ue.protocol?ue.protocol.replace(/:$/,""):"",host:ue.host,search:ue.search?ue.search.replace(/^\?/,""):"",hash:ue.hash?ue.hash.replace(/^#/,""):"",hostname:ue.hostname,port:ue.port,pathname:"/"===ue.pathname.charAt(0)?ue.pathname:"/"+ue.pathname}}function Lc(a){var b=u(a)?Kc(a):a;return b.protocol===ve.protocol&&b.host===ve.host}function Mc(){this.$get=q(a)}function Nc(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Pc),b("date",Xc),b("filter",Oc),b("json",Yc),b("limitTo",Zc),b("lowercase",Ae),b("number",Qc),b("orderBy",$c),b("uppercase",Be)}function Oc(){return function(a,b,c){if(!Cd(a))return a;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0},"function"!==d&&(c="boolean"===d&&c?function(a,b){return Ad.equals(a,b)}:function(a,b){if(a&&b&&"object"==typeof a&&"object"==typeof b){for(var d in a)if("$"!==d.charAt(0)&&nd.call(a,d)&&c(a[d],b[d]))return!0;return!1}return b=(""+b).toLowerCase(),(""+a).toLowerCase().indexOf(b)>-1});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case"array":for(var e=0;e<a.length;e++)if(f(a[e],b))return!0;return!1;default:return!1}};switch(typeof b){case"boolean":case"number":case"string":b={$:b};case"object":for(var g in b)!function(a){"undefined"!=typeof b[a]&&e.push(function(c){return f("$"==a?c:c&&c[a],b[a])})}(g);break;case"function":e.push(b);break;default:return a}for(var h=[],i=0;i<a.length;i++){var j=a[i];e.check(j)&&h.push(j)}return h}}function Pc(a){var b=a.NUMBER_FORMATS;return function(a,c){return r(c)&&(c=b.CURRENCY_SYM),Rc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,2).replace(/\u00A4/g,c)}}function Qc(a){var b=a.NUMBER_FORMATS;return function(a,c){return Rc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Rc(a,b,c,d,e){if(null==a||!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?(g="0",a=0):(h=g,j=!0)}if(j)e>0&&a>-1&&1>a&&(h=a.toFixed(e));else{var l=(g.split(we)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e),0===a&&(f=!1);var m=(""+a).split(we),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return i.push(f?b.negPre:b.posPre),i.push(h),i.push(f?b.negSuf:b.posSuf),i.join("")}function Sc(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function Tc(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),Sc(f,b,d)}}function Uc(a,b){return function(c,d){var e=c["get"+a](),f=od(b?"SHORT"+a:a);return d[f][e]}}function Vc(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=Sc(Math[b>0?"floor":"ceil"](b/60),2)+Sc(Math.abs(b%60),2)}function Wc(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function Xc(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d){var e,g,h="",i=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=ze.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)g=ye.exec(d),g?(i=M(i,g,1),d=i.pop()):(i.push(d),d=null);return f(i,function(b){e=xe[b],h+=e?e(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function Yc(){return function(a){return Q(a,!0)}}function Zc(){return function(a,b){if(!Cd(a)&&!u(a))return a;if(b=1/0===Math.abs(Number(b))?Number(b):m(b),u(a))return b?b>=0?a.slice(0,b):a.slice(b,a.length):"";var c,d,e=[];for(b>a.length?b=a.length:b<-a.length&&(b=-a.length),b>0?(c=0,d=b):(c=a.length+b,d=a.length);d>c;c++)e.push(a[c]);return e}}function $c(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return S(b)?function(b,c){return a(c,b)}:a}function h(a,b){var c=typeof a,d=typeof b;return c==d?(w(a)&&w(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}if(!e(b))return b;if(!c)return b;c=Cd(c)?c:[c],c=F(c,function(b){var c=!1,d=b||p;if(u(b)&&(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),d=a(b),d.constant)){var e=d();return g(function(a,b){return h(a[e],b[e])},c)}return g(function(a,b){return h(d(a),d(b))},c)});for(var i=[],j=0;j<b.length;j++)i.push(b[j]);return i.sort(g(f,d))}}function _c(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function ad(a,b,c,d){function e(b,c){c=c?"-"+_(c,"-"):"",d.setClass(a,(b?Oe:Pe)+c,(b?Pe:Oe)+c)}var g=this,h=a.parent().controller("form")||Ee,i=0,j=g.$error={},k=[];g.$name=b.name||b.ngForm,g.$dirty=!1,g.$pristine=!0,g.$valid=!0,g.$invalid=!1,h.$addControl(g),a.addClass(Qe),e(!0),g.$addControl=function(a){db(a.$name,"input"),k.push(a),a.$name&&(g[a.$name]=a)},g.$removeControl=function(a){a.$name&&g[a.$name]===a&&delete g[a.$name],f(j,function(b,c){g.$setValidity(c,!0,a)}),I(k,a)},g.$setValidity=function(a,b,c){var d=j[a];if(b)d&&(I(d,c),d.length||(i--,i||(e(b),g.$valid=!0,g.$invalid=!1),j[a]=!1,e(!0,a),h.$setValidity(a,!0,g)));else{if(i||e(b),d){if(G(d,c))return}else j[a]=d=[],i++,e(!1,a),h.$setValidity(a,!1,g);d.push(c),g.$valid=!1,g.$invalid=!0}},g.$setDirty=function(){d.removeClass(a,Qe),d.addClass(a,Re),g.$dirty=!0,g.$pristine=!1,h.$setDirty()},g.$setPristine=function(){d.removeClass(a,Re),d.addClass(a,Qe),g.$dirty=!1,g.$pristine=!0,f(k,function(a){a.$setPristine()})}}function bd(a,b,d,e){return a.$setValidity(b,d),d?e:c}function cd(a,b){var c,d;if(b)for(c=0;c<b.length;++c)if(d=b[c],a[d])return!0;return!1}function dd(a,b,c,d,e){if(t(e)){a.$$hasNativeValidators=!0;var f=function(f){return a.$error[b]||cd(e,d)||!cd(e,c)?f:void a.$setValidity(b,!1)};a.$parsers.push(f)}}function ed(a,b,c,e,f,g){var h=b.prop(ld),i=b[0].placeholder,j={},k=md(b[0].type);if(e.$$validityState=h,!f.android){var l=!1;b.on("compositionstart",function(){l=!0}),b.on("compositionend",function(){l=!1,n()})}var n=function(d){if(!l){var f=b.val();if(rd&&"input"===(d||j).type&&b[0].placeholder!==i)return void(i=b[0].placeholder);"password"!==k&&S(c.ngTrim||"T")&&(f=Dd(f));var g=h&&e.$$hasNativeValidators;(e.$viewValue!==f||""===f&&g)&&(a.$root.$$phase?e.$setViewValue(f):a.$apply(function(){e.$setViewValue(f)}))}};if(f.hasEvent("input"))b.on("input",n);else{var o,p=function(){o||(o=g.defer(function(){n(),o=null}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||p()}),f.hasEvent("paste")&&b.on("paste cut",p)}b.on("change",n),e.$render=function(){b.val(e.$isEmpty(e.$viewValue)?"":e.$viewValue)};var q,r,s=c.ngPattern;if(s){var t=function(a,b){return bd(e,"pattern",e.$isEmpty(b)||a.test(b),b)};r=s.match(/^\/(.*)\/([gim]*)$/),r?(s=new RegExp(r[1],r[2]),q=function(a){return t(s,a)}):q=function(c){var e=a.$eval(s);if(!e||!e.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,T(b));return t(e,c)},e.$formatters.push(q),e.$parsers.push(q)}if(c.ngMinlength){var u=m(c.ngMinlength),v=function(a){return bd(e,"minlength",e.$isEmpty(a)||a.length>=u,a)};e.$parsers.push(v),e.$formatters.push(v)}if(c.ngMaxlength){var w=m(c.ngMaxlength),x=function(a){return bd(e,"maxlength",e.$isEmpty(a)||a.length<=w,a)};e.$parsers.push(x),e.$formatters.push(x)}}function fd(a,b,d,e,f,g){if(ed(a,b,d,e,f,g),e.$parsers.push(function(a){var b=e.$isEmpty(a);return b||Ke.test(a)?(e.$setValidity("number",!0),""===a?null:b?a:parseFloat(a)):(e.$setValidity("number",!1),c)}),dd(e,"number",Me,null,e.$$validityState),e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a}),d.min){var h=function(a){var b=parseFloat(d.min);return bd(e,"min",e.$isEmpty(a)||a>=b,a)};e.$parsers.push(h),e.$formatters.push(h)}if(d.max){var i=function(a){var b=parseFloat(d.max);return bd(e,"max",e.$isEmpty(a)||b>=a,a)};e.$parsers.push(i),e.$formatters.push(i)}e.$formatters.push(function(a){return bd(e,"number",e.$isEmpty(a)||v(a),a)})}function gd(a,b,c,d,e,f){ed(a,b,c,d,e,f);var g=function(a){return bd(d,"url",d.$isEmpty(a)||Ie.test(a),a)};d.$formatters.push(g),d.$parsers.push(g)}function hd(a,b,c,d,e,f){ed(a,b,c,d,e,f);var g=function(a){return bd(d,"email",d.$isEmpty(a)||Je.test(a),a)};d.$formatters.push(g),d.$parsers.push(g)}function id(a,b,c,d){r(c.name)&&b.attr("name",j()),b.on("click",function(){b[0].checked&&a.$apply(function(){d.$setViewValue(c.value)})}),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function jd(a,b,c,d){var e=c.ngTrueValue,f=c.ngFalseValue;u(e)||(e=!0),u(f)||(f=!1),b.on("click",function(){a.$apply(function(){d.$setViewValue(b[0].checked)})}),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a!==e},d.$formatters.push(function(a){return a===e}),d.$parsers.push(function(a){return a?e:f})}function kd(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(Cd(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);f=l(f,-1),e=l(e,1),0===e.length?c.removeClass(h,f):0===f.length?c.addClass(h,e):c.setClass(h,e,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!L(a,o)){var d=e(o);m(d,c)}}else j(c)}o=K(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}var ld="validity",md=function(a){return u(a)?a.toLowerCase():a},nd=Object.prototype.hasOwnProperty,od=function(a){return u(a)?a.toUpperCase():a},pd=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},qd=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(md=pd,od=qd);var rd,sd,td,ud,vd,wd=[].slice,xd=[].push,yd=Object.prototype.toString,zd=d("ng"),Ad=a.angular||(a.angular={}),Bd=["0","0","0"];rd=m((/msie (\d+)/.exec(md(navigator.userAgent))||[])[1]),isNaN(rd)&&(rd=m((/trident\/.*; rv:(\d+)/.exec(md(navigator.userAgent))||[])[1])),o.$inject=[],p.$inject=[];var Cd=function(){return x(Array.isArray)?Array.isArray:function(a){return"[object Array]"===yd.call(a)}}(),Dd=function(){return String.prototype.trim?function(a){return u(a)?a.trim():a}:function(a){return u(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();vd=9>rd?function(a){return a=a.nodeName?a:a[0],a.scopeName&&"HTML"!=a.scopeName?od(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var Ed=function(){if(s(Ed.isActive_))return Ed.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return Ed.isActive_=a},Fd=/[A-Z]/g,Gd={full:"1.2.26",major:1,minor:2,dot:26,codeName:"zucchini-expansion"};ob.expando="ng339";var Hd=ob.cache={},Id=1,Jd=a.document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},Kd=a.document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},Ld=(ob._data=function(a){return this.cache[a[this.expando]]||{}},/([\:\-\_]+(.))/g),Md=/^moz([A-Z])/,Nd=d("jqLite"),Od=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Pd=/<|&#?\w+;/,Qd=/<([\w:]+)/,Rd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Sd={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Sd.optgroup=Sd.option,Sd.tbody=Sd.tfoot=Sd.colgroup=Sd.caption=Sd.thead,Sd.th=Sd.td;var Td=ob.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),ob(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return sd(a>=0?this[a]:this[this.length+a])},length:0,push:xd,sort:[].sort,splice:[].splice},Ud={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Ud[md(a)]=a});var Vd={};f("input,select,option,textarea,button,form,details".split(","),function(a){Vd[od(a)]=!0}),f({data:ub,removeData:sb},function(a,b){ob[b]=a}),f({data:ub,inheritedData:Ab,scope:function(a){return sd.data(a,"$scope")||Ab(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return sd.data(a,"$isolateScope")||sd.data(a,"$isolateScopeNoTemplate")},controller:zb,injector:function(a){return Ab(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:vb,css:function(a,b,d){if(b=jb(b),!s(d)){var e;return 8>=rd&&(e=a.currentStyle&&a.currentStyle[b],""===e&&(e="auto")),e=e||a.style[b],8>=rd&&(e=""===e?c:e),e}a.style[b]=d},attr:function(a,b,d){var e=md(b);if(Ud[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,c){var d=b[a.nodeType];return r(c)?d?a[d]:"":void(a[d]=c)}var b=[];return 9>rd?(b[1]="innerText",b[3]="nodeValue"):b[1]=b[3]="textContent",a.$dv="",a}(),val:function(a,b){if(r(b)){if("SELECT"===vd(a)&&a.multiple){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){if(r(b))return a.innerHTML;for(var c=0,d=a.childNodes;c<d.length;c++)qb(d[c]);a.innerHTML=b},empty:Bb},function(a,b){ob.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Bb&&(2==a.length&&a!==vb&&a!==zb?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===ub)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:sb,dealoc:qb,on:function Cf(a,c,d,e){if(s(e))throw Nd("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var g=tb(a,"events"),h=tb(a,"handle");g||tb(a,"events",g={}),h||tb(a,"handle",h=Db(a,g)),f(c.split(" "),function(c){var e=g[c];if(!e){if("mouseenter"==c||"mouseleave"==c){var f=b.body.contains||b.body.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};g[c]=[];var i={mouseleave:"mouseout",mouseenter:"mouseover"};Cf(a,i[c],function(a){var b=this,d=a.relatedTarget;(!d||d!==b&&!f(b,d))&&h(a,c)})}else Jd(a,c,h),g[c]=[];e=g[c]}e.push(d)})},off:rb,one:function(a,b,c){a=sd(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;qb(a),f(new ob(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){f(new ob(b),function(b){(1===a.nodeType||11===a.nodeType)&&a.appendChild(b)})},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;f(new ob(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=sd(b)[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:function(a){qb(a);var b=a.parentNode;b&&b.removeChild(a)},after:function(a,b){var c=a,d=a.parentNode;f(new ob(b),function(a){d.insertBefore(a,c.nextSibling),c=a})},addClass:xb,removeClass:wb,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!vb(a,b)),(d?xb:wb)(a,b)})},parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(var b=a.nextSibling;null!=b&&1!==b.nodeType;)b=b.nextSibling;return b},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:pb,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=(tb(a,"events")||{})[h];i&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=K(i),g=c?[d].concat(c):[d],f(e,function(b){b.apply(a,g)}))}},function(a,b){ob.prototype[b]=function(b,c,d){for(var e,f=0;f<this.length;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=sd(e))):yb(e,a(this[f],b,c,d));return s(e)?e:this},ob.prototype.bind=ob.prototype.on,ob.prototype.unbind=ob.prototype.off}),Fb.prototype={put:function(a,b){this[Eb(a,this.nextUid)]=b},get:function(a){return this[Eb(a,this.nextUid)]},remove:function(a){var b=this[a=Eb(a,this.nextUid)];return delete this[a],b}};var Wd=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Xd=/,/,Yd=/^\s*(_?)(\S+?)\1\s*$/,Zd=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$d=d("$injector"),_d=d("$animate"),ae=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw _d("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(a,b){function c(a){a&&b(a)}return{enter:function(a,b,d,e){d?d.after(a):(b&&b[0]||(b=d.parent()),b.append(a)),c(e)},leave:function(a,b){a.remove(),c(b)},move:function(a,b,c,d){this.enter(a,b,c,d)},addClass:function(a,b,d){b=u(b)?b:Cd(b)?b.join(" "):"",f(a,function(a){xb(a,b)}),c(d)},removeClass:function(a,b,d){b=u(b)?b:Cd(b)?b.join(" "):"",f(a,function(a){wb(a,b)}),c(d)},setClass:function(a,b,d,e){f(a,function(a){xb(a,b),wb(a,d)}),c(e)},enabled:o}}]}],be=d("$compile");Ob.$inject=["$provide","$$sanitizeUriProvider"];var ce=/^(x[\:\-_]|data[\:\-_])/i,de=d("$interpolate"),ee=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,fe={http:80,https:443,ftp:21},ge=d("$location");mc.prototype=lc.prototype=kc.prototype={$$html5:!1,$$replace:!1,absUrl:nc("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=ee.exec(a);return b[1]&&this.path(decodeURIComponent(b[1])),(b[2]||b[1])&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:nc("$$protocol"),host:nc("$$host"),port:nc("$$port"),path:oc("$$path",function(a){return a=a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=V(a);else{if(!t(a))throw ge("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:oc("$$hash",function(a){return a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};var he,ie=d("$parse"),je={},ke=Function.prototype.call,le=Function.prototype.apply,me=Function.prototype.bind,ne={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:o,"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":o,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},oe={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},pe=function(a){this.options=a};pe.prototype={constructor:pe,lex:function(a){for(this.text=a,this.index=0,this.ch=c,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var b=this.ch+this.peek(),d=b+this.peek(2),e=ne[this.ch],f=ne[b],g=ne[d];g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=3):f?(this.tokens.push({index:this.index,text:b,fn:f}),this.index+=2):e?(this.tokens.push({index:this.index,text:this.ch,fn:e}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw ie("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=md(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a,b,c,d,e=this,f="",g=this.index;this.index<this.text.length&&(d=this.text.charAt(this.index),"."===d||this.isIdent(d)||this.isNumber(d));)"."===d&&(a=this.index),f+=d,this.index++;if(a)for(b=this.index;b<this.text.length;){if(d=this.text.charAt(b),"("===d){c=f.substr(a-g+1),f=f.substr(0,a-g),this.index=b;break}if(!this.isWhitespace(d))break;b++}var h={index:g,text:f};if(ne.hasOwnProperty(f))h.fn=ne[f],h.literal=!0,h.constant=!0;else{var i=wc(f,this.options,this.text);h.fn=l(function(a,b){return i(a,b)},{assign:function(a,b){return uc(a,f,b,e.text,e.options)}})}this.tokens.push(h),c&&(this.tokens.push({index:a,text:"."}),this.tokens.push({index:a+1,text:c}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=oe[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,string:c,literal:!0,constant:!0,fn:function(){return c}});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var qe=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};qe.ZERO=l(function(){return 0},{constant:!0}),qe.prototype={constructor:qe,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),a.literal=!!b.literal,a.constant=!!b.constant}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw ie("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw ie("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return l(function(c,d){return a(c,d,b)},{constant:b.constant})},ternaryFn:function(a,b,c){return l(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},binaryFn:function(a,b,c){return l(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},filterChain:function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},filter:function(){for(var a=this.expect(),b=this.$filter(a.text),c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return d}}c.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},ternary:function(){var a,b,c=this.logicalOR();return(b=this.expect("?"))?(a=this.assignment(),(b=this.expect(":"))?this.ternaryFn(c,a,this.assignment()):void this.throwError("expected :",b)):c},logicalOR:function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},logicalAND:function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b},equality:function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},relational:function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(qe.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var b=this,c=this.expect().text,d=wc(c,this.options,this.text);return l(function(b,c,e){return d(e||a(b,c))},{assign:function(d,e,f){var g=a(d,f);return g||a.assign(d,g={}),uc(g,c,e,b.text,b.options)}})},objectIndex:function(a){var b=this,d=this.expression();return this.consume("]"),l(function(e,f){var g,h,i=a(e,f),j=d(e,f);return rc(j,b.text),i?(g=sc(i[j],b.text),g&&g.then&&b.options.unwrapPromises&&(h=g,"$$v"in g||(h.$$v=c,h.then(function(a){h.$$v=a})),g=g.$$v),g):c},{assign:function(c,e,f){var g=rc(d(c,f),b.text),h=sc(a(c,f),b.text);return h||a.assign(c,h={}),h[g]=e}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this;return function(e,f){for(var g=[],h=b?b(e,f):e,i=0;i<c.length;i++)g.push(sc(c[i](e,f),d.text));var j=a(e,f,h)||o;sc(h,d.text),tc(j,d.text);var k=j.apply?j.apply(h,g):j(g[0],g[1],g[2],g[3],g[4]);return sc(k,d.text)}},arrayDeclaration:function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},object:function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.expect(),d=c.string||c.text;this.consume(":");var e=this.expression();a.push({key:d,value:e}),e.constant||(b=!1)}while(this.expect(","));return this.consume("}"),l(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}};var re={},se=d("$sce"),te={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ue=b.createElement("a"),ve=Kc(a.location.href,!0);Nc.$inject=["$provide"],Pc.$inject=["$locale"],Qc.$inject=["$locale"];var we=".",xe={yyyy:Tc("FullYear",4),yy:Tc("FullYear",2,0,!0),y:Tc("FullYear",1),MMMM:Uc("Month"),MMM:Uc("Month",!0),MM:Tc("Month",2,1),M:Tc("Month",1,1),dd:Tc("Date",2),d:Tc("Date",1),HH:Tc("Hours",2),H:Tc("Hours",1),hh:Tc("Hours",2,-12),h:Tc("Hours",1,-12),mm:Tc("Minutes",2),m:Tc("Minutes",1),ss:Tc("Seconds",2),s:Tc("Seconds",1),sss:Tc("Milliseconds",3),EEEE:Uc("Day"),EEE:Uc("Day",!0),a:Wc,Z:Vc},ye=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,ze=/^\-?\d+$/;Xc.$inject=["$locale"];var Ae=q(md),Be=q(od);$c.$inject=["$parse"];var Ce=q({restrict:"E",compile:function(a,c){return 8>=rd&&(c.href||c.name||c.$set("href",""),a.append(b.createComment("IE fix"))),c.href||c.xlinkHref||c.name?void 0:function(a,b){var c="[object SVGAnimatedString]"===yd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}),De={};f(Ud,function(a,b){if("multiple"!=a){var c=Pb("ng-"+b);
De[c]=function(){return{priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(["src","srcset","href"],function(a){var b=Pb("ng-"+a);De[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===yd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(rd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Ee={$addControl:o,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o};ad.$inject=["$element","$attrs","$scope","$animate"];var Fe=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:ad,compile:function(){return{pre:function(a,d,e,f){if(!e.action){var g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};Jd(d[0],"submit",g),d.on("$destroy",function(){b(function(){Kd(d[0],"submit",g)},0,!1)})}var h=d.parent().controller("form"),i=e.name||e.ngForm;i&&uc(a,i,f,i),h&&d.on("$destroy",function(){h.$removeControl(f),i&&uc(a,i,c,i),l(f,Ee)})}}}};return d}]},Ge=Fe(),He=Fe(!0),Ie=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Je=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ke=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Le={text:ed,number:fd,url:gd,email:hd,radio:id,checkbox:jd,hidden:o,button:o,submit:o,reset:o,file:o},Me=["badInput"],Ne=["$browser","$sniffer",function(a,b){return{restrict:"E",require:"?ngModel",link:function(c,d,e,f){f&&(Le[md(e.type)]||Le.text)(c,d,e,f,b,a)}}}],Oe="ng-valid",Pe="ng-invalid",Qe="ng-pristine",Re="ng-dirty",Se=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,b,c,e,g,h){function i(a,b){b=b?"-"+_(b,"-"):"",h.removeClass(e,(a?Pe:Oe)+b),h.addClass(e,(a?Oe:Pe)+b)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=c.name;var j=g(c.ngModel),k=j.assign;if(!k)throw d("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",c.ngModel,T(e));this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||Ee,m=0,n=this.$error={};e.addClass(Qe),i(!0),this.$setValidity=function(a,b){n[a]!==!b&&(b?(n[a]&&m--,m||(i(!0),this.$valid=!0,this.$invalid=!1)):(i(!1),this.$invalid=!0,this.$valid=!1,m++),n[a]=!b,i(b,a),l.$setValidity(a,b,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,h.removeClass(e,Re),h.addClass(e,Qe)},this.$setViewValue=function(c){this.$viewValue=c,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,h.removeClass(e,Qe),h.addClass(e,Re),l.$setDirty()),f(this.$parsers,function(a){c=a(c)}),this.$modelValue!==c&&(this.$modelValue=c,k(a,c),f(this.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}}))};var p=this;a.$watch(function(){var b=j(a);if(p.$modelValue!==b){var c=p.$formatters,d=c.length;for(p.$modelValue=b;d--;)b=c[d](b);p.$viewValue!==b&&(p.$viewValue=b,p.$render())}return b})}],Te=function(){return{require:["ngModel","^?form"],controller:Se,link:function(a,b,c,d){var e=d[0],f=d[1]||Ee;f.$addControl(e),a.$on("$destroy",function(){f.$removeControl(e)})}}},Ue=q({require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),Ve=function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){c.required=!0;var e=function(a){return c.required&&d.$isEmpty(a)?void d.$setValidity("required",!1):(d.$setValidity("required",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e),c.$observe("required",function(){e(d.$viewValue)})}}}},We=function(){return{require:"ngModel",link:function(a,b,d,e){var g=/\/(.*)\//.exec(d.ngList),h=g&&new RegExp(g[1])||d.ngList||",",i=function(a){if(!r(a)){var b=[];return a&&f(a.split(h),function(a){a&&b.push(Dd(a))}),b}};e.$parsers.push(i),e.$formatters.push(function(a){return Cd(a)?a.join(", "):c}),e.$isEmpty=function(a){return!a||!a.length}}}},Xe=/^(true|false|\d+)$/,Ye=function(){return{priority:100,compile:function(a,b){return Xe.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Ze=_c({compile:function(a){return a.addClass("ng-binding"),function(a,b,d){b.data("$binding",d.ngBind),a.$watch(d.ngBind,function(a){b.text(a==c?"":a)})}}}),$e=["$interpolate",function(a){return function(b,c,d){var e=a(c.attr(d.$attr.ngBindTemplate));c.addClass("ng-binding").data("$binding",e),d.$observe("ngBindTemplate",function(a){c.text(a)})}}],_e=["$sce","$parse",function(a,b){return{compile:function(c){return c.addClass("ng-binding"),function(c,d,e){function f(){return(g(c)||"").toString()}d.data("$binding",e.ngBindHtml);var g=b(e.ngBindHtml);c.$watch(f,function(){d.html(a.getTrustedHtml(g(c))||"")})}}}}],af=kd("",!0),bf=kd("Odd",0),cf=kd("Even",1),df=_c({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),ef=[function(){return{scope:!0,controller:"@",priority:500}}],ff={},gf={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Pb("ng-"+a);ff[b]=["$parse","$rootScope",function(c,d){return{compile:function(e,f){var g=c(f[b]);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};gf[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var hf=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(f){S(f)?i||(i=c.$new(),g(i,function(c){c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)})):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=fb(h.clone),a.leave(j,function(){j=null}),h=null))})}}}],jf=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,b,c,d,e){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Ad.noop,compile:function(f,g){var h=g.ngInclude||g.src,i=g.onload||"",j=g.autoscroll;return function(f,g,k,l,m){var n,o,p,q=0,r=function(){o&&(o.remove(),o=null),n&&(n.$destroy(),n=null),p&&(d.leave(p,function(){o=null}),o=p,p=null)};f.$watch(e.parseAsResourceUrl(h),function(e){var h=function(){!s(j)||j&&!f.$eval(j)||c()},k=++q;e?(a.get(e,{cache:b}).success(function(a){if(k===q){var b=f.$new();l.template=a;var c=m(b,function(a){r(),d.enter(a,null,g,h)});n=b,p=c,n.$emit("$includeContentLoaded"),f.$eval(i)}}).error(function(){k===q&&r()}),f.$emit("$includeContentRequested")):(r(),l.template=null)})}}}}],kf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,c,d,e){c.html(e.template),a(c.contents())(b)}}}],lf=_c({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),mf=_c({terminal:!0,priority:1e3}),nf=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(d,e,g){var h=g.count,i=g.$attr.when&&e.attr(g.$attr.when),j=g.offset||0,k=d.$eval(i)||{},l={},m=b.startSymbol(),n=b.endSymbol(),o=/^when(Minus)?(.+)$/;f(g,function(a,b){o.test(b)&&(k[md(b.replace("when","").replace("Minus","-"))]=e.attr(g.$attr[b]))}),f(k,function(a,d){l[d]=b(a.replace(c,m+h+"-"+j+n))}),d.$watch(function(){var b=parseFloat(d.$eval(h));return isNaN(b)?"":(b in k||(b=a.pluralCat(b-j)),l[b](d,e,!0))},function(a){e.text(a)})}}}],of=["$parse","$animate",function(a,c){function g(a){return a.clone[0]}function h(a){return a.clone[a.clone.length-1]}var i="$$NG_REMOVED",j=d("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(d,k,l,m,n){var o,p,q,r,s,t,u,v,w,x=l.ngRepeat,y=x.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),z={$id:Eb};if(!y)throw j("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",x);if(t=y[1],u=y[2],o=y[3],o?(p=a(o),q=function(a,b,c){return w&&(z[w]=a),z[v]=b,z.$index=c,p(d,z)}):(r=function(a,b){return Eb(b)},s=function(a){return a}),y=t.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!y)throw j("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",t);v=y[3]||y[1],w=y[2];var A={};d.$watchCollection(u,function(a){var l,m,o,p,t,u,y,z,B,C,D,E,F=k[0],G={},H=[];if(e(a))C=a,B=q||r;else{B=q||s,C=[];for(u in a)a.hasOwnProperty(u)&&"$"!=u.charAt(0)&&C.push(u);C.sort()}for(p=C.length,m=H.length=C.length,l=0;m>l;l++)if(u=a===C?l:C[l],y=a[u],z=B(u,y,l),db(z,"`track by` id"),A.hasOwnProperty(z))D=A[z],delete A[z],G[z]=D,H[l]=D;else{if(G.hasOwnProperty(z))throw f(H,function(a){a&&a.scope&&(A[a.id]=a)}),j("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",x,z,Q(y));H[l]={id:z},G[z]=!1}for(u in A)A.hasOwnProperty(u)&&(D=A[u],E=fb(D.clone),c.leave(E),f(E,function(a){a[i]=!0}),D.scope.$destroy());for(l=0,m=C.length;m>l;l++){if(u=a===C?l:C[l],y=a[u],D=H[l],H[l-1]&&(F=h(H[l-1])),D.scope){t=D.scope,o=F;do o=o.nextSibling;while(o&&o[i]);g(D)!=o&&c.move(fb(D.clone),null,sd(F)),F=h(D)}else t=d.$new();t[v]=y,w&&(t[w]=u),t.$index=l,t.$first=0===l,t.$last=l===p-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&l)),D.scope||n(t,function(a){a[a.length++]=b.createComment(" end ngRepeat: "+x+" "),c.enter(a,null,sd(F)),F=a,D.scope=t,D.clone=a,G[D.id]=D})}A=G})}}}],pf=["$animate",function(a){return function(b,c,d){b.$watch(d.ngShow,function(b){a[S(b)?"removeClass":"addClass"](c,"ng-hide")})}}],qf=["$animate",function(a){return function(b,c,d){b.$watch(d.ngHide,function(b){a[S(b)?"addClass":"removeClass"](c,"ng-hide")})}}],rf=_c(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),sf=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,c,d,e){var g=d.ngSwitch||d.on,h=[],i=[],j=[],k=[];b.$watch(g,function(c){var g,l;for(g=0,l=j.length;l>g;++g)j[g].remove();for(j.length=0,g=0,l=k.length;l>g;++g){var m=i[g];k[g].$destroy(),j[g]=m,a.leave(m,function(){j.splice(g,1)})}i.length=0,k.length=0,(h=e.cases["!"+c]||e.cases["?"])&&(b.$eval(d.change),f(h,function(c){var d=b.$new();k.push(d),c.transclude(d,function(b){var d=c.element;i.push(b),a.enter(b,d.parent(),d)})}))})}}}],tf=_c({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),uf=_c({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),vf=_c({link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(b));f(function(a){b.empty(),b.append(a)})}}),wf=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],xf=d("ngOptions"),yf=q({terminal:!0}),zf=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b){db(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove())},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue==a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Eb(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(y.parent()&&y.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){y.parent()&&y.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Fb(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){L(d,c.$viewValue)||(d=K(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,f,h){function i(){var a=!1;if(t){var c=h.$modelValue;if(z&&Cd(c)){a=new Fb([]);for(var d={},e=0;e<c.length;e++)d[m]=c[e],a.put(z(b,d),c[e])}else a=new Fb(c)}return a}function j(){var a,c,d,e,j,k,u,y,B,C,D,E,F,G,H,I={"":[]},J=[""],K=h.$modelValue,L=r(b)||[],M=n?g(L):L,N={},O=i();for(D=0;B=M.length,B>D;D++){if(u=D,n){if(u=M[D],"$"===u.charAt(0))continue;N[n]=u}if(N[m]=L[u],a=o(b,N)||"",(c=I[a])||(c=I[a]=[],J.push(a)),t)E=s(O.remove(z?z(b,N):q(b,N)));else{if(z){var P={};P[m]=K,E=z(b,P)===z(b,N)}else E=K===q(b,N);O=O||E}H=l(b,N),H=s(H)?H:"",c.push({id:z?z(b,N):n?M[D]:D,label:H,selected:E})}for(t||(v||null===K?I[""].unshift({id:"",label:"",selected:!O}):O||I[""].unshift({id:"?",label:"",selected:!0})),C=0,y=J.length;y>C;C++){for(a=J[C],c=I[a],A.length<=C?(e={element:x.clone().attr("label",a),label:c.label},j=[e],A.push(j),f.append(e.element)):(j=A[C],e=j[0],e.label!=a&&e.element.attr("label",e.label=a)),F=null,D=0,B=c.length;B>D;D++)d=c[D],(k=j[D+1])?(F=k.element,k.label!==d.label&&F.text(k.label=d.label),k.id!==d.id&&F.val(k.id=d.id),F[0].selected!==d.selected&&(F.prop("selected",k.selected=d.selected),rd&&F.prop("selected",k.selected))):(""===d.id&&v?G=v:(G=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),j.push(k={element:G,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,G),F?F.after(G):e.element.append(G),F=G);for(D++;j.length>D;)d=j.pop(),p.removeOption(d.label),d.element.remove()}for(;A.length>C;)A.pop()[0].element.remove()}var k;if(!(k=u.match(e)))throw xf("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",u,T(f));var l=d(k[2]||k[1]),m=k[4]||k[6],n=k[5],o=d(k[3]||""),q=d(k[2]?k[1]:m),r=d(k[7]),y=k[8],z=y?d(k[8]):null,A=[[{element:f,label:""}]];v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),f.empty(),f.on("change",function(){b.$apply(function(){var a,d,e,g,i,k,l,o,p,s=r(b)||[],u={};if(t){for(e=[],k=0,o=A.length;o>k;k++)for(a=A[k],i=1,l=a.length;l>i;i++)if((g=a[i].element)[0].selected){if(d=g.val(),n&&(u[n]=d),z)for(p=0;p<s.length&&(u[m]=s[p],z(b,u)!=d);p++);else u[m]=s[d];e.push(q(b,u))}}else if(d=f.val(),"?"==d)e=c;else if(""===d)e=null;else if(z){for(p=0;p<s.length;p++)if(u[m]=s[p],z(b,u)==d){e=q(b,u);break}}else u[m]=s[d],n&&(u[n]=d),e=q(b,u);h.$setViewValue(e),j()})}),h.$render=j,b.$watchCollection(r,j),b.$watchCollection(function(){var a={},c=r(b);if(c){for(var d=new Array(c.length),e=0,f=c.length;f>e;e++)a[m]=c[e],d[e]=l(b,a);return d}},j),t&&b.$watchCollection(function(){return h.$modelValue},j)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=sd(b.createElement("option")),x=sd(b.createElement("optgroup")),y=w.clone(),z=0,A=i.children(),B=A.length;B>z;z++)if(""===A[z].value){o=v=A.eq(z);break}p.init(q,v,y),t&&(q.$isEmpty=function(a){return!a||0===a.length}),u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],Af=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound?c.prop("selected",!1):h=b,e?a.$watch(e,function(a,b){d.$set("value",a),a!==b&&h.removeOption(b),h.addOption(a)}):h.addOption(d.value),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],Bf=q({restrict:"E",terminal:!0});return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(ab(),hb(Ad),void sd(b).ready(function(){Z(b,$)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),function(a,b,c){"use strict";function d(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;h>f&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;b.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(a,d){function h(a){return i(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function i(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function j(a,b){this.template=a,this.defaults=b||{},this.urlParams={}}function k(h,i,r){function s(a,b){var c={};return b=o({},i,b),n(b,function(b,d){q(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function t(a){return a.resource}function u(a){f(a||{},this)}var v=new j(h);return r=o({},l,r),n(r,function(e,h){var i=/^(POST|PUT|PATCH)$/i.test(e.method);u[h]=function(h,j,k,l){var r,w,x,y={};switch(arguments.length){case 4:x=l,w=k;case 3:case 2:if(!q(j)){y=h,r=j,w=k;break}if(q(h)){w=h,x=j;break}w=j,x=k;case 1:q(h)?w=h:i?r=h:y=h;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var z=this instanceof u,A=z?r:e.isArray?[]:new u(r),B={},C=e.interceptor&&e.interceptor.response||t,D=e.interceptor&&e.interceptor.responseError||c;n(e,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(B[b]=p(a))}),i&&(B.data=r),v.setUrlParams(B,o({},s(r,e.params||{}),y),e.url);var E=a(B).then(function(a){var c=a.data,d=A.$promise;if(c){if(b.isArray(c)!==!!e.isArray)throw g("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",e.isArray?"array":"object",b.isArray(c)?"array":"object");e.isArray?(A.length=0,n(c,function(a){A.push("object"==typeof a?new u(a):a)})):(f(c,A),A.$promise=d)}return A.$resolved=!0,a.resource=A,a},function(a){return A.$resolved=!0,(x||m)(a),d.reject(a)});return E=E.then(function(a){var b=C(a);return(w||m)(b,a.headers),b},D),z?E:(A.$promise=E,A.$resolved=!1,A)},u.prototype["$"+h]=function(a,b,c){q(a)&&(c=b,b=a,a={});var d=u[h].call(this,a,this,b,c);return d.$promise||d}}),u.bind=function(a){return k(h,o({},i,a),r)},u}var l={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},m=b.noop,n=b.forEach,o=b.extend,p=b.copy,q=b.isFunction;return j.prototype={setUrlParams:function(a,c,d){var e,f,i=this,j=d||i.template,k=i.urlParams={};n(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(k[a]=!0)}),j=j.replace(/\\:/g,":"),c=c||{},n(i.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:i.defaults[d],b.isDefined(e)&&null!==e?(f=h(e),j=j.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return f+b})):j=j.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),j=j.replace(/\/+$/,"")||"/",j=j.replace(/\/\.(?=\w+($|\?))/,"."),a.url=j.replace(/\/\\\./,"/."),n(c,function(b,c){i.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},k}])}(window,window.angular),function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&d.cookies(a,c);for(a in g)e=g[a],b.isString(e)||(e=""+e,g[a]=e),e!==h[a]&&(d.cookies(a,e),i=!0);if(i){i=!1,f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?delete g[a]:g[a]=f[a],i=!0)}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular),function(a,b){"use strict";function c(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,i(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function d(a){var c=[],d=i(c,b.noop);return d.chars(a),c.join("")}function e(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),y[d])for(;t.last()&&z[t.last()];)e("",t.last());x[d]&&t.last()==d&&e("",d),h=u[d]||!!h,h||t.push(d);var i={};f.replace(m,function(a,b,c,d,e){var f=c||d||e||"";i[b]=g(f)}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=t.length-1;f>=0&&t[f]!=d;f--);if(f>=0){for(e=t.length-1;e>=f;e--)c.end&&c.end(t[e]);t.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,s,t=[],v=a;for(t.last=function(){return t[t.length-1]};a;){if(s="",h=!0,t.last()&&A[t.last()]?(a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+t.last()+"[^>]*>","i"),function(a,b){return b=b.replace(p,"$1").replace(r,"$1"),c.chars&&c.chars(g(b)),""}),e("",t.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):q.test(a)?(i=a.match(q),i&&(a=a.replace(i[0],""),h=!1)):o.test(a)?(i=a.match(l),i&&(a=a.substring(i[0].length),i[0].replace(l,e),h=!1)):n.test(a)&&(i=a.match(k),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(k,d)),h=!1):(s+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),s+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(s)))),a==v)throw j("badparse","The sanitizer was unable to parse the following block of html: {0}",a);v=a}e()}function g(a){if(!a)return"";var b=F.exec(a),c=b[1],d=b[3],e=b[2];return e&&(E.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in E?E.textContent:E.innerText),c+e+d}function h(a){return a.replace(/&/g,"&amp;").replace(s,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(t,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&A[a]&&(d=a),d||B[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),i="img"===a&&"src"===g||"background"===g;D[g]!==!0||C[g]===!0&&!c(d,i)||(e(" "),e(f),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||B[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var j=b.$$minErr("$sanitize"),k=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,l=/^<\/\s*([\w:-]+)[^>]*>/,m=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,n=/^</,o=/^<\//,p=/<!--(.*?)-->/g,q=/<!DOCTYPE([^>]*?)>/i,r=/<!\[CDATA\[(.*?)]]>/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/([^\#-~| |!])/g,u=e("area,br,col,hr,img,wbr"),v=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),w=e("rp,rt"),x=b.extend({},w,v),y=b.extend({},v,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),z=b.extend({},w,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),A=e("script,style"),B=b.extend({},u,y,z,x),C=e("background,cite,href,longdesc,src,usemap"),D=b.extend({},C,e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),E=document.createElement("pre"),F=/^(\s*)([\s\S]*?)(\s*)$/;b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&(n.push('target="'),n.push(g),n.push('" ')),n.push('href="'),n.push(a),n.push('">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]==j[3]&&(k="mailto:"+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){c.offsetWidth+1;b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==m)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j=b.noop,k=b.forEach,l=e.$$selectors,m=1,n="$$ngAnimateState",o="$$ngAnimateChildren",p="ng-animate",q={running:!0};d.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(a,c,d,m,r,s){function t(a){var b=a.data(n)||{};b.running=!0,a.data(n,b)}function u(a){if(a){var b=[],e={},f=a.substr(1).split(".");(d.transitions||d.animations)&&b.push(c.get(l[""]));for(var g=0;g<f.length;g++){var h=f[g],i=l[h];i&&!e[h]&&(b.push(c.get(i)),e[h]=!0)}return b}}function v(a,c,d){function e(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),v.push({event:b,fn:c}),r.push({event:b,fn:d}),!0):void 0}function f(b,c,e){function f(a){if(c){if((c[a]||j)(),++l<g.length)return;c=null}e()}var g=[];k(b,function(a){a.fn&&g.push(a)});var l=0;k(g,function(b,e){var g=function(){f(e)};switch(b.event){case"setClass":c.push(b.fn(a,h,i,g));break;case"addClass":c.push(b.fn(a,h||d,g));break;case"removeClass":c.push(b.fn(a,i||d,g));break;default:c.push(b.fn(a,g))}}),c&&0===c.length&&e()}var g=a[0];if(g){var h,i,l="setClass"==c,m=l||"addClass"==c||"removeClass"==c;b.isArray(d)&&(h=d[0],i=d[1],d=h+" "+i);var n=a.attr("class"),o=n+" "+d;if(C(o)){var p=j,q=[],r=[],s=j,t=[],v=[],w=(" "+o).replace(/\s+/g,".");return k(u(w),function(a){var b=e(a,c);!b&&l&&(e(a,"addClass"),e(a,"removeClass"))}),{node:g,event:c,className:d,isClassBased:m,isSetClassOperation:l,before:function(a){p=a,f(r,q,function(){p=j,a()})},after:function(a){s=a,f(v,t,function(){s=j,a()})},cancel:function(){q&&(k(q,function(a){(a||j)(!0)}),p(!0)),t&&(k(t,function(a){(a||j)(!0)}),s(!0))}}}}}function w(a,c,d,e,f,g,h){function i(b){var e="$animate:"+b;t&&t[e]&&t[e].length>0&&r(function(){d.triggerHandler(e,{event:a,className:c})})}function j(){i("before")}function l(){i("after")}function m(){i("close"),h&&r(function(){h()})}function o(){o.hasBeenRun||(o.hasBeenRun=!0,g())}function q(){if(!q.hasBeenRun){q.hasBeenRun=!0;var b=d.data(n);b&&(s&&s.isClassBased?y(d,c):(r(function(){var b=d.data(n)||{};H==b.index&&y(d,c,a)}),d.data(n,b))),m()}}var s=v(d,a,c);if(!s)return o(),j(),l(),void q();c=s.className;var t=b.element._data(s.node);t=t&&t.events,e||(e=f?f.parent():d.parent());var u,w=d.data(n)||{},x=w.active||{},B=w.totalActive||0,C=w.last;if(s.isClassBased&&(u=w.running||w.disabled||C&&!C.isClassBased),u||z(d,e))return o(),j(),l(),void q();var D=!1;if(B>0){var E=[];if(s.isClassBased){if("setClass"==C.event)E.push(C),y(d,c);else if(x[c]){var F=x[c];F.event==a?D=!0:(E.push(F),y(d,c))}}else if("leave"==a&&x["ng-leave"])D=!0;else{for(var G in x)E.push(x[G]),y(d,G);x={},B=0}E.length>0&&k(E,function(a){a.cancel()})}if(!s.isClassBased||s.isSetClassOperation||D||(D="addClass"==a==d.hasClass(c)),D)return o(),j(),l(),void m();"leave"==a&&d.one("$destroy",function(){var a=b.element(this),c=a.data(n);if(c){var d=c.active["ng-leave"];d&&(d.cancel(),y(a,"ng-leave"))}}),d.addClass(p);var H=A++;B++,x[c]=s,d.data(n,{last:s,active:x,index:H,totalActive:B}),j(),s.before(function(b){var e=d.data(n);b=b||!e||!e.active[c]||s.isClassBased&&e.active[c].event!=a,o(),b===!0?q():(l(),s.after(q))})}function x(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(p):c.querySelectorAll("."+p);k(d,function(a){a=b.element(a);var c=a.data(n);c&&c.active&&k(c.active,function(a){a.cancel()})})}}function y(a,b){if(i(a,m))q.disabled||(q.running=!1,q.structural=!1);else if(b){var c=a.data(n)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(a.removeClass(p),a.removeData(n))}}function z(a,c){if(q.disabled)return!0;if(i(a,m))return q.running;var d,e,f;do{if(0===c.length)break;var g=i(c,m),h=g?q:c.data(n)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(o);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}var A=0;m.data(n,q),s.$$postDigest(function(){s.$$postDigest(function(){q.running=!1})});var B=e.classNameFilter(),C=B?function(a){return B.test(a)}:function(){return!0};return{enter:function(c,d,e,f){c=b.element(c),d=g(d),e=g(e),t(c),a.enter(c,d,e),s.$$postDigest(function(){c=h(c),w("enter","ng-enter",c,d,e,j,f)})},leave:function(c,d){c=b.element(c),x(c),t(c),s.$$postDigest(function(){w("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d)})},move:function(c,d,e,f){c=b.element(c),d=g(d),e=g(e),x(c),t(c),a.move(c,d,e),s.$$postDigest(function(){c=h(c),w("move","ng-move",c,d,e,j,f)})},addClass:function(c,d,e){c=b.element(c),c=h(c),w("addClass",d,c,null,null,function(){a.addClass(c,d)},e)},removeClass:function(c,d,e){c=b.element(c),c=h(c),w("removeClass",d,c,null,null,function(){a.removeClass(c,d)},e)},setClass:function(c,d,e,f){c=b.element(c),c=h(c),w("setClass",[d,e],c,null,null,function(){a.setClass(c,d,e)},f)},enabled:function(a,b){switch(arguments.length){case 2:if(a)y(b);else{var c=b.data(n)||{};c.disabled=!0,b.data(n,c)}break;case 1:q.disabled=!a;break;default:a=!q.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(a,b){J&&J(),W.push(b),J=h(function(){k(W,function(a){a()}),W=[],J=null,U={}})}function l(a,c){var d=f(a);a=b.element(d),Z.push(a);var e=Date.now()+c;Y>=e||(g.cancel(X),Y=e,X=g(function(){n(Z),Z=[]},c,!1))}function n(a){k(a,function(a){var b=a.data(P);b&&(b.closeAnimationFn||j)()})}function o(a,b){var c=b?U[b]:null;if(!c){var e,f,g,h,i=0,j=0,l=0,n=0;k(a,function(a){if(a.nodeType==m){var b=d.getComputedStyle(a)||{};g=b[E+K],i=Math.max(p(g),i),h=b[E+L],e=b[E+M],j=Math.max(p(e),j),f=b[G+M],n=Math.max(p(f),n);var c=p(b[G+K]);c>0&&(c*=parseInt(b[G+N],10)||1),l=Math.max(c,l)}}),c={total:0,transitionPropertyStyle:h,transitionDurationStyle:g,transitionDelayStyle:e,transitionDelay:j,transitionDuration:i,animationDelayStyle:f,animationDelay:n,animationDuration:l},b&&(U[b]=c)
}return c}function p(a){var c=0,d=b.isString(a)?a.split(/\s*,\s*/):[];return k(d,function(a){c=Math.max(parseFloat(a)||0,c)}),c}function q(a){var b=a.parent(),c=b.data(O);return c||(b.data(O,++V),c=V),c+"-"+f(a).getAttribute("class")}function r(a,b,c,d){var e=q(b),f=e+" "+c,g=U[f]?++U[f].total:0,h={};if(g>0){var i=c+"-stagger",k=e+" "+i,l=!U[k];l&&b.addClass(i),h=o(b,k),l&&b.removeClass(i)}d=d||function(a){return a()},b.addClass(c);var m=b.data(P)||{},n=d(function(){return o(b,f)}),p=n.transitionDuration,r=n.animationDuration;if(0===p&&0===r)return b.removeClass(c),!1;b.data(P,{running:m.running||0,itemIndex:g,stagger:h,timings:n,closeAnimationFn:j});var s=m.running>0||"setClass"==a;return p>0&&t(b,c,s),r>0&&h.animationDelay>0&&0===h.animationDuration&&u(b),!0}function s(a){return"ng-enter"==a||"ng-move"==a||"ng-leave"==a}function t(a,b,c){s(b)||!c?f(a).style[E+L]="none":a.addClass(Q)}function u(a){f(a).style[G]="none 0s"}function v(a){var b=E+L,c=f(a);c.style[b]&&c.style[b].length>0&&(c.style[b]=""),a.removeClass(Q)}function w(a){var b=G,c=f(a);c.style[b]&&c.style[b].length>0&&(c.style[b]="")}function x(a,b,c,d){function e(){b.off(t,g),b.removeClass(j),C(b,c);var a=f(b);for(var d in v)a.style.removeProperty(v[d])}function g(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(R));Math.max(c-s,0)>=r&&e>=p&&d()}var h=f(b),i=b.data(P);if(-1==h.getAttribute("class").indexOf(c)||!i)return void d();var j="";k(c.split(" "),function(a,b){j+=(b>0?" ":"")+a+"-active"});var m=i.stagger,n=i.timings,o=i.itemIndex,p=Math.max(n.transitionDuration,n.animationDuration),q=Math.max(n.transitionDelay,n.animationDelay),r=q*T,s=Date.now(),t=H+" "+F,u="",v=[];if(n.transitionDuration>0){var w=n.transitionPropertyStyle;-1==w.indexOf("all")&&(u+=I+"transition-property: "+w+";",u+=I+"transition-duration: "+n.transitionDurationStyle+";",v.push(I+"transition-property"),v.push(I+"transition-duration"))}if(o>0){if(m.transitionDelay>0&&0===m.transitionDuration){var x=n.transitionDelayStyle;u+=I+"transition-delay: "+y(x,m.transitionDelay,o)+"; ",v.push(I+"transition-delay")}m.animationDelay>0&&0===m.animationDuration&&(u+=I+"animation-delay: "+y(n.animationDelayStyle,m.animationDelay,o)+"; ",v.push(I+"animation-delay"))}if(v.length>0){var z=h.getAttribute("style")||"";h.setAttribute("style",z+"; "+u)}b.on(t,g),b.addClass(j),i.closeAnimationFn=function(){e(),d()};var A=o*(Math.max(m.animationDelay,m.transitionDelay)||0),B=(q+p)*S,D=(A+B)*T;return i.running++,l(b,D),e}function y(a,b,c){var d="";return k(a.split(","),function(a,e){d+=(e>0?",":"")+(c*b+parseInt(a,10))+"s"}),d}function z(a,b,c,d){return r(a,b,c,d)?function(a){a&&C(b,c)}:void 0}function A(a,b,c,d){return b.data(P)?x(a,b,c,d):(C(b,c),void d())}function B(a,b,c,d){var e=z(a,b,c);if(!e)return void d();var f=e;return i(b,function(){v(b,c),w(b),f=A(a,b,c,d)}),function(a){(f||j)(a)}}function C(a,b){a.removeClass(b);var c=a.data(P);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(P))}function D(a,c){var d="";return a=b.isArray(a)?a:a.split(/\s+/),k(a,function(a,b){a&&a.length>0&&(d+=(b>0?" ":"")+a+c)}),d}var E,F,G,H,I="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(I="-webkit-",E="WebkitTransition",F="webkitTransitionEnd transitionend"):(E="transition",F="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(I="-webkit-",G="WebkitAnimation",H="webkitAnimationEnd animationend"):(G="animation",H="animationend");var J,K="Duration",L="Property",M="Delay",N="IterationCount",O="$$ngAnimateKey",P="$$ngAnimateCSS3Data",Q="ng-animate-block-transitions",R=3,S=1.5,T=1e3,U={},V=0,W=[],X=null,Y=0,Z=[];return{enter:function(a,b){return B("enter",a,"ng-enter",b)},leave:function(a,b){return B("leave",a,"ng-leave",b)},move:function(a,b){return B("move",a,"ng-move",b)},beforeSetClass:function(a,b,c,d){var e=D(c,"-remove")+" "+D(b,"-add"),f=z("setClass",a,e,function(d){var e=a.attr("class");a.removeClass(c),a.addClass(b);var f=d();return a.attr("class",e),f});return f?(i(a,function(){v(a,e),w(a),d()}),f):void d()},beforeAddClass:function(a,b,c){var d=z("addClass",a,D(b,"-add"),function(c){a.addClass(b);var d=c();return a.removeClass(b),d});return d?(i(a,function(){v(a,b),w(a),c()}),d):void c()},setClass:function(a,b,c,d){c=D(c,"-remove"),b=D(b,"-add");var e=c+" "+b;return A("setClass",a,e,d)},addClass:function(a,b,c){return A("addClass",a,D(b,"-add"),c)},beforeRemoveClass:function(a,b,c){var d=z("removeClass",a,D(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);var e=c();return a.attr("class",d),e});return d?(i(a,function(){v(a,b),w(a),c()}),d):void c()},removeClass:function(a,b,c){return A("removeClass",a,D(b,"-remove"),c)}}}])}])}(window,window.angular),function(a,b){"use strict";function c(a,b,c){d.directive(a,["$parse","$swipe",function(d,e){var f=75,g=.3,h=30;return function(i,j,k){function l(a){if(!m)return!1;var c=Math.abs(a.y-m.y),d=(a.x-m.x)*b;return n&&f>c&&d>0&&d>h&&g>c/d}var m,n,o=d(k[a]);e.bind(j,{start:function(a){m=a,n=!0},cancel:function(){n=!1},end:function(a,b){l(a)&&i.$apply(function(){j.triggerHandler(c),o(i,{$event:b})})}})}}])}var d=b.module("ngTouch",[]);d.factory("$swipe",[function(){function a(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}var b=10;return{bind:function(c,d){var e,f,g,h,i=!1;c.on("touchstart mousedown",function(b){g=a(b),i=!0,e=0,f=0,h=g,d.start&&d.start(g,b)}),c.on("touchcancel",function(a){i=!1,d.cancel&&d.cancel(a)}),c.on("touchmove mousemove",function(c){if(i&&g){var j=a(c);if(e+=Math.abs(j.x-h.x),f+=Math.abs(j.y-h.y),h=j,!(b>e&&b>f))return f>e?(i=!1,void(d.cancel&&d.cancel(c))):(c.preventDefault(),void(d.move&&d.move(j,c)))}}),c.on("touchend mouseup",function(b){i&&(i=!1,d.end&&d.end(a(b),b))})}}}]),d.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),d.directive("ngClick",["$parse","$timeout","$rootElement",function(a,c,d){function e(a,b,c,d){return Math.abs(a-c)<p&&Math.abs(b-d)<p}function f(a,b,c){for(var d=0;d<a.length;d+=2)if(e(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function g(a){if(!(Date.now()-j>o)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,d=b[0].clientY;1>c&&1>d||l&&l[0]===c&&l[1]===d||(l&&(l=null),"label"===a.target.tagName.toLowerCase()&&(l=[c,d]),f(k,c,d)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur()))}}function h(a){var b=a.touches&&a.touches.length?a.touches:[a],d=b[0].clientX,e=b[0].clientY;k.push(d,e),c(function(){for(var a=0;a<k.length;a+=2)if(k[a]==d&&k[a+1]==e)return void k.splice(a,a+2)},o,!1)}function i(a,b){k||(d[0].addEventListener("click",g,!0),d[0].addEventListener("touchstart",h,!0),k=[]),j=Date.now(),f(k,a,b)}var j,k,l,m=750,n=12,o=2500,p=25,q="ng-click-active";return function(c,d,e){function f(){o=!1,d.removeClass(q)}var g,h,j,k,l=a(e.ngClick),o=!1;d.on("touchstart",function(a){o=!0,g=a.target?a.target:a.srcElement,3==g.nodeType&&(g=g.parentNode),d.addClass(q),h=Date.now();var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].originalEvent||b[0];j=c.clientX,k=c.clientY}),d.on("touchmove",function(){f()}),d.on("touchcancel",function(){f()}),d.on("touchend",function(a){var c=Date.now()-h,l=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],p=l[0].originalEvent||l[0],q=p.clientX,r=p.clientY,s=Math.sqrt(Math.pow(q-j,2)+Math.pow(r-k,2));o&&m>c&&n>s&&(i(q,r),g&&g.blur(),b.isDefined(e.disabled)&&e.disabled!==!1||d.triggerHandler("click",[a])),f()}),d.onclick=function(){},d.on("click",function(a,b){c.$apply(function(){l(c,{$event:b||a})})}),d.on("mousedown",function(){d.addClass(q)}),d.on("mousemove mouseup",function(){d.removeClass(q)})}}]),c("ngSwipeLeft",-1,"swipeleft"),c("ngSwipeRight",1,"swiperight")}(window,window.angular),function(a,b){"use strict";function c(){function a(a,c){return b.extend(new(b.extend(function(){},{prototype:a})),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){if(d[a]=b.extend({reloadOnSearch:!0},e,a&&c(a,e)),a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[f]=b.extend({redirectTo:a},c(f,e))}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(c,e,f,g,h,i,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(){var a=n(),d=q.current;a&&d&&a.$$route===d.$$route&&b.equals(a.pathParams,d.pathParams)&&!a.reloadOnSearch&&!p?(d.params=a.params,b.copy(d.params,f),c.$broadcast("$routeUpdate",d)):(a||d)&&(p=!1,c.$broadcast("$routeChangeStart",a,d),q.current=a,a&&a.redirectTo&&(b.isString(a.redirectTo)?e.path(o(a.redirectTo,a.params)).search(a.params).replace():e.url(a.redirectTo(a.pathParams,e.path(),e.search())).replace()),g.when(a).then(function(){if(a){var c,d,e=b.extend({},a.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a)}),b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),d=k.getTrustedResourceUrl(d),b.isDefined(d)&&(a.loadedTemplateUrl=d,c=i.get(d,{cache:j}).then(function(a){return a.data}))),b.isDefined(c)&&(e.$template=c),g.all(e)}}).then(function(e){a==q.current&&(a&&(a.locals=e,b.copy(a.params,f)),c.$broadcast("$routeChangeSuccess",a,d))},function(b){a==q.current&&c.$broadcast("$routeChangeError",a,d,b)}))}function n(){var c,f;return b.forEach(d,function(d){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function o(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var p=!1,q={routes:d,reload:function(){p=!0,c.$evalAsync(m)}};return c.$on("$locationChangeSuccess",m),q}]}function d(){this.$get=function(){return{}}}function e(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(n.remove(),n=null),l&&(l.$destroy(),l=null),m&&(d.leave(m,function(){n=null}),n=m,m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f,function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function f(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}h(d)}}}var g=b.module("ngRoute",["ng"]).provider("$route",c);g.provider("$routeParams",d),g.directive("ngView",e),g.directive("ngView",f),e.$inject=["$route","$anchorScroll","$animate"],f.$inject=["$compile","$controller","$route"]}(window,window.angular);var ngFameApp=angular.module("famous.angular",[]);ngFameApp.provider("$famous",function(){var a={"famous/core/Context":famous.core.Context,"famous/core/ElementAllocator":famous.core.ElementAllocator,"famous/core/Engine":famous.core.Engine,"famous/core/Entity":famous.core.Entity,"famous/core/EventEmitter":famous.core.EventEmitter,"famous/core/EventHandler":famous.core.EventHandler,"famous/core/Group":famous.core.Group,"famous/core/Modifier":famous.core.Modifier,"famous/core/OptionsManager":famous.core.OptionsManager,"famous/core/RenderNode":famous.core.RenderNode,"famous/core/Scene":famous.core.Scene,"famous/core/SpecParser":famous.core.SpecParser,"famous/core/Surface":famous.core.Surface,"famous/core/Transform":famous.core.Transform,"famous/core/View":famous.core.View,"famous/core/ViewSequence":famous.core.ViewSequence,"famous/events/EventArbiter":famous.events.EventArbiter,"famous/events/EventFilter":famous.events.EventFilter,"famous/events/EventMapper":famous.events.EventMapper,"famous/inputs/FastClick":famous.inputs.FastClick,"famous/inputs/GenericSync":famous.inputs.GenericSync,"famous/inputs/MouseSync":famous.inputs.MouseSync,"famous/inputs/PinchSync":famous.inputs.PinchSync,"famous/inputs/RotateSync":famous.inputs.RotateSync,"famous/inputs/ScaleSync":famous.inputs.ScaleSync,"famous/inputs/ScrollSync":famous.inputs.ScrollSync,"famous/inputs/TouchSync":famous.inputs.TouchSync,"famous/inputs/TouchTracker":famous.inputs.TouchTracker,"famous/inputs/TwoFingerSync":famous.inputs.TwoFingerSync,"famous/math/Matrix":famous.math.Matrix,"famous/math/Quaternion":famous.math.Quaternion,"famous/math/Random":famous.math.Random,"famous/math/Utilities":famous.math.Utilities,"famous/math/Vector":famous.math.Vector,"famous/modifiers/Draggable":famous.modifiers.Draggable,"famous/modifiers/Fader":famous.modifiers.Fader,"famous/modifiers/ModifierChain":famous.modifiers.ModifierChain,"famous/modifiers/StateModifier":famous.modifiers.StateModifier,"famous/surfaces/CanvasSurface":famous.surfaces.CanvasSurface,"famous/surfaces/ContainerSurface":famous.surfaces.ContainerSurface,"famous/surfaces/FormContainerSurface":famous.surfaces.FormContainerSurface,"famous/surfaces/ImageSurface":famous.surfaces.ImageSurface,"famous/surfaces/InputSurface":famous.surfaces.InputSurface,"famous/surfaces/SubmitInputSurface":famous.surfaces.SubmitInputSurface,"famous/surfaces/TextareaSurface":famous.surfaces.TextareaSurface,"famous/surfaces/VideoSurface":famous.surfaces.VideoSurface,"famous/transitions/CachedMap":famous.transitions.CachedMap,"famous/transitions/Easing":famous.transitions.Easing,"famous/transitions/MultipleTransition":famous.transitions.MultipleTransition,"famous/transitions/SnapTransition":famous.transitions.SnapTransition,"famous/transitions/SpringTransition":famous.transitions.SpringTransition,"famous/transitions/Transitionable":famous.transitions.Transitionable,"famous/transitions/TransitionableTransform":famous.transitions.TransitionableTransform,"famous/transitions/TweenTransition":famous.transitions.TweenTransition,"famous/transitions/WallTransition":famous.transitions.WallTransition,"famous/utilities/KeyCodes":famous.utilities.KeyCodes,"famous/utilities/Timer":famous.utilities.Timer,"famous/utilities/Utility":famous.utilities.Utility,"famous/views/Deck":famous.views.Deck,"famous/views/EdgeSwapper":famous.views.EdgeSwapper,"famous/views/FlexibleLayout":famous.views.FlexibleLayout,"famous/views/Flipper":famous.views.Flipper,"famous/views/GridLayout":famous.views.GridLayout,"famous/views/HeaderFooterLayout":famous.views.HeaderFooterLayout,"famous/views/Lightbox":famous.views.Lightbox,"famous/views/RenderController":famous.views.RenderController,"famous/views/ScrollContainer":famous.views.ScrollContainer,"famous/views/Scroller":famous.views.Scroller,"famous/views/Scrollview":famous.views.Scrollview,"famous/views/SequentialLayout":famous.views.SequentialLayout,"famous/widgets/NavigationBar":famous.widgets.NavigationBar,"famous/widgets/Slider":famous.widgets.Slider,"famous/widgets/TabBar":famous.widgets.TabBar,"famous/widgets/ToggleButton":famous.widgets.ToggleButton,"famous/physics/PhysicsEngine":famous.physics.PhysicsEngine,"famous/physics/bodies/Body":famous.physics.bodies.Body,"famous/physics/bodies/Circle":famous.physics.bodies.Circle,"famous/physics/bodies/Particle":famous.physics.bodies.Particle,"famous/physics/bodies/Rectangle":famous.physics.bodies.Rectangle,"famous/physics/constraints/Collision":famous.physics.constraints.Collision,"famous/physics/constraints/Constraint":famous.physics.constraints.Constraint,"famous/physics/constraints/Curve":famous.physics.constraints.Curve,"famous/physics/constraints/Distance":famous.physics.constraints.Distance,"famous/physics/constraints/Snap":famous.physics.constraints.Snap,"famous/physics/constraints/Surface":famous.physics.constraints.Surface,"famous/physics/constraints/Wall":famous.physics.constraints.Wall,"famous/physics/constraints/Walls":famous.physics.constraints.Walls,"famous/physics/forces/Drag":famous.physics.forces.Drag,"famous/physics/forces/Force":famous.physics.forces.Force,"famous/physics/forces/Repulsion":famous.physics.forces.Repulsion,"famous/physics/forces/RotationalDrag":famous.physics.forces.RotationalDrag,"famous/physics/forces/RotationalSpring":famous.physics.forces.RotationalSpring,"famous/physics/forces/Spring":famous.physics.forces.Spring,"famous/physics/forces/VectorField":famous.physics.forces.VectorField,"famous/physics/integrators/SymplecticEuler":famous.physics.integrators.SymplecticEuler};this.registerModule=function(b,c){a[b]=c},a.getIsolate=function(a){return a&&"isolate"in a?a.isolate[a.$id]:{}},a.find=function(b){var c=angular.element(window.document.querySelectorAll(b)),d=function(a){var b=[];return angular.forEach(a,function(a,c){b[c]=angular.element(a).scope()}),b}(c),e=function(b){var c=[];return angular.forEach(b,function(b,d){c[d]=a.getIsolate(b)}),c}(d);return e};var b=/([\:\-\_]+(.))/g,c=/^moz([A-Z])/,d=/^(x[\:\-_]|data[\:\-_])/i,e=/^FA\-.*SURFACE/,f=/^FA\-.*/;window.$famousUtil=a.util={isASurface:function(a){return e.test(a[0].tagName)},isFaElement:function(a){if(f.test(a[0].tagName))return!0;var b=!1;return angular.forEach(a[0].attributes,function(a){b=b||f.test(a)}),b},camelCase:function(a){return a.replace(b,function(a,b,c,d){return d?c.toUpperCase():c}).replace(c,"Moz$1")},directiveNormalize:function(b){return a.util.camelCase(b.replace(d,""))}},this.$get=function(){return a}}),angular.module("famous.angular").config(["$provide",function(a){a.decorator("$animate",["$delegate","$rootScope","$famous","$parse","$famousDecorator",function(a,b,c,d,e){var f=c["famous/utilities/Timer"],g="$$faAnimationActive",h={},i=function(a){var b=c.getIsolate(a);return!b&&a&&(b=e.$$getIsolateById(h[a.$id])),b},j={enabled:a.enabled};return angular.forEach(["addClass","removeClass"],function(b){var d=angular.element.prototype[b];angular.element.prototype[b]=function(a){return d.apply(this,arguments),c.util.isASurface(this)&&"string"==typeof a&&""!==a.trim()&&i(this.scope()).renderNode[b](a),this},j[b]=function(d,e,f){if(a[b](d,e,f),c.util.isFaElement(d)){var g=i(d.scope());if(c.util.isASurface(d)){var h=g.renderNode;angular.forEach(e.split(" "),function(a){"ng-hide"===a?"addClass"===b?g.hide():"removeClass"===b&&g.show():h[b](a)})}else angular.forEach(e.split(" "),function(a){"ng-hide"===a&&("addClass"===b?g.hide():"removeClass"===b&&g.show())})}}}),j.setClass=function(b,d,e,f){if(a.setClass(b,d,e,f),c.util.isASurface(b)){var g=i(b.scope()).renderNode;angular.forEach(d.split(" "),function(a){g.addClass(a)}),angular.forEach(e.split(" "),function(a){g.removeClass(a)})}},angular.forEach(["enter","leave","move"],function(d){var e=d[0].toUpperCase()+d.slice(1);j[d]=function(j){var k=this,l=arguments,m="enter"===d,n=j.scope();n&&n.$parent&&(h[n.$id]=n.$parent.$id);var o=i(n);m===!0&&a[d].apply(this,arguments),j.data(g)===!0&&o&&o.$$animateHaltHandler&&o.$$animateHaltHandler(j.scope()),j.data(g,!0);var p=function(){n&&n.$id;if("leave"===d&&c.util.isFaElement(j)){var b=i(n);b&&b.id&&b.hide()}j.data(g)!==!1&&(j.data(g,!1),m===!1&&a[d].apply(k,l))};b.$$postDigest(function(){var a,b=j.scope(),c=i(b);if(c&&(a=c["$$animate"+e+"Handler"]),void 0===a)return void p();var d=a(b,{$done:p});"number"==typeof d&&f.setTimeout(p,d)})}}),j}])}]),angular.module("famous.angular").factory("$famousDecorator",["$famous",function(a){var b={child:{},parent:{},renderable:function(b){var c=a["famous/core/RenderNode"];b.renderGate=new c,b.emptyNode=new c,b.show=function(){b.renderGate&&b.renderGate.set(b.renderNode)},b.hide=function(){b.renderGate.set(b.emptyNode)}}},c={};return{addRole:function(a,c){b[a](c)},ensureIsolate:function(a,b){if(b){var d=["fa-edge-swapper","fa-render-controller","fa-deck","fa-light-box"],e=!1;angular.forEach(d,function(a){return a.toUpperCase()===b[0].tagName?void(e=!0):void 0!==b[0].attributes[a]?void(e=!0):void 0}),e&&(a=a.$parent)}a.isolate=a.isolate||{},a.isolate[a.$id]=a.isolate[a.$id]||{};var f=a.isolate[a.$id];f.id=a.$id;var g=a.$eval("$index");return g&&"$index"!==g&&!f.index&&(f.index=g),c[f.id]=f,f},$$getIsolateById:function(a){return c[a]},registerChild:function(a,b,c,d){a.$emit("registerChild",c),b.one("$destroy",function(){"removeMethod"in c&&c.removeMethod(c.id),c&&c.hide&&c.hide(),d&&d()})},sequenceWith:function(b,c,d,e){b.$on("registerChild",function(f,g){if(f.targetScope.$id!==b.$id){var h=a.getIsolate(b);g.$parent=h,h.$children=h.$children||[],h.$children.push(g),c(g),f.stopPropagation(),d&&(g.removeMethod=d),e&&(g.updateMethod=e)}})}}}]),angular.module("famous.angular").service("$famousPipe",function(){function a(a,b,c){a instanceof Array||(a=[a]),b instanceof Array||(b=[b]);for(var d=0;d<a.length;d++)for(var e=0;e<b.length;e++)void 0!==b[e]&&void 0!==a[d]&&b[e][c](a[d])}this.unpipesFromTargets=function(b,c){a(b,c,"unpipe")},this.pipesToTargets=function(b,c){a(b,c,"pipe")}}),angular.module("famous.angular").factory("$timeline",function(){var a=function(a,b){return"number"==typeof a?a+b:a.map(function(a,c){return a+b[c]})},b=function(a,b){return"number"==typeof a?a-b:a.map(function(a,c){return a-b[c]})},c=function(a,b){return"number"==typeof a?a*b:a.map(function(a){return a*b})},d=function(d,e,f,g,h){return function(i){var j=g,k=-e,l=1/(f-e),m=b(h,g);return a(c(m,d(l*(i+k))),j)}};return function(a){var b=function(a){return a};return function(c){if(c<a[0][0])return a[0][1];for(var e=0;e<a.length-1;e++)if(a[e][0]<=c&&c<a[e+1][0]){var f=d(a[e][2]||b,a[e][0],a[e+1][0],a[e][1],a[e+1][1]);return f(c)}return a[a.length-1][1]}}}),angular.module("famous.angular").directive("faAnimateEnter",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);f.$$animateEnterHandler=a(e.faAnimateEnter),e.$observe("faAnimateEnter",function(){f.$$animateEnterHandler=a(e.faAnimateEnter)})}}}}}]),angular.module("famous.angular").directive("faAnimateHalt",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);f.$$animateHaltHandler=a(e.faAnimateHalt),e.$observe("faAnimateHalt",function(){f.$$animateHaltHandler=a(e.faAnimateHalt)})}}}}}]),angular.module("famous.angular").directive("faAnimateLeave",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);f.$$animateLeaveHandler=a(e.faAnimateLeave),e.$observe("faAnimateLeave",function(){f.$$animateLeaveHandler=a(e.faAnimateLeave)})}}}}}]),angular.module("famous.angular").directive("faAnimateMove",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);f.$$animateMoveHandler=a(e.faAnimateMove),e.$observe("faAnimateMove",function(){f.$$animateMoveHandler=a(e.faAnimateMove)})}}}}}]),angular.module("famous.angular").directive("faAnimation",["$famous","$famousDecorator",function(a,b){return{restrict:"EA",scope:!0,compile:function(){var c=a["famous/core/Transform"],d=a["famous/transitions/Transitionable"],e=a["famous/transitions/Easing"];return{pre:function(a){b.ensureIsolate(a)},post:function(a,f,g){var h=b.ensureIsolate(a);setTimeout(function(){h.timeline=a.$eval(g.timeline),h._trans=new d(0),h.play=function(b){var c={duration:a.$eval(g.duration),curve:a.$eval(g.curve)||"linear"};h._trans.set(1,c,function(){b&&b(),g.loop&&setTimeout(function(){h.replay(b)},0)})},h.reset=function(){h._trans.set(0)},h.replay=function(a){h.reset(),h.play(a)};var b=null;g.event&&(b&&b(),b=a.$on(g.event,function(a,b){var c=b&&b.callback?b.callback:void 0;h.replay(c)}));g.id;if(void 0===h.timeline&&(h.timeline=h._trans.get.bind(h._trans),g.autoplay&&h.play()),!h.timeline instanceof Function)throw new Error("timeline must be a reference to a function or duration must be provided");for(var i=f[0].querySelectorAll("animate"),j={},k=0;k<i.length;k++)!function(){var b=i[k];if(b.attributes.targetmodselector){var d=angular.element(f[0].parentNode)[0].querySelectorAll(b.attributes.targetmodselector.value);angular.forEach(d,function(d){var f=angular.element(d).scope(),g=f.isolate[f.$id].modifier,i=f.isolate[f.$id].getTransform,k=b.attributes.curve&&"linear"!==b.attributes.curve.value?e[b.attributes.curve.value]:function(a){return a};if(b.attributes.field){var l=b.attributes.field.value,m=b.attributes.timelinelowerbound?parseFloat(b.attributes.timelinelowerbound.value):0,n=b.attributes.timelineupperbound?parseFloat(b.attributes.timelineupperbound.value):1;if(!b.attributes.startvalue)throw new Error("you must provide a start value for the animation");var o=a.$eval(b.attributes.startvalue.value);if(!b.attributes.endvalue)throw new Error("you must provide an end value for the animation");var p=a.$eval(b.attributes.endValue.value),q=j[f.$id]=j[f.$id]||{},r=q[l]=q[l]||[];r.push({field:l,lowerBound:m,upperBound:n,startValue:o,endValue:p,curve:k}),r.sort(function(a,b){return a.lowerBound-b.lowerBound});for(var s=1;s<r.length;s++)for(var t=r[s].lowerBound,u=0;s>u;u++)if(t<r[u].upperBound)throw new Error("Animate segments have overlappingdomains for the same field ("+l+").At any point in the timeline, only one <animate>can affect a given field on the same modifier.");var v=function(){for(var a=h.timeline()||0,b=0,c=r[b],d=0;d<r.length;d++){if(a>=r[d].lowerBound&&a<=r[d].upperBound){c=r[d];break}if(d===r.length-1){c=r[d];break}if(a>=r[d].upperBound&&a<r[d+1].lowerBound){c=r[d];break}}if(a<=c.lowerBound)return c.startValue;if(a>=c.upperBound)return c.endValue;var e=c.upperBound-c.lowerBound,f=(a-c.lowerBound)/e;if(Array.isArray(c.startValue)){for(var g=[],i=0;i<c.startValue.length;i++)g.push(c.startValue[i]+c.curve(f)*(c.endValue[i]-c.startValue[i]));return g}return c.startValue+c.curve(f)*(c.endValue-c.startValue)},w=q.transformComponents=q.transformComponents||[];"opacity"===l?g.opacityFrom(function(){return v()}):"origin"===l?g.originFrom(function(){return v()}):"size"===l?g.sizeFrom(function(){return v()}):(w.push({field:l,fn:v}),g.transformFrom(function(){for(var a={},b=i&&i()?[i()]:[],d=0;d<w.length;d++)!function(){var e=w[d].field;if(!a[e]){var f=w[d].fn();b.push(Array.isArray(f)?c[e].apply(this,f):c[e](f)),a[e]=!0}}();return 1===b.length?b[0]:c.multiply.apply(this,b)}))}})}}()},1)}}}}}]),angular.module("famous.angular").directive("faApp",["$famous","$famousDecorator",function(a,b){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,scope:!0,restrict:"EA",compile:function(c,d,e){return{pre:function(c,d,e){function f(){h.apply(this,arguments)}{var g=b.ensureIsolate(c),h=a["famous/core/View"],i=a["famous/core/Engine"];a["famous/core/Transform"]}d.append('<div class="famous-angular-clipping-container"><div class="famous-angular-container"></div></div>'),g.context=i.createContext(d[0].querySelector(".famous-angular-container")),window.context=g.context;var j=function(){var a=parseInt(e.faPerspective);a&&g.context.setPerspective(a)};e.$observe("faPerspective",j),j(),f.prototype=Object.create(h.prototype),f.prototype.constructor=f;g.view=new f,g.context.add(g.view),c.$on("$destroy",function(){g.context.update=angular.noop}),c.$on("registerChild",function(a,b){g.view.add(b.renderNode),a.stopPropagation()})},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){angular.element(c[0].querySelectorAll("div div")[0]).append(a)}),d.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faCanvasSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(a,b){return{scope:!0,transclude:!0,template:'<canvas class="fa-canvas-surface"></canvas>',restrict:"EA",compile:function(c,d,e){return{pre:function(c,d,e){{var f=b.ensureIsolate(c),g=a["famous/surfaces/CanvasSurface"];a["famous/core/Transform"],a["famous/core/EventHandler"]}f.renderNode=new g({size:c.$eval(e.faSize)}),b.addRole("renderable",f),f.show(),e.class&&f.renderNode.setClasses(e["class"].split(" ")),b.sequenceWith(c,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(a,c){var d=b.ensureIsolate(a),f=function(){d.renderNode.setContent(c[0].querySelector("canvas.fa-canvas-surface"))};f(),e(a,function(a){angular.element(c[0].querySelectorAll("canvas.fa-canvas-surface")).append(a)}),b.registerChild(a,c,d,function(){})}}}}}]),angular.module("famous.angular").directive("faClick",["$parse","$famousDecorator",function(a,b){return{restrict:"A",compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);if(e.faClick){var g=f.renderNode._eventInput||f.renderNode;g.on("click",function(b){var d=a(e.faClick);d(c,{$event:b}),c.$$phase||c.$apply()})}}}}}}]),angular.module("famous.angular").directive("faContainerSurface",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(c,d,e){return{pre:function(c,d,e){var f=b.ensureIsolate(c),g=a["famous/surfaces/ContainerSurface"],h=c.$eval(e.faOptions)||{};f.renderNode=new g(h),b.addRole("renderable",f),f.show(),b.sequenceWith(c,function(a){f.renderNode.add(a.renderGate)})},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),b.registerChild(a,c,d)}}}}}]),angular.module("famous.angular").directive("faDraggable",["$famous","$famousDecorator","$parse","$rootScope",function(a,b,c,d){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(c,e,f){return{post:function(c,e,g){var h=b.ensureIsolate(c),i=a["famous/core/RenderNode"],j=a["famous/modifiers/Draggable"],k=c.$eval(g.faOptions)||{};c.$watch(function(){return c.$eval(g.faOptions)},function(a){a=a||{},h.modifier.setOptions(a)},!0),h.modifier=new j(k),h.renderNode=(new i).add(h.modifier),b.addRole("renderable",h),h.show(),b.sequenceWith(c,function(a){h.renderNode.add(a.renderGate)}),f(c,function(a){e.find("div").append(a)}),b.registerChild(c,e,h,function(){h.modifier.deactivate()}),c.$$phase||d.$$phase||c.$apply()}}}}}]),angular.module("famous.angular").directive("faEdgeSwapper",["$famous","$famousDecorator",function(a,b){return{scope:!0,restrict:"A",priority:512,compile:function(){var c=a["famous/views/EdgeSwapper"];return{pre:function(a,d,e){var f,g=b.ensureIsolate(a);g.$$animateEnterHandler=function(a,b){g.renderNode.show(f,function(){g.$$leaveDoneCallback&&g.$$leaveDoneCallback(),b.$done()})},g.$$animateLeaveHandler=function(a,b){g.$$leaveDoneCallback=b.$done};var h=a.$eval(e.faOptions);g.renderNode=new c(h),b.addRole("renderable",g),g.show(),b.sequenceWith(a,function(a){f=a.renderGate})},post:function(a,c){var d=b.ensureIsolate(a);b.registerChild(a,c,d)}}}}}]),angular.module("famous.angular").directive("faFlexibleLayout",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(c,d,e){return{pre:function(c,d,e){var f=b.ensureIsolate(c),g=a["famous/views/FlexibleLayout"],h=(a["famous/core/ViewSequence"],a["famous/core/RenderNode"],[]),i=c.$eval(e.faOptions)||{};
f.renderNode=new g(i),b.addRole("renderable",f),f.show();var j=function(){h.sort(function(a,b){return a.index-b.index}),f.renderNode.sequenceFrom(function(a){var b=[];return angular.forEach(a,function(a,c){b[c]=a.renderGate}),b}(h))};b.sequenceWith(c,function(a){h.push(a),j()},function(a){h=function(b){var c=[];return angular.forEach(b,function(b){b.id!==a&&c.push(b)}),c}(h),j()})},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),a.$emit("registerChild",d)}}}}}]),angular.module("famous.angular").directive("faFlipper",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(c,d,e){return{pre:function(c,d,e){var f=b.ensureIsolate(c),g=a["famous/views/Flipper"],h=c.$eval(e.faOptions)||{};f.renderNode=new g(h),b.addRole("renderable",f),f.show(),f.children=[],f.flip=function(a){f.renderNode.flip(a||c.$eval(e.faOptions))},b.sequenceWith(c,function(a){var b=f.children.length;if(0===b)f.renderNode.setFront(a.renderGate);else{if(1!==b)throw new Error("fa-flipper accepts only two child elements; more than two have been provided");f.renderNode.setBack(a.renderGate)}f.children.push(a.renderGate)},function(){f.children.splice(f.children.length-1,1)})},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),b.registerChild(a,c,d)}}}}}]),angular.module("famous.angular").directive("faGridLayout",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(c,d,e){return{pre:function(c,d,e){var f=b.ensureIsolate(c),g=a["famous/views/GridLayout"],h=(a["famous/core/ViewSequence"],[]),i=c.$eval(e.faOptions)||{};f.renderNode=new g(i),b.addRole("renderable",f),f.show();var j=function(){c.$$postDigest(function(){h.sort(function(a,b){return a.index-b.index}),f.renderNode.sequenceFrom(function(a){var b=[];return angular.forEach(a,function(a,c){b[c]=a.renderGate}),b}(h))})};b.sequenceWith(c,function(a){h.push(a),j()},function(a){h=function(b){var c=[];return angular.forEach(b,function(b){b.id!==a&&c.push(b)}),c}(h),j()},j)},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),b.registerChild(a,c,d)}}}}}]),angular.module("famous.angular").directive("faHeaderFooterLayout",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(c,d,e){var f=a["famous/views/HeaderFooterLayout"],g=a["famous/core/RenderNode"];return{pre:function(a,c,d){var e=b.ensureIsolate(a),h=(new g,new g,new g,a.$eval(d.faOptions)||{});e.renderNode=new f(h),b.addRole("renderable",e),e.show();var i=0;b.sequenceWith(a,function(a){if(i++,1===i)e.renderNode.header.add(a.renderGate);else if(2===i)e.renderNode.content.add(a.renderGate);else{if(3!==i)throw new Error("fa-header-footer-layout can accept no more than 3 children");e.renderNode.footer.add(a.renderGate)}},function(){1===i?e.renderNode.header.set({}):2===i?e.renderNode.content.set({}):3===i&&e.renderNode.footer.set({}),i--})},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),b.registerChild(a,c,d)}}}}}]),angular.module("famous.angular").directive("faImageSurface",["$famous","$famousDecorator",function(a,b){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(c,d,e){{var f=b.ensureIsolate(c),g=a["famous/surfaces/ImageSurface"];a["famous/core/Transform"],a["famous/core/EventHandler"]}c.$watch(function(){return f.getProperties()},function(){f.renderNode&&f.renderNode.setProperties(f.getProperties())},!0);var h=function(a){return"fa"+a.charAt(0).toUpperCase()+a.slice(1)};f.getProperties=function(){for(var a=c.$eval(e.faProperties)||{},b=["backgroundColor","color"],d=0;d<b.length;d++){var f=b[d],g=h(f);e[g]&&(a[f]=c.$eval(e[g]))}return a},f.renderNode=new g({size:c.$eval(e.faSize),"class":c.$eval(e.class),properties:f.getProperties()}),b.addRole("renderable",f),f.show(),e.class&&f.renderNode.setClasses(e["class"].split(" "))},post:function(a,c,d){var e=b.ensureIsolate(a),f=function(){e.renderNode.setContent(d.faImageUrl)};f(),d.$observe("faImageUrl",f),b.registerChild(a,c,e)}}}}}]),angular.module("famous.angular").directive("faIndex",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(a,c,d){var e=b.ensureIsolate(a,c);e.index=a.$eval(d.faIndex),a.$watch(function(){return a.$eval(d.faIndex)},function(){e.index=a.$eval(d.faIndex),e.updateMethod&&e.updateMethod()})}}}}}]),angular.module("famous.angular").config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate","$famousDecorator","$parse","$rootElement","$famous","$timeout",function(a,b,c,d,e,f){function g(a,b,c,d){return Math.abs(a-c)<s&&Math.abs(b-d)<s}function h(a,b,c){for(var d=0;d<a.length;d+=2)if(g(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function i(a){if(!(Date.now()-l>r)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,d=b[0].clientY;h(m,c,d)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur())}}function j(a){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,d=b[0].clientY;m.push(c,d),f(function(){for(var a=0;a<m.length;a+=2)if(m[a]===c&&m[a+1]===d)return void m.splice(a,a+2)},r,!1)}function k(a,b){m||(d[0].addEventListener("click",i,!0),d[0].addEventListener("touchstart",j,!0),m=[]),l=Date.now(),h(m,a,b)}{var l,m,n=a[0],o=n.compile,p=750,q=12,r=2500,s=25,t="ng-click-active";e["famous/core/Engine"]}return n.compile=function(a,b,d){return e.util.isFaElement(a)?e.util.isASurface(a)?{post:function(a,b,d){function f(){m=!1,o.removeClass(t)}var g,h,i,j,l=c(d.ngClick),m=!1,n=e.getIsolate(a),o=n.renderNode;o.on("touchstart",function(a){m=!0,g=a.target?a.target:a.srcElement,3===g.nodeType&&(g=g.parentNode),o.addClass(t),h=Date.now();var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].originalEvent||b[0];i=c.clientX,j=c.clientY}),o.on("touchmove",function(){f()}),o.on("touchcancel",function(){f()}),o.on("touchend",function(a){var b=Date.now()-h,c=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],e=c[0].originalEvent||c[0],g=e.clientX,l=e.clientY,n=Math.sqrt(Math.pow(g-i,2)+Math.pow(l-j,2));m&&p>b&&q>n&&(k(g,l),angular.isDefined(d.disabled)&&"false"!==d.disabled||o.emit("click",[a])),f()}),o.on("click",function(b,c){a.$apply(function(){l(a,{$event:c||b})})}),o.on("mousedown",function(){o.addClass(t)}),o.on("mousemove mouseup",function(){o.removeClass(t)})}}:void 0:o(a,b,d)},a}]),angular.forEach("dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(b){var c=window.$famousUtil.directiveNormalize("ng-"+b);a.decorator(c+"Directive",["$delegate","$famousDecorator","$parse","$famous",function(a,d,e,f){var g=a[0],h=g.compile;return g.compile=function(a,g,i){return f.util.isFaElement(a)?{post:function(a,f,g){var h=d.ensureIsolate(a);if(g[c]){var i=h.renderNode._eventInput||h.renderNode;i.on(b,function(b){var d=e(g[c]);d(a,{$event:b}),a.$$phase||a.$apply()})}}}:h(a,g,i)},a}])})}]),angular.module("famous.angular").directive("faModifier",["$famous","$famousDecorator","$parse","$rootScope",function(a,b,c,d){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(e,f,g){return{post:function(e,f,h){var i=b.ensureIsolate(e),j=a["famous/core/RenderNode"],k=a["famous/core/Modifier"],l=a["famous/core/Transform"],m=a["famous/physics/bodies/Particle"],n=function(a){return a.getPosition()},o=["aboutOrigin","perspective","rotate","rotateAxis","rotateX","rotateY","rotateZ","scale","skew","translate"];h.$observe("faTransformOrder",function(){var a=e.$eval(h.faTransformOrder);void 0!==a&&(o=a)});var p={};angular.forEach(o,function(b){var d=a.util.directiveNormalize("fa-"+b);h.$observe(d,function(){p[b]=c(h[d])})});var q=angular.noop;h.$observe("faTransform",function(){q=c(h.faTransform)}),i.getTransform=function(){var a=q(e);if(void 0!==a)return a instanceof Function?a():a instanceof Object&&void 0!==a.get?a.get():a;var b=[];return angular.forEach(o,function(a){var c=p[a]?p[a](e):void 0;void 0!==c&&(c instanceof Function&&(c=c()),b.push(c instanceof Array?l[a].apply(this,c):c instanceof m?l[a].apply(this,n(c)):l[a].call(this,c)))}),b.length?1===b.length?b[0]:l.multiply.apply(this,b):void 0};var r=angular.noop;h.$observe("faAlign",function(){r=c(h.faAlign)}),i.getAlign=function(){var a=r(e);return a instanceof Function?a():a instanceof Object&&void 0!==a.get?a.get():a instanceof m?n(a):a};var s=angular.noop;h.$observe("faOpacity",function(){s=c(h.faOpacity)}),i.getOpacity=function(){var a=s(e);return void 0===a?1:a instanceof Function?a():a instanceof Object&&void 0!==a.get?a.get():a instanceof m?n(a):a};var t=angular.noop;h.$observe("faSize",function(){t=c(h.faSize)}),i.getSize=function(){var a=t(e);return a instanceof Function?a():a instanceof Object&&void 0!==a.get?a.get():a instanceof m?n(a):a};var u=angular.noop;h.$observe("faOrigin",function(){u=c(h.faOrigin)}),i.getOrigin=function(){var a=u(e);return a instanceof Function?a():a instanceof Object&&void 0!==a.get?a.get():a instanceof m?n(a):a},i.modifier=new k({transform:i.getTransform,size:i.getSize,opacity:i.getOpacity,origin:i.getOrigin,align:i.getAlign}),i.renderNode=(new j).add(i.modifier),b.addRole("renderable",i),i.show(),b.sequenceWith(e,function(a){i.renderNode.add(a.renderGate)}),g(e,function(a){f.find("div").append(a)}),b.registerChild(e,f,i,function(){i.modifier.setOpacity(0)}),e.$$phase||d.$$phase||e.$apply()}}}}}]),angular.module("famous.angular").directive("faMouseover",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);if(e.faMouseover){var g=f.renderNode._eventInput||f.renderNode;g.on("mouseover",function(b){var d=a(e.faMouseover);d(c,{$event:b}),c.$$phase||c.$apply()})}}}}}}]),angular.module("famous.angular").directive("faOptions",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,priority:-16,compile:function(){return{post:function(a,c,d){var e=b.ensureIsolate(a,c);a.$watch(function(){return a.$eval(d.faOptions)},function(){e.renderNode.setOptions(a.$eval(d.faOptions))},!0)}}}}}]),angular.module("famous.angular").directive("faPipeFrom",["$famous","$famousDecorator","$famousPipe",function(a,b,c){return{restrict:"A",scope:!1,priority:16,compile:function(){var d=a["famous/core/Engine"];return{post:function(a,e,f){var g=b.ensureIsolate(a);a.$watch(function(){return a.$eval(f.faPipeFrom)},function(a,b){var e;e=g.renderNode&&g.renderNode._isModifier?g.renderNode._object:g.renderNode?g.renderNode._eventInput||g.renderNode:d,c.unpipesFromTargets(e,b),c.pipesToTargets(e,a)}),a.$on("$destroy",function(){c.unpipesFromTargets(g.renderNode||d,a.$eval(f.faPipeFrom))})}}}}}]),angular.module("famous.angular").directive("faPipeTo",["$famous","$famousDecorator","$famousPipe",function(a,b,c){return{restrict:"A",scope:!1,priority:16,compile:function(){var d=a["famous/core/Engine"];return{post:function(a,e,f){var g=b.ensureIsolate(a);a.$watch(function(){return a.$eval(f.faPipeTo)},function(a,b){var e;e=g.renderNode&&g.renderNode._isModifier?g.renderNode._object:g.renderNode?g.renderNode._eventOutput||g.renderNode:d,c.unpipesFromTargets(b,e),c.pipesToTargets(a,e)}),a.$on("$destroy",function(){c.unpipesFromTargets(a.$eval(f.faPipeTo),g.renderNode||d)})}}}}}]),angular.module("famous.angular").directive("faRenderNode",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(c,d,e){return{pre:function(c,d,e){{var f=b.ensureIsolate(c),g=a["famous/core/Engine"];a["famous/core/RenderNode"]}f.children=[],e.$observe("faPipeTo",function(a){var b=c.$eval(a);b&&g.pipe(b)}),f.renderNode=c.$eval(e.faNode),b.addRole("renderable",f),f.show(),b.sequenceWith(c,function(a){f.renderNode.add(a.renderGate),f.children.push(a)})},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),b.registerChild(a,c,d)}}}}}]),angular.module("famous.angular").directive("faScrollView",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(c,d,e){return{pre:function(c,d,e){var f=b.ensureIsolate(c),g=a["famous/views/Scrollview"],h=a["famous/core/ViewSequence"],i=(a["famous/core/Surface"],[]),j=c.$eval(e.faOptions)||{};f.renderNode=new g(j),b.addRole("renderable",f),f.show();var k=function(a){c.$$postDigest(function(){i.sort(function(a,b){return a.index-b.index});var b={array:function(a){var b=[];return angular.forEach(a,function(a,c){b[c]=a.renderGate}),b}(i)};a&&(b.index=c.$eval(e.faStartIndex));var d=new h(b);f.renderNode.sequenceFrom(d)})};b.sequenceWith(c,function(a){i.push(a),k(!0)},function(a){i=function(b){var c=[];return angular.forEach(b,function(b){b.id!==a&&c.push(b)}),c}(i),k()},k)},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),b.registerChild(a,c,d)}}}}}]),angular.module("famous.angular").directive("faSequentialLayout",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(c,d,e){return window.$f=a,{pre:function(c,d,e){var f=b.ensureIsolate(c),g=a["famous/views/SequentialLayout"],h=[],i=c.$eval(e.faOptions)||{};f.renderNode=new g(i),b.addRole("renderable",f),f.show();var j=function(){h.sort(function(a,b){return a.index-b.index}),f.renderNode.sequenceFrom(function(a){var b=[];return angular.forEach(a,function(a,c){b[c]=a.renderGate}),b}(h))};b.sequenceWith(c,function(a){h.push(a),j()},function(a){h=function(b){var c=[];return angular.forEach(b,function(b){b.id!==a&&c.push(b)}),c}(h),j()})},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),b.registerChild(a,c,d)}}}}}]),angular.module("famous.angular").directive("faSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(a,b){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(c,d,e){return{pre:function(c,d,e){{var f=b.ensureIsolate(c),g=a["famous/core/Surface"];a["famous/core/Transform"],a["famous/core/EventHandler"]}c.$watch(function(){return f.getProperties()},function(){f.renderNode&&f.renderNode.setProperties(f.getProperties())},!0);var h=function(a){return"fa"+a.charAt(0).toUpperCase()+a.slice(1)};f.getProperties=function(){for(var a=c.$eval(e.faProperties)||{},b=["backgroundColor","margin","padding","color","pointerEvents","zIndex"],d=0;d<b.length;d++){var f=b[d],g=h(f);e[g]&&(a[f]=c.$eval(e[g]))}return a};var i=[];e.$observe("faSize",function(){f.renderNode.setSize(c.$eval(e.faSize)),i.push(new Date),i.length>5&&(i[4]-i[0]<=1e3&&console.warn("Using fa-size on fa-surface to animate is significantly non-performant, prefer to use fa-size on an fa-modifier surrounding a fa-surface"),i.shift())}),f.renderNode=new g({size:c.$eval(e.faSize),properties:f.getProperties()}),b.addRole("renderable",f),f.show(),e.class&&f.renderNode.setClasses(e["class"].split(" ")),b.sequenceWith(c,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(a,c){var d=b.ensureIsolate(a),f=function(){d.renderNode.setContent(c[0].querySelector("div.fa-surface"))};f(),e(a,function(a){angular.element(c[0].querySelectorAll("div.fa-surface")).append(a)}),b.registerChild(a,c,d,function(){})}}}}}]),angular.module("famous.angular").directive("faTap",["$parse","$famousDecorator",function(a,b){return{restrict:"A",compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);if(e.faTap){var g=f.renderNode._eventInput||f.renderNode,h=!1;g.on("touchmove",function(a){return h=!0,a}),g.on("tap",function(b){if(!h){var d=a(e.faTap);d(c,{$event:b}),c.$$phase||c.$apply()}h=!1})}}}}}}]),angular.module("famous.angular").directive("faTouchend",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);if(e.faTouchend){var g=f.renderNode._eventInput||f.renderNode;g.on("touchend",function(b){var d=a(e.faTouchend);d(c,{$event:b}),c.$$phase||c.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchmove",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);if(e.faTouchmove){var g=f.renderNode._eventInput||f.renderNode;g.on("touchmove",function(b){var d=a(e.faTouchmove);d(c,{$event:b}),c.$$phase||c.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchstart",["$parse","$famousDecorator",function(a,b){return{restrict:"A",scope:!1,compile:function(){return{post:function(c,d,e){var f=b.ensureIsolate(c);if(e.faTouchstart){var g=f.renderNode._eventInput||f.renderNode;g.on("touchstart",function(b){var d=a(e.faTouchstart);d(c,{$event:b}),c.$$phase||c.$apply()})}}}}}}]),angular.module("famous.angular").directive("faVideoSurface",["$famous","$famousDecorator",function(a,b){return{scope:!0,transclude:!0,template:'<div class="fa-video-surface"></div>',restrict:"EA",compile:function(){return{pre:function(c,d,e){var f=b.ensureIsolate(c),g=a["famous/surfaces/VideoSurface"];c.$watch(function(){return c.$eval(e.faOptions)},function(a,b){f.renderNode.setOptions(b)},!0),f.renderNode=new g({"class":c.$eval(e.class)}),b.addRole("renderable",f),f.show(),e.class&&f.renderNode.setClasses(e["class"].split(" ")),b.sequenceWith(c,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(a,c,d){var e=b.ensureIsolate(a),f=function(){e.renderNode.setContent(d.faVideoUrl)};f(),d.$observe("faVideoUrl",f),b.registerChild(a,c,e)}}}}}]),angular.module("famous.angular").directive("faView",["$famous","$famousDecorator",function(a,b){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(c,d,e){var f=a["famous/core/View"];return{pre:function(a,c,d){var e=b.ensureIsolate(a);e.children=[],e.renderNode=new f({size:a.$eval(d.faSize)||[void 0,void 0]}),b.addRole("renderable",e),e.show(),b.sequenceWith(a,function(a){e.renderNode.add(a.renderGate),e.children.push(a)})},post:function(a,c){var d=b.ensureIsolate(a);e(a,function(a){c.find("div").append(a)}),b.registerChild(a,c,d)}}}}}]),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.famous=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a){return[a.clientWidth,a.clientHeight]}function d(a){this.container=a,this._allocator=new g(a),this._node=new e,this._eventOutput=new f,this._size=c(this.container),this._perspectiveState=new i(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:h.identity,opacity:1,origin:j,align:j,size:this._size},this._eventOutput.on("resize",function(){this.setSize(c(this.container))}.bind(this))}var e=a("./RenderNode"),f=a("./EventHandler"),g=a("./ElementAllocator"),h=a("./Transform"),i=a("../transitions/Transitionable"),j=[0,0],k=!("perspective"in document.documentElement.style),l=k?function(a,b){a.style.webkitPerspective=b?b.toFixed()+"px":""}:function(a,b){a.style.perspective=b?b.toFixed()+"px":""};d.prototype.getAllocator=function(){return this._allocator},d.prototype.add=function(a){return this._node.add(a)},d.prototype.migrate=function(a){a!==this.container&&(this.container=a,this._allocator.migrate(a))},d.prototype.getSize=function(){return this._size},d.prototype.setSize=function(a){a||(a=c(this.container)),this._size[0]=a[0],this._size[1]=a[1]},d.prototype.update=function(a){a&&(a.transform&&(this._nodeContext.transform=a.transform),a.opacity&&(this._nodeContext.opacity=a.opacity),a.origin&&(this._nodeContext.origin=a.origin),a.align&&(this._nodeContext.align=a.align),a.size&&(this._nodeContext.size=a.size));var b=this._perspectiveState.get();b!==this._perspective&&(l(this.container,b),this._perspective=b),this._node.commit(this._nodeContext)},d.prototype.getPerspective=function(){return this._perspectiveState.get()},d.prototype.setPerspective=function(a,b,c){return this._perspectiveState.set(a,b,c)},d.prototype.emit=function(a,b){return this._eventOutput.emit(a,b)},d.prototype.on=function(a,b){return this._eventOutput.on(a,b)},d.prototype.removeListener=function(a,b){return this._eventOutput.removeListener(a,b)},d.prototype.pipe=function(a){return this._eventOutput.pipe(a)},d.prototype.unpipe=function(a){return this._eventOutput.unpipe(a)},b.exports=d},{"../transitions/Transitionable":88,"./ElementAllocator":2,"./EventHandler":7,"./RenderNode":11,"./Transform":15}],2:[function(a,b){function c(a){a||(a=document.createDocumentFragment()),this.container=a,this.detachedNodes={},this.nodeCount=0}c.prototype.migrate=function(a){var b=this.container;if(a!==b){if(b instanceof DocumentFragment)a.appendChild(b);else for(;b.hasChildNodes();)a.appendChild(b.removeChild(b.firstChild));this.container=a}},c.prototype.allocate=function(a){a=a.toLowerCase(),a in this.detachedNodes||(this.detachedNodes[a]=[]);var b,c=this.detachedNodes[a];return c.length>0?b=c.pop():(b=document.createElement(a),this.container.appendChild(b)),this.nodeCount++,b},c.prototype.deallocate=function(a){var b=a.nodeName.toLowerCase(),c=this.detachedNodes[b];c.push(a),this.nodeCount--},c.prototype.getNodeCount=function(){return this.nodeCount},b.exports=c},{}],3:[function(a,b){function c(a){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new j,this._eventOutput.bindThis(this),this.eventForwarder=function(a){this._eventOutput.emit(a.type,a)}.bind(this),this.id=i.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,a&&this.attach(a)}function d(a){for(var b in this._eventOutput.listeners)a.addEventListener(b,this.eventForwarder)}function e(a){for(var b in this._eventOutput.listeners)a.removeEventListener(b,this.eventForwarder)}function f(a){a[12]=Math.round(a[12]*m)/m,a[13]=Math.round(a[13]*m)/m;for(var b="matrix3d(",c=0;15>c;c++)b+=a[c]<1e-6&&a[c]>-1e-6?"0,":a[c]+",";return b+=a[15]+")"}function g(a){return 100*a[0]+"% "+100*a[1]+"%"}function h(a,b){return a&&b?a[0]!==b[0]||a[1]!==b[1]:a!==b}var i=a("./Entity"),j=a("./EventHandler"),k=a("./Transform"),l=!("transform"in document.documentElement.style),m=window.devicePixelRatio||1;c.prototype.on=function(a,b){this._element&&this._element.addEventListener(a,this.eventForwarder),this._eventOutput.on(a,b)},c.prototype.removeListener=function(a,b){this._eventOutput.removeListener(a,b)},c.prototype.emit=function(a,b){b&&!b.origin&&(b.origin=this);var c=this._eventOutput.emit(a,b);return c&&b&&b.stopPropagation&&b.stopPropagation(),c},c.prototype.pipe=function(a){return this._eventOutput.pipe(a)},c.prototype.unpipe=function(a){return this._eventOutput.unpipe(a)},c.prototype.render=function(){return this.id};var n;n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(a,b){a.style.zIndex=1e6*b[14]|0,a.style.transform=f(b)}:l?function(a,b){a.style.webkitTransform=f(b)}:function(a,b){a.style.transform=f(b)};var o=l?function(a,b){a.style.webkitTransformOrigin=g(b)}:function(a,b){a.style.transformOrigin=g(b)},p=l?function(a){a.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",a.style.opacity=0}:function(a){a.style.transform="scale3d(0.0001,0.0001,0.0001)",a.style.opacity=0};c.prototype.commit=function(a){var b=this._element;if(b){{var c=a.transform,d=a.opacity,e=a.origin;a.size}if(!c&&this._matrix)return this._matrix=null,this._opacity=0,void p(b);if(h(this._origin,e)&&(this._originDirty=!0),k.notEquals(this._matrix,c)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==d&&(this._opacity=d,b.style.opacity=d>=1?"0.999999":d),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(e?(this._origin||(this._origin=[0,0]),this._origin[0]=e[0],this._origin[1]=e[1]):this._origin=null,o(b,this._origin),this._originDirty=!1),c||(c=k.identity),this._matrix=c;var f=this._size?k.thenMove(c,[-this._size[0]*e[0],-this._size[1]*e[1],0]):c;n(b,f),this._transformDirty=!1}}},c.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},c.prototype.attach=function(a){this._element=a,d.call(this,a)},c.prototype.detach=function(){var a=this._element;return a&&(e.call(this,a),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,a},b.exports=c},{"./Entity":5,"./EventHandler":7,"./Transform":15}],4:[function(a,b){function c(){s.runLoop?(k.step(),window.requestAnimationFrame(c)):p=!1}function d(){for(var a=0;a<l.length;a++)l[a].emit("resize");r.emit("resize")}function e(){window.addEventListener("touchmove",function(a){a.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var f,g,h=a("./Context"),i=a("./EventHandler"),j=a("./OptionsManager"),k={},l=[],m=[],n=[],o=Date.now(),p=!0,q={},r=new i,s={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},t=new j(s),u=10;k.step=function(){var a=Date.now();if(!(g&&g>a-o)){var b=0;for(f=a-o,o=a,r.emit("prerender"),b=0;b<m.length;b++)m[b].call(this);for(m.splice(0);n.length&&Date.now()-a<u;)n.shift().call(this);for(b=0;b<l.length;b++)l[b].update();r.emit("postrender")}},window.requestAnimationFrame(c),window.addEventListener("resize",d,!1),d();var v=!1;k.pipe=function(a){return a.subscribe instanceof Function?a.subscribe(k):r.pipe(a)},k.unpipe=function(a){return a.unsubscribe instanceof Function?a.unsubscribe(k):r.unpipe(a)},k.on=function(a,b){return a in q||(q[a]=r.emit.bind(r,a),document.body?document.body.addEventListener(a,q[a]):k.nextTick(function(a,b){document.body.addEventListener(a,b)}.bind(this,a,q[a]))),r.on(a,b)},k.emit=function(a,b){return r.emit(a,b)},k.removeListener=function(a,b){return r.removeListener(a,b)},k.getFPS=function(){return 1e3/f},k.setFPSCap=function(a){g=Math.floor(1e3/a)},k.getOptions=function(a){return t.getOptions(a)},k.setOptions=function(){return t.setOptions.apply(t,arguments)},k.createContext=function(a){!v&&s.appMode&&k.nextTick(e);var b=!1;a||(a=document.createElement(s.containerType),a.classList.add(s.containerClass),b=!0);var c=new h(a);return k.registerContext(c),b&&k.nextTick(function(a,b){document.body.appendChild(b),a.emit("resize")}.bind(this,c,a)),c},k.registerContext=function(a){return l.push(a),a},k.getContexts=function(){return l},k.deregisterContext=function(a){var b=l.indexOf(a);b>=0&&l.splice(b,1)},k.nextTick=function(a){m.push(a)},k.defer=function(a){n.push(a)},t.on("change",function(a){"fpsCap"===a.id?k.setFPSCap(a.value):"runLoop"===a.id&&!p&&a.value&&(p=!0,window.requestAnimationFrame(c))}),b.exports=k},{"./Context":1,"./EventHandler":7,"./OptionsManager":10}],5:[function(a,b){function c(a){return g[a]}function d(a,b){g[a]=b}function e(a){var b=g.length;return d(b,a),b}function f(a){d(a,null)}var g=[];b.exports={register:e,unregister:f,get:c,set:d}},{}],6:[function(a,b){function c(){this.listeners={},this._owner=this}c.prototype.emit=function(a,b){var c=this.listeners[a];if(c)for(var d=0;d<c.length;d++)c[d].call(this._owner,b);return this},c.prototype.on=function(a,b){a in this.listeners||(this.listeners[a]=[]);var c=this.listeners[a].indexOf(b);return 0>c&&this.listeners[a].push(b),this},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(a,b){var c=this.listeners[a];if(void 0!==c){var d=c.indexOf(b);d>=0&&c.splice(d,1)}return this},c.prototype.bindThis=function(a){this._owner=a},b.exports=c},{}],7:[function(a,b){function c(){d.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var d=a("./EventEmitter");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.setInputHandler=function(a,b){a.trigger=b.trigger.bind(b),b.subscribe&&b.unsubscribe&&(a.subscribe=b.subscribe.bind(b),a.unsubscribe=b.unsubscribe.bind(b))},c.setOutputHandler=function(a,b){b instanceof c&&b.bindThis(a),a.pipe=b.pipe.bind(b),a.unpipe=b.unpipe.bind(b),a.on=b.on.bind(b),a.addListener=a.on,a.removeListener=b.removeListener.bind(b)},c.prototype.emit=function(a,b){d.prototype.emit.apply(this,arguments);var c=0;for(c=0;c<this.downstream.length;c++)this.downstream[c].trigger&&this.downstream[c].trigger(a,b);for(c=0;c<this.downstreamFn.length;c++)this.downstreamFn[c](a,b);return this},c.prototype.trigger=c.prototype.emit,c.prototype.pipe=function(a){if(a.subscribe instanceof Function)return a.subscribe(this);var b=a instanceof Function?this.downstreamFn:this.downstream,c=b.indexOf(a);return 0>c&&b.push(a),a instanceof Function?a("pipe",null):a.trigger&&a.trigger("pipe",null),a},c.prototype.unpipe=function(a){if(a.unsubscribe instanceof Function)return a.unsubscribe(this);var b=a instanceof Function?this.downstreamFn:this.downstream,c=b.indexOf(a);return c>=0?(b.splice(c,1),a instanceof Function?a("unpipe",null):a.trigger&&a.trigger("unpipe",null),a):!1},c.prototype.on=function(a){if(d.prototype.on.apply(this,arguments),!(a in this.upstreamListeners)){var b=this.trigger.bind(this,a);this.upstreamListeners[a]=b;for(var c=0;c<this.upstream.length;c++)this.upstream[c].on(a,b)}return this},c.prototype.addListener=c.prototype.on,c.prototype.subscribe=function(a){var b=this.upstream.indexOf(a);if(0>b){this.upstream.push(a);for(var c in this.upstreamListeners)a.on(c,this.upstreamListeners[c])}return this},c.prototype.unsubscribe=function(a){var b=this.upstream.indexOf(a);if(b>=0){this.upstream.splice(b,1);for(var c in this.upstreamListeners)a.removeListener(c,this.upstreamListeners[c])}return this},b.exports=c},{"./EventEmitter":6}],8:[function(a,b){function c(a){f.call(this,a),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new d(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var d=a("./Context"),e=a("./Transform"),f=a("./Surface");c.SIZE_ZERO=[0,0],c.prototype=Object.create(f.prototype),c.prototype.elementType="div",c.prototype.elementClass="famous-group",c.prototype.add=function(){return this.context.add.apply(this.context,arguments)},c.prototype.render=function(){return f.prototype.render.call(this)},c.prototype.deploy=function(a){this.context.migrate(a)},c.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},c.prototype.commit=function(a){var b=a.transform,d=a.origin,g=a.opacity,h=a.size,i=f.prototype.commit.call(this,{allocator:a.allocator,transform:e.thenMove(b,[-d[0]*h[0],-d[1]*h[1],0]),opacity:g,origin:d,size:c.SIZE_ZERO});return(h[0]!==this._groupSize[0]||h[1]!==this._groupSize[1])&&(this._groupSize[0]=h[0],this._groupSize[1]=h[1],this.context.setSize(h)),this.context.update({transform:e.translate(-d[0]*h[0],-d[1]*h[1],0),origin:d,size:h}),i
},b.exports=c},{"./Context":1,"./Surface":14,"./Transform":15}],9:[function(a,b){function c(a){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:e.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},a&&(a.transform&&this.transformFrom(a.transform),void 0!==a.opacity&&this.opacityFrom(a.opacity),a.origin&&this.originFrom(a.origin),a.align&&this.alignFrom(a.align),a.size&&this.sizeFrom(a.size),a.proportions&&this.proportionsFrom(a.proportions))}function d(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}var e=a("./Transform"),f=a("../transitions/Transitionable"),g=a("../transitions/TransitionableTransform");c.prototype.transformFrom=function(a){return a instanceof Function?this._transformGetter=a:a instanceof Object&&a.get?this._transformGetter=a.get.bind(a):(this._transformGetter=null,this._output.transform=a),this},c.prototype.opacityFrom=function(a){return a instanceof Function?this._opacityGetter=a:a instanceof Object&&a.get?this._opacityGetter=a.get.bind(a):(this._opacityGetter=null,this._output.opacity=a),this},c.prototype.originFrom=function(a){return a instanceof Function?this._originGetter=a:a instanceof Object&&a.get?this._originGetter=a.get.bind(a):(this._originGetter=null,this._output.origin=a),this},c.prototype.alignFrom=function(a){return a instanceof Function?this._alignGetter=a:a instanceof Object&&a.get?this._alignGetter=a.get.bind(a):(this._alignGetter=null,this._output.align=a),this},c.prototype.sizeFrom=function(a){return a instanceof Function?this._sizeGetter=a:a instanceof Object&&a.get?this._sizeGetter=a.get.bind(a):(this._sizeGetter=null,this._output.size=a),this},c.prototype.proportionsFrom=function(a){return a instanceof Function?this._proportionGetter=a:a instanceof Object&&a.get?this._proportionGetter=a.get.bind(a):(this._proportionGetter=null,this._output.proportions=a),this},c.prototype.setTransform=function(a,b,c){return b||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new g(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(a,b,c),this):this.transformFrom(a)},c.prototype.setOpacity=function(a,b,c){return b||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new f(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(a,b,c)):this.opacityFrom(a)},c.prototype.setOrigin=function(a,b,c){return b||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new f(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(a,b,c),this):this.originFrom(a)},c.prototype.setAlign=function(a,b,c){return b||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new f(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(a,b,c),this):this.alignFrom(a)},c.prototype.setSize=function(a,b,c){return a&&(b||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new f(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(a,b,c),this):this.sizeFrom(a)},c.prototype.setProportions=function(a,b,c){return a&&(b||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new f(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(a,b,c),this):this.proportionsFrom(a)},c.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},c.prototype.getTransform=function(){return this._transformGetter()},c.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},c.prototype.getOpacity=function(){return this._opacityGetter()},c.prototype.getOrigin=function(){return this._originGetter()},c.prototype.getAlign=function(){return this._alignGetter()},c.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},c.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},c.prototype.modify=function(a){return d.call(this),this._output.target=a,this._output},b.exports=c},{"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89,"./Transform":15}],10:[function(a,b){function c(a){this._value=a,this.eventOutput=null}function d(){this.eventOutput=new e,this.eventOutput.bindThis(this),e.setOutputHandler(this,this.eventOutput)}var e=a("./EventHandler");c.patch=function(a){for(var b=new c(a),d=1;d<arguments.length;d++)b.patch(arguments[d]);return a},c.prototype.patch=function(){for(var a=this._value,b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)d in a&&c[d]&&c[d].constructor===Object&&a[d]&&a[d].constructor===Object?(a.hasOwnProperty(d)||(a[d]=Object.create(a[d])),this.key(d).patch(c[d]),this.eventOutput&&this.eventOutput.emit("change",{id:d,value:this.key(d).value()})):this.set(d,c[d])}return this},c.prototype.setOptions=c.prototype.patch,c.prototype.key=function(a){var b=new c(this._value[a]);return(!(b._value instanceof Object)||b._value instanceof Array)&&(b._value={}),b},c.prototype.get=function(a){return a?this._value[a]:this._value},c.prototype.getOptions=c.prototype.get,c.prototype.set=function(a,b){var c=this.get(a);return this._value[a]=b,this.eventOutput&&b!==c&&this.eventOutput.emit("change",{id:a,value:b}),this},c.prototype.on=function(){return d.call(this),this.on.apply(this,arguments)},c.prototype.removeListener=function(){return d.call(this),this.removeListener.apply(this,arguments)},c.prototype.pipe=function(){return d.call(this),this.pipe.apply(this,arguments)},c.prototype.unpipe=function(){return d.call(this),this.unpipe.apply(this,arguments)},b.exports=c},{"./EventHandler":7}],11:[function(a,b){function c(a){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,a&&this.set(a)}function d(a,b,c){for(var g=f.parse(a,b),h=Object.keys(g),i=0;i<h.length;i++){var j=h[i],k=e.get(j),l=g[j];l.allocator=b.allocator;var m=k.commit(l);m?d(m,b,c):c[j]=l}}var e=a("./Entity"),f=a("./SpecParser");c.prototype.add=function(a){var b=a instanceof c?a:new c(a);return this._child instanceof Array?this._child.push(b):this._child?(this._child=[this._child,b],this._hasMultipleChildren=!0,this._childResult=[]):this._child=b,b},c.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},c.prototype.set=function(a){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=a.render?!0:!1,this._isModifier=a.modify?!0:!1,this._object=a,this._child=null,a instanceof c?a:this},c.prototype.getSize=function(){var a=null,b=this.get();return b&&b.getSize&&(a=b.getSize()),!a&&this._child&&this._child.getSize&&(a=this._child.getSize()),a},c.prototype.commit=function(a){for(var b=Object.keys(this._prevResults),c=0;c<b.length;c++){var f=b[c];if(void 0===this._resultCache[f]){var g=e.get(f);g.cleanup&&g.cleanup(a.allocator)}}this._prevResults=this._resultCache,this._resultCache={},d(this.render(),a,this._resultCache)},c.prototype.render=function(){if(this._isRenderable)return this._object.render();var a=null;if(this._hasMultipleChildren){a=this._childResult;for(var b=this._child,c=0;c<b.length;c++)a[c]=b[c].render()}else this._child&&(a=this._child.render());return this._isModifier?this._object.modify(a):a},b.exports=c},{"./Entity":5,"./SpecParser":13}],12:[function(a,b){function c(a){this.id=null,this._objects=null,this.node=new j,this._definition=null,a&&this.load(a)}function d(a){for(var b in k)if(b in a){var c=a[b];return c instanceof Array||(c=[c]),k[b].apply(this,c)}}function e(a){var b=a.transform,c=a.opacity,e=a.origin,f=a.align,g=a.size,j=h.identity;if(b instanceof Array)if(16===b.length&&"number"==typeof b[0])j=b;else for(var k=0;k<b.length;k++)j=h.multiply(j,d(b[k]));else b instanceof Function?j=b:b instanceof Object&&(j=d(b));var l=new i({transform:j,opacity:c,origin:e,align:f,size:g});return l}function f(a){for(var b=new j,c=0;c<a.length;c++){var d=g.call(this,a[c]);d&&b.add(d)}return b}function g(a){var b,c;if(a instanceof Array)b=f.call(this,a);else if(c=this._objects.length,a.render&&a.render instanceof Function)b=a;else if(a.target){var d=g.call(this,a.target),h=e.call(this,a);b=new j(h),b.add(d),a.id&&(this.id[a.id]=h)}else a.id&&(b=new j,this.id[a.id]=b);return this._objects[c]=b,b}var h=a("./Transform"),i=a("./Modifier"),j=a("./RenderNode"),k={translate:h.translate,rotate:h.rotate,rotateX:h.rotateX,rotateY:h.rotateY,rotateZ:h.rotateZ,rotateAxis:h.rotateAxis,scale:h.scale,skew:h.skew,matrix3d:function(){return arguments}};c.prototype.create=function(){return new c(this._definition)},c.prototype.load=function(a){this._definition=a,this.id={},this._objects=[],this.node.set(g.call(this,a))},c.prototype.add=function(){return this.node.add.apply(this.node,arguments)},c.prototype.render=function(){return this.node.render.apply(this.node,arguments)},b.exports=c},{"./Modifier":9,"./RenderNode":11,"./Transform":15}],13:[function(a,b){function c(){this.result={}}function d(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8],a[0]*b[1]+a[1]*b[5]+a[2]*b[9],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]]}var e=a("./Transform");c._instance=new c,c.parse=function(a,b){return c._instance.parse(a,b)},c.prototype.parse=function(a,b){return this.reset(),this._parseSpec(a,b,e.identity),this.result},c.prototype.reset=function(){this.result={}};var f=[0,0];c.prototype._parseSpec=function(a,b,c){var g,h,i,j,k,l,m;if("number"==typeof a){if(g=a,i=b.transform,l=b.align||f,b.size&&l&&(l[0]||l[1])){var n=[l[0]*b.size[0],l[1]*b.size[1],0];i=e.thenMove(i,d(n,c))}this.result[g]={transform:i,opacity:b.opacity,origin:b.origin||f,align:b.align||f,size:b.size}}else{if(!a)return;if(a instanceof Array)for(var o=0;o<a.length;o++)this._parseSpec(a[o],b,c);else{h=a.target,i=b.transform,j=b.opacity,k=b.origin,l=b.align,m=b.size;var p=c;if(void 0!==a.opacity&&(j=b.opacity*a.opacity),a.transform&&(i=e.multiply(b.transform,a.transform)),a.origin&&(k=a.origin,p=b.transform),a.align&&(l=a.align),a.size||a.proportions){var q=m;m=[m[0],m[1]],a.size&&(void 0!==a.size[0]&&(m[0]=a.size[0]),void 0!==a.size[1]&&(m[1]=a.size[1])),a.proportions&&(void 0!==a.proportions[0]&&(m[0]=m[0]*a.proportions[0]),void 0!==a.proportions[1]&&(m[1]=m[1]*a.proportions[1])),q&&(l&&(l[0]||l[1])&&(i=e.thenMove(i,d([l[0]*q[0],l[1]*q[1],0],c))),k&&(k[0]||k[1])&&(i=e.moveThen([-k[0]*m[0],-k[1]*m[1],0],i))),p=b.transform,k=null,l=null}this._parseSpec(h,{transform:i,opacity:j,origin:k,align:l,size:m},p)}}},b.exports=c},{"./Transform":15}],14:[function(a,b){function c(a){j.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],a&&this.setOptions(a),this._currentTarget=null}function d(a){for(var b=0;b<this._dirtyClasses.length;b++)a.classList.remove(this._dirtyClasses[b]);this._dirtyClasses=[]}function e(a){for(var b in this.properties)a.style[b]=this.properties[b]}function f(a){for(var b in this.properties)a.style[b]=""}function g(a){for(var b in this.attributes)a.setAttribute(b,this.attributes[b])}function h(a){for(var b in this.attributes)a.removeAttribute(b)}function i(a,b){return a&&b?a[0]!==b[0]||a[1]!==b[1]:a!==b}var j=a("./ElementOutput");c.prototype=Object.create(j.prototype),c.prototype.constructor=c,c.prototype.elementType="div",c.prototype.elementClass="famous-surface",c.prototype.setAttributes=function(a){for(var b in a){if("style"===b)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[b]=a[b]}this._attributesDirty=!0},c.prototype.getAttributes=function(){return this.attributes},c.prototype.setProperties=function(a){for(var b in a)this.properties[b]=a[b];return this._stylesDirty=!0,this},c.prototype.getProperties=function(){return this.properties},c.prototype.addClass=function(a){return this.classList.indexOf(a)<0&&(this.classList.push(a),this._classesDirty=!0),this},c.prototype.removeClass=function(a){var b=this.classList.indexOf(a);return b>=0&&(this._dirtyClasses.push(this.classList.splice(b,1)[0]),this._classesDirty=!0),this},c.prototype.toggleClass=function(a){var b=this.classList.indexOf(a);return b>=0?this.removeClass(a):this.addClass(a),this},c.prototype.setClasses=function(a){var b=0,c=[];for(b=0;b<this.classList.length;b++)a.indexOf(this.classList[b])<0&&c.push(this.classList[b]);for(b=0;b<c.length;b++)this.removeClass(c[b]);for(b=0;b<a.length;b++)this.addClass(a[b]);return this},c.prototype.getClassList=function(){return this.classList},c.prototype.setContent=function(a){return this.content!==a&&(this.content=a,this._contentDirty=!0),this},c.prototype.getContent=function(){return this.content},c.prototype.setOptions=function(a){return a.size&&this.setSize(a.size),a.classes&&this.setClasses(a.classes),a.properties&&this.setProperties(a.properties),a.attributes&&this.setAttributes(a.attributes),a.content&&this.setContent(a.content),this},c.prototype.setup=function(a){var b=a.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var c=0;c<this.elementClass.length;c++)b.classList.add(this.elementClass[c]);else b.classList.add(this.elementClass);b.style.display="",this.attach(b),this._opacity=null,this._currentTarget=b,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},c.prototype.commit=function(a){this._currentTarget||this.setup(a.allocator);var b=this._currentTarget,c=a.size;if(this._classesDirty){d.call(this,b);for(var f=this.getClassList(),h=0;h<f.length;h++)b.classList.add(f[h]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(e.call(this,b),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(g.call(this,b),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var k=a.size;if(c=[this.size[0],this.size[1]],void 0===c[0]&&(c[0]=k[0]),void 0===c[1]&&(c[1]=k[1]),c[0]===!0||c[1]===!0){if(c[0]!==!0||!this._trueSizeCheck&&0!==this._size[0])this._size&&(c[0]=this._size[0]);else{var l=b.offsetWidth;this._size&&this._size[0]!==l&&(this._size[0]=l,this._sizeDirty=!0),c[0]=l}if(c[1]!==!0||!this._trueSizeCheck&&0!==this._size[1])this._size&&(c[1]=this._size[1]);else{var m=b.offsetHeight;this._size&&this._size[1]!==m&&(this._size[1]=m,this._sizeDirty=!0),c[1]=m}this._trueSizeCheck=!1}}i(this._size,c)&&(this._size||(this._size=[0,0]),this._size[0]=c[0],this._size[1]=c[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(b.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",b.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(b),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),j.prototype.commit.call(this,a)},c.prototype.cleanup=function(a){var b=0,c=this._currentTarget;this._eventOutput.emit("recall"),this.recall(c),c.style.display="none",c.style.opacity="",c.style.width="",c.style.height="",f.call(this,c),h.call(this,c);var e=this.getClassList();for(d.call(this,c),b=0;b<e.length;b++)c.classList.remove(e[b]);if(this.elementClass)if(this.elementClass instanceof Array)for(b=0;b<this.elementClass.length;b++)c.classList.remove(this.elementClass[b]);else c.classList.remove(this.elementClass);this.detach(c),this._currentTarget=null,a.deallocate(c)},c.prototype.deploy=function(a){var b=this.getContent();if(b instanceof Node){for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}else a.innerHTML=b},c.prototype.recall=function(a){for(var b=document.createDocumentFragment();a.hasChildNodes();)b.appendChild(a.firstChild);this.setContent(b)},c.prototype.getSize=function(){return this._size?this._size:this.size},c.prototype.setSize=function(a){return this.size=a?[a[0],a[1]]:null,this._sizeDirty=!0,this},b.exports=c},{"./ElementOutput":3}],15:[function(a,b){function c(a){return 2===a.length?a[0]*a[0]+a[1]*a[1]:a[0]*a[0]+a[1]*a[1]+a[2]*a[2]}function d(a){return Math.sqrt(c(a))}function e(a){return 0>a?-1:1}var f={};f.precision=1e-6,f.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f.multiply4x4=function(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2]+a[12]*b[3],a[1]*b[0]+a[5]*b[1]+a[9]*b[2]+a[13]*b[3],a[2]*b[0]+a[6]*b[1]+a[10]*b[2]+a[14]*b[3],a[3]*b[0]+a[7]*b[1]+a[11]*b[2]+a[15]*b[3],a[0]*b[4]+a[4]*b[5]+a[8]*b[6]+a[12]*b[7],a[1]*b[4]+a[5]*b[5]+a[9]*b[6]+a[13]*b[7],a[2]*b[4]+a[6]*b[5]+a[10]*b[6]+a[14]*b[7],a[3]*b[4]+a[7]*b[5]+a[11]*b[6]+a[15]*b[7],a[0]*b[8]+a[4]*b[9]+a[8]*b[10]+a[12]*b[11],a[1]*b[8]+a[5]*b[9]+a[9]*b[10]+a[13]*b[11],a[2]*b[8]+a[6]*b[9]+a[10]*b[10]+a[14]*b[11],a[3]*b[8]+a[7]*b[9]+a[11]*b[10]+a[15]*b[11],a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12]*b[15],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13]*b[15],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14]*b[15],a[3]*b[12]+a[7]*b[13]+a[11]*b[14]+a[15]*b[15]]},f.multiply=function(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2],a[1]*b[0]+a[5]*b[1]+a[9]*b[2],a[2]*b[0]+a[6]*b[1]+a[10]*b[2],0,a[0]*b[4]+a[4]*b[5]+a[8]*b[6],a[1]*b[4]+a[5]*b[5]+a[9]*b[6],a[2]*b[4]+a[6]*b[5]+a[10]*b[6],0,a[0]*b[8]+a[4]*b[9]+a[8]*b[10],a[1]*b[8]+a[5]*b[9]+a[9]*b[10],a[2]*b[8]+a[6]*b[9]+a[10]*b[10],0,a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14],1]},f.thenMove=function(a,b){return b[2]||(b[2]=0),[a[0],a[1],a[2],0,a[4],a[5],a[6],0,a[8],a[9],a[10],0,a[12]+b[0],a[13]+b[1],a[14]+b[2],1]},f.moveThen=function(a,b){a[2]||(a[2]=0);var c=a[0]*b[0]+a[1]*b[4]+a[2]*b[8],d=a[0]*b[1]+a[1]*b[5]+a[2]*b[9],e=a[0]*b[2]+a[1]*b[6]+a[2]*b[10];return f.thenMove(b,[c,d,e])},f.translate=function(a,b,c){return void 0===c&&(c=0),[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]},f.thenScale=function(a,b){return[b[0]*a[0],b[1]*a[1],b[2]*a[2],0,b[0]*a[4],b[1]*a[5],b[2]*a[6],0,b[0]*a[8],b[1]*a[9],b[2]*a[10],0,b[0]*a[12],b[1]*a[13],b[2]*a[14],1]},f.scale=function(a,b,c){return void 0===c&&(c=1),void 0===b&&(b=a),[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]},f.rotateX=function(a){var b=Math.cos(a),c=Math.sin(a);return[1,0,0,0,0,b,c,0,0,-c,b,0,0,0,0,1]},f.rotateY=function(a){var b=Math.cos(a),c=Math.sin(a);return[b,0,-c,0,0,1,0,0,c,0,b,0,0,0,0,1]},f.rotateZ=function(a){var b=Math.cos(a),c=Math.sin(a);return[b,c,0,0,-c,b,0,0,0,0,1,0,0,0,0,1]},f.rotate=function(a,b,c){var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b),h=Math.cos(c),i=Math.sin(c),j=[f*h,d*i+e*g*h,e*i-d*g*h,0,-f*i,d*h-e*g*i,e*h+d*g*i,0,g,-e*f,d*f,0,0,0,0,1];return j},f.rotateAxis=function(a,b){var c=Math.sin(b),d=Math.cos(b),e=1-d,f=a[0]*a[0]*e,g=a[0]*a[1]*e,h=a[0]*a[2]*e,i=a[1]*a[1]*e,j=a[1]*a[2]*e,k=a[2]*a[2]*e,l=a[0]*c,m=a[1]*c,n=a[2]*c,o=[f+d,g+n,h-m,0,g-n,i+d,j+l,0,h+m,j-l,k+d,0,0,0,0,1];return o},f.aboutOrigin=function(a,b){var c=a[0]-(a[0]*b[0]+a[1]*b[4]+a[2]*b[8]),d=a[1]-(a[0]*b[1]+a[1]*b[5]+a[2]*b[9]),e=a[2]-(a[0]*b[2]+a[1]*b[6]+a[2]*b[10]);return f.thenMove(b,[c,d,e])},f.skew=function(a,b,c){return[1,Math.tan(b),0,0,Math.tan(c),1,0,0,0,Math.tan(a),1,0,0,0,0,1]},f.skewX=function(a){return[1,0,0,0,Math.tan(a),1,0,0,0,0,1,0,0,0,0,1]},f.skewY=function(a){return[1,Math.tan(a),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},f.perspective=function(a){return[1,0,0,0,0,1,0,0,0,0,1,-1/a,0,0,0,1]},f.getTranslate=function(a){return[a[12],a[13],a[14]]},f.inverse=function(a){var b=a[5]*a[10]-a[6]*a[9],c=a[4]*a[10]-a[6]*a[8],d=a[4]*a[9]-a[5]*a[8],e=a[1]*a[10]-a[2]*a[9],f=a[0]*a[10]-a[2]*a[8],g=a[0]*a[9]-a[1]*a[8],h=a[1]*a[6]-a[2]*a[5],i=a[0]*a[6]-a[2]*a[4],j=a[0]*a[5]-a[1]*a[4],k=a[0]*b-a[1]*c+a[2]*d,l=1/k,m=[l*b,-l*e,l*h,0,-l*c,l*f,-l*i,0,l*d,-l*g,l*j,0,0,0,0,1];return m[12]=-a[12]*m[0]-a[13]*m[4]-a[14]*m[8],m[13]=-a[12]*m[1]-a[13]*m[5]-a[14]*m[9],m[14]=-a[12]*m[2]-a[13]*m[6]-a[14]*m[10],m},f.transpose=function(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]},f.interpret=function(a){var b=[a[0],a[1],a[2]],g=e(b[0]),h=d(b),i=[b[0]+g*h,b[1],b[2]],j=2/c(i);if(j>=1/0)return{translate:f.getTranslate(a),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];k[0]=1-j*i[0]*i[0],k[5]=1-j*i[1]*i[1],k[10]=1-j*i[2]*i[2],k[1]=-j*i[0]*i[1],k[2]=-j*i[0]*i[2],k[6]=-j*i[1]*i[2],k[4]=k[1],k[8]=k[2],k[9]=k[6];var l=f.multiply(k,a),m=[l[5],l[6]],n=e(m[0]),o=d(m),p=[m[0]+n*o,m[1]],q=2/c(p),r=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];r[5]=1-q*p[0]*p[0],r[10]=1-q*p[1]*p[1],r[6]=-q*p[0]*p[1],r[9]=r[6];var s=f.multiply(r,k),t=f.multiply(s,a),u=f.scale(t[0]<0?-1:1,t[5]<0?-1:1,t[10]<0?-1:1);t=f.multiply(t,u),s=f.multiply(u,s);var v={};return v.translate=f.getTranslate(a),v.rotate=[Math.atan2(-s[6],s[10]),Math.asin(s[2]),Math.atan2(-s[1],s[0])],v.rotate[0]||(v.rotate[0]=0,v.rotate[2]=Math.atan2(s[4],s[5])),v.scale=[t[0],t[5],t[10]],v.skew=[Math.atan2(t[9],v.scale[2]),Math.atan2(t[8],v.scale[2]),Math.atan2(t[4],v.scale[0])],Math.abs(v.rotate[0])+Math.abs(v.rotate[2])>1.5*Math.PI&&(v.rotate[1]=Math.PI-v.rotate[1],v.rotate[1]>Math.PI&&(v.rotate[1]-=2*Math.PI),v.rotate[1]<-Math.PI&&(v.rotate[1]+=2*Math.PI),v.rotate[0]<0?v.rotate[0]+=Math.PI:v.rotate[0]-=Math.PI,v.rotate[2]<0?v.rotate[2]+=Math.PI:v.rotate[2]-=Math.PI),v},f.average=function(a,b,c){c=void 0===c?.5:c;for(var d=f.interpret(a),e=f.interpret(b),g={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},h=0;3>h;h++)g.translate[h]=(1-c)*d.translate[h]+c*e.translate[h],g.rotate[h]=(1-c)*d.rotate[h]+c*e.rotate[h],g.scale[h]=(1-c)*d.scale[h]+c*e.scale[h],g.skew[h]=(1-c)*d.skew[h]+c*e.skew[h];return f.build(g)},f.build=function(a){var b=f.scale(a.scale[0],a.scale[1],a.scale[2]),c=f.skew(a.skew[0],a.skew[1],a.skew[2]),d=f.rotate(a.rotate[0],a.rotate[1],a.rotate[2]);return f.thenMove(f.multiply(f.multiply(d,c),b),a.translate)},f.equals=function(a,b){return!f.notEquals(a,b)},f.notEquals=function(a,b){return a===b?!1:!(a&&b)||a[12]!==b[12]||a[13]!==b[13]||a[14]!==b[14]||a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[4]!==b[4]||a[5]!==b[5]||a[6]!==b[6]||a[8]!==b[8]||a[9]!==b[9]||a[10]!==b[10]},f.normalizeRotation=function(a){var b=a.slice(0);for((b[0]===.5*Math.PI||b[0]===.5*-Math.PI)&&(b[0]=-b[0],b[1]=Math.PI-b[1],b[2]-=Math.PI),b[0]>.5*Math.PI&&(b[0]=b[0]-Math.PI,b[1]=Math.PI-b[1],b[2]-=Math.PI),b[0]<.5*-Math.PI&&(b[0]=b[0]+Math.PI,b[1]=-Math.PI-b[1],b[2]-=Math.PI);b[1]<-Math.PI;)b[1]+=2*Math.PI;for(;b[1]>=Math.PI;)b[1]-=2*Math.PI;for(;b[2]<-Math.PI;)b[2]+=2*Math.PI;for(;b[2]>=Math.PI;)b[2]-=2*Math.PI;return b},f.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],f.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],b.exports=f},{}],16:[function(a,b){function c(a){this._node=new f,this._eventInput=new d,this._eventOutput=new d,d.setInputHandler(this,this._eventInput),d.setOutputHandler(this,this._eventOutput),this.options=g.clone(this.constructor.DEFAULT_OPTIONS||c.DEFAULT_OPTIONS),this._optionsManager=new e(this.options),a&&this.setOptions(a)}var d=a("./EventHandler"),e=a("./OptionsManager"),f=a("./RenderNode"),g=a("../utilities/Utility");c.DEFAULT_OPTIONS={},c.prototype.getOptions=function(a){return this._optionsManager.getOptions(a)},c.prototype.setOptions=function(a){this._optionsManager.patch(a)},c.prototype.add=function(){return this._node.add.apply(this._node,arguments)},c.prototype._add=c.prototype.add,c.prototype.render=function(){return this._node.render()},c.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},b.exports=c},{"../utilities/Utility":95,"./EventHandler":7,"./OptionsManager":10,"./RenderNode":11}],17:[function(a,b){function c(a){a||(a=[]),a instanceof Array&&(a={array:a}),this._=null,this.index=a.index||0,a.array?this._=new this.constructor.Backing(a.array):a._&&(this._=a._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==a.loop&&(this._.loop=a.loop),void 0!==a.trackSize&&(this._.trackSize=a.trackSize),this._previousNode=null,this._nextNode=null}c.Backing=function(a){this.array=a,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},c.Backing.prototype.getValue=function(a){var b=a-this.firstIndex;return 0>b||b>=this.array.length?null:this.array[b]},c.Backing.prototype.setValue=function(a,b){this.array[a-this.firstIndex]=b},c.Backing.prototype.getSize=function(a){return this.cumulativeSizes[a]},c.Backing.prototype.calculateSize=function(a){a=a||this.array.length;for(var b=[0,0],c=0;a>c;c++){var d=this.array[c].getSize();if(!d)return void 0;void 0!==b[0]&&(void 0===d[0]?b[0]=void 0:b[0]+=d[0]),void 0!==b[1]&&(void 0===d[1]?b[1]=void 0:b[1]+=d[1]),this.cumulativeSizes[c+1]=b.slice()}return this.sizeDirty=!1,b},c.Backing.prototype.reindex=function(a,b,c){if(this.array[0]){for(var d=0,e=this.firstIndex,f=c-b,g=this.firstNode;a-1>e;)g=g.getNext(),e++;var h=g;for(d=0;b>d;d++)g=g.getNext(),g&&(g._previousNode=h);var i=g?g.getNext():null;for(h._nextNode=null,g=h,d=0;c>d;d++)g=g.getNext();if(e+=c,g!==i&&(g._nextNode=i,i&&(i._previousNode=g)),i)for(g=i,e++;g&&e<this.array.length+this.firstIndex;)g._nextNode?g.index+=f:g.index=e,g=g.getNext(),e++;this.trackSize&&(this.sizeDirty=!0)}},c.prototype.getPrevious=function(){var a=this._.array.length;return a?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+a-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},c.prototype.getNext=function(){var a=this._.array.length;return a?this.index===this._.firstIndex+a-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode},c.prototype.indexOf=function(a){return this._.array.indexOf(a)},c.prototype.getIndex=function(){return this.index},c.prototype.toString=function(){return""+this.index},c.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},c.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},c.prototype.splice=function(a,b){var c=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[a-this._.firstIndex,b].concat(c)),this._.reindex(a,b,c.length)},c.prototype.swap=function(a){var b=a.get(),c=this.get();this._.setValue(this.index,b),this._.setValue(a.index,c);var d=this._previousNode,e=this._nextNode,f=this.index,g=a._previousNode,h=a._nextNode,i=a.index;this.index=i,this._previousNode=g===this?a:g,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=h===this?a:h,this._nextNode&&(this._nextNode._previousNode=this),a.index=f,a._previousNode=d===a?this:d,a._previousNode&&(a._previousNode._nextNode=a),a._nextNode=e===a?this:e,a._nextNode&&(a._nextNode._previousNode=a),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),a.index===this._.firstIndex?this._.firstNode=a:a.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=a),this._.trackSize&&(this._.sizeDirty=!0)},c.prototype.get=function(){return this._.getValue(this.index)},c.prototype.getSize=function(){var a=this.get();return a?a.getSize():null},c.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var a=this.get();return a?a.render.apply(a,arguments):null},b.exports=c},{}],18:[function(a,b){b.exports={Context:a("./Context"),ElementAllocator:a("./ElementAllocator"),ElementOutput:a("./ElementOutput"),Engine:a("./Engine"),Entity:a("./Entity"),EventEmitter:a("./EventEmitter"),EventHandler:a("./EventHandler"),Group:a("./Group"),Modifier:a("./Modifier"),OptionsManager:a("./OptionsManager"),RenderNode:a("./RenderNode"),Scene:a("./Scene"),SpecParser:a("./SpecParser"),Surface:a("./Surface"),Transform:a("./Transform"),View:a("./View"),ViewSequence:a("./ViewSequence")}},{"./Context":1,"./ElementAllocator":2,"./ElementOutput":3,"./Engine":4,"./Entity":5,"./EventEmitter":6,"./EventHandler":7,"./Group":8,"./Modifier":9,"./OptionsManager":10,"./RenderNode":11,"./Scene":12,"./SpecParser":13,"./Surface":14,"./Transform":15,"./View":16,"./ViewSequence":17}],19:[function(a,b){function c(a){this.dispatchers={},this.currMode=void 0,this.setMode(a)}var d=a("../core/EventHandler");c.prototype.setMode=function(a){if(a!==this.currMode){var b=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].trigger("unpipe"),this.currMode=a,this.dispatchers[a]&&this.dispatchers[a].emit("pipe"),this.emit("change",{from:b,to:a})}},c.prototype.forMode=function(a){return this.dispatchers[a]||(this.dispatchers[a]=new d),this.dispatchers[a]},c.prototype.emit=function(a,b){if(void 0===this.currMode)return!1;b||(b={});var c=this.dispatchers[this.currMode];return c?c.trigger(a,b):void 0},b.exports=c},{"../core/EventHandler":7}],20:[function(a,b){function c(a){d.call(this),this._condition=a}var d=a("../core/EventHandler");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.emit=function(a,b){return this._condition(a,b)?d.prototype.emit.apply(this,arguments):void 0},c.prototype.trigger=c.prototype.emit,b.exports=c},{"../core/EventHandler":7}],21:[function(a,b){function c(a){d.call(this),this._mappingFunction=a}var d=a("../core/EventHandler");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.subscribe=null,c.prototype.unsubscribe=null,c.prototype.emit=function(a,b){var c=this._mappingFunction.apply(this,arguments);c&&c.emit instanceof Function&&c.emit(a,b)},c.prototype.trigger=c.prototype.emit,b.exports=c},{"../core/EventHandler":7}],22:[function(a,b){b.exports={EventArbiter:a("./EventArbiter"),EventFilter:a("./EventFilter"),EventMapper:a("./EventMapper")}},{"./EventArbiter":19,"./EventFilter":20,"./EventMapper":21}],23:[function(a,b){b.exports={core:a("./core"),events:a("./events"),inputs:a("./inputs"),math:a("./math"),modifiers:a("./modifiers"),physics:a("./physics"),utilities:a("./utilities"),widgets:a("./widgets"),transitions:a("./transitions"),surfaces:a("./surfaces"),views:a("./views")}},{"./core":18,"./events":22,"./inputs":36,"./math":42,"./modifiers":47,"./physics":71,"./surfaces":82,"./transitions":92,"./utilities":96,"./views":111,"./widgets":116}],24:[function(a,b){function c(a,b){void 0===b&&(b="update"),this._state=a&&a.get&&a.set?a:new f(a||0),this._eventInput=new e,e.setInputHandler(this,this._eventInput),this._eventInput.on(b,d.bind(this))
}function d(a){var b=a.delta,c=this.get();if(b.constructor===c.constructor){var d=b instanceof Array?[c[0]+b[0],c[1]+b[1]]:c+b;this.set(d)}}var e=a("../core/EventHandler"),f=a("../transitions/Transitionable");c.prototype.get=function(){return this._state.get()},c.prototype.set=function(a){this._state.set(a)},b.exports=c},{"../core/EventHandler":7,"../transitions/Transitionable":88}],25:[function(){function a(a){window.addEventListener(a,function(a){return a.stopPropagation(),!1},!0)}var b="ontouchstart"in window;b&&(a("mousedown"),a("mousemove"),a("mouseup"),a("mouseleave"))},{}],26:[function(){!function(){if(window.CustomEvent){var a=300,b=500,c={},d={},e=Date.now;window.addEventListener("touchstart",function(a){for(var b=e(),d=0;d<a.changedTouches.length;d++){var f=a.changedTouches[d];c[f.identifier]=b}}),window.addEventListener("touchmove",function(a){for(var b=0;b<a.changedTouches.length;b++){var d=a.changedTouches[b];delete c[d.identifier]}}),window.addEventListener("touchend",function(b){for(var f=e(),g=0;g<b.changedTouches.length;g++){var h=b.changedTouches[g],i=c[h.identifier];if(i&&a>f-i){var j=new window.CustomEvent("click",{bubbles:!0,detail:h});d[f]=b,b.target.dispatchEvent(j)}delete c[h.identifier]}}),window.addEventListener("click",function(a){var c=e();for(var f in d){var g=d[f];b>c-f?a instanceof window.MouseEvent&&a.target===g.target&&a.stopPropagation():delete d[f]}},!0)}}()},{}],27:[function(a,b){function c(a,b){this._eventInput=new e,this._eventOutput=new e,e.setInputHandler(this,this._eventInput),e.setOutputHandler(this,this._eventOutput),this._syncs={},a&&this.addSync(a),b&&this.setOptions(b)}function d(a,b){f[a]&&(this._syncs[a]=new f[a](b),this.pipeSync(a))}var e=a("../core/EventHandler");c.DIRECTION_X=0,c.DIRECTION_Y=1,c.DIRECTION_Z=2;var f={};c.register=function(a){for(var b in a){if(f[b]){if(f[b]===a[b])return;throw new Error("this key is registered to a different sync class")}f[b]=a[b]}},c.prototype.setOptions=function(a){for(var b in this._syncs)this._syncs[b].setOptions(a)},c.prototype.pipeSync=function(a){var b=this._syncs[a];this._eventInput.pipe(b),b.pipe(this._eventOutput)},c.prototype.unpipeSync=function(a){var b=this._syncs[a];this._eventInput.unpipe(b),b.unpipe(this._eventOutput)},c.prototype.addSync=function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)d.call(this,a[b]);else if(a instanceof Object)for(var c in a)d.call(this,c,a[c])},b.exports=c},{"../core/EventHandler":7}],28:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new i(this.options),a&&this.setOptions(a),this._eventInput=new h,this._eventOutput=new h,h.setInputHandler(this,this._eventInput),h.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",d.bind(this)),this._eventInput.on("mousemove",e.bind(this)),this._eventInput.on("mouseup",f.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",g.bind(this)):this._eventInput.on("mouseleave",f.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._positionHistory=[],this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1,this._documentActive=!1}function d(a){var b,c;this.options.preventDefault&&a.preventDefault();var d=a.clientX,e=a.clientY;this._prevCoord=[d,e],this._prevTime=Date.now(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,b=0,c=0):(this._position=[0,0],b=[0,0],c=[0,0]);var f=this._payload;f.delta=b,f.position=this._position,f.velocity=c,f.clientX=d,f.clientY=e,f.offsetX=a.offsetX,f.offsetY=a.offsetY,this._positionHistory.push({position:f.position.slice?f.position.slice(0):f.position,time:this._prevTime}),this._eventOutput.emit("start",f),this._documentActive=!1}function e(a){if(this._prevCoord){var b=this._prevCoord,d=(this._prevTime,a.clientX),e=a.clientY,f=Date.now(),g=d-b[0],h=e-b[1];this.options.rails&&(Math.abs(g)>Math.abs(h)?h=0:g=0);var i,k,l=Math.max(f-this._positionHistory[0].time,j),m=this.options.scale;this.options.direction===c.DIRECTION_X?(k=m*g,this._position+=k,i=m*(this._position-this._positionHistory[0].position)/l):this.options.direction===c.DIRECTION_Y?(k=m*h,this._position+=k,i=m*(this._position-this._positionHistory[0].position)/l):(k=[m*g,m*h],i=[m*(this._position[0]-this._positionHistory[0].position[0])/l,m*(this._position[1]-this._positionHistory[0].position[1])/l],this._position[0]+=k[0],this._position[1]+=k[1]);var n=this._payload;n.delta=k,n.position=this._position,n.velocity=i,n.clientX=d,n.clientY=e,n.offsetX=a.offsetX,n.offsetY=a.offsetY,this._positionHistory.length===this.options.velocitySampleLength&&this._positionHistory.shift(),this._positionHistory.push({position:n.position.slice?n.position.slice(0):n.position,time:f}),this._eventOutput.emit("update",n),this._prevCoord=[d,e],this._prevTime=f,this._move=!0}}function f(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1,this._positionHistory=[])}function g(a){if(this._down&&this._move&&!this._documentActive){var b=e.bind(this),c=function(a){f.call(this,a),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",c)}.bind(this,a);document.addEventListener("mousemove",b),document.addEventListener("mouseup",c),this._documentActive=!0}}var h=a("../core/EventHandler"),i=a("../core/OptionsManager");c.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0,velocitySampleLength:10,preventDefault:!0},c.DIRECTION_X=0,c.DIRECTION_Y=1;var j=8;c.prototype.getOptions=function(){return this.options},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},b.exports=c},{"../core/EventHandler":7,"../core/OptionsManager":10}],29:[function(a,b){function c(a){d.call(this),this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new e(this.options),a&&this.setOptions(a),this._displacement=0,this._previousDistance=0}var d=a("./TwoFingerSync"),e=a("../core/OptionsManager");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={scale:1},c.prototype._startUpdate=function(a){this._previousDistance=d.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:a.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:d.calculateCenter(this.posA,this.posB)})},c.prototype._moveUpdate=function(a){var b=d.calculateDistance(this.posA,this.posB),c=d.calculateCenter(this.posA,this.posB),e=this.options.scale,f=e*(b-this._previousDistance),g=f/a;this._previousDistance=b,this._displacement+=f,this._eventOutput.emit("update",{delta:f,velocity:g,distance:b,displacement:this._displacement,center:c,touches:[this.touchAId,this.touchBId]})},c.prototype.getOptions=function(){return this.options},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},b.exports=c},{"../core/OptionsManager":10,"./TwoFingerSync":35}],30:[function(a,b){function c(a){d.call(this),this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new e(this.options),a&&this.setOptions(a),this._angle=0,this._previousAngle=0}var d=a("./TwoFingerSync"),e=a("../core/OptionsManager");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={scale:1},c.prototype._startUpdate=function(a){this._angle=0,this._previousAngle=d.calculateAngle(this.posA,this.posB);var b=d.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:a.touches.length,angle:this._angle,center:b,touches:[this.touchAId,this.touchBId]})},c.prototype._moveUpdate=function(a){var b=this.options.scale,c=d.calculateAngle(this.posA,this.posB),e=d.calculateCenter(this.posA,this.posB),f=b*(c-this._previousAngle),g=f/a;this._angle+=f,this._eventOutput.emit("update",{delta:f,velocity:g,angle:this._angle,center:e,touches:[this.touchAId,this.touchBId]}),this._previousAngle=c},c.prototype.getOptions=function(){return this.options},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},b.exports=c},{"../core/OptionsManager":10,"./TwoFingerSync":35}],31:[function(a,b){function c(a){e.call(this),this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new f(this.options),a&&this.setOptions(a),this._scaleFactor=1,this._startDist=0,this._eventInput.on("pipe",d.bind(this))}function d(){this.touchAId=void 0,this.touchBId=void 0}var e=a("./TwoFingerSync"),f=a("../core/OptionsManager");c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={scale:1},c.prototype._startUpdate=function(a){this._scaleFactor=1,this._startDist=e.calculateDistance(this.posA,this.posB),this._eventOutput.emit("start",{count:a.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:e.calculateCenter(this.posA,this.posB)})},c.prototype._moveUpdate=function(a){var b=this.options.scale,c=e.calculateDistance(this.posA,this.posB),d=e.calculateCenter(this.posA,this.posB),f=(c-this._startDist)/this._startDist,g=Math.max(1+b*f,0),h=(g-this._scaleFactor)/a;this._eventOutput.emit("update",{delta:f,scale:g,velocity:h,distance:c,center:d,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=g},c.prototype.getOptions=function(){return this.options},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},b.exports=c},{"../core/OptionsManager":10,"./TwoFingerSync":35}],32:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),a&&this.setOptions(a),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new f,this._eventOutput=new f,f.setInputHandler(this,this._eventInput),f.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",e.bind(this)),this._eventInput.on("wheel",e.bind(this)),this._inProgress=!1,this._loopBound=!1}function d(){if(this._inProgress&&j()-this._prevTime>this.options.stallTime){this._inProgress=!1;var a=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,b=this._payload;b.position=this._position,b.velocity=a,b.slip=!0,this._eventOutput.emit("end",b)}}function e(a){this.options.preventDefault&&a.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,q=this._payload,q.slip=!0,q.position=this._position,q.clientX=a.clientX,q.clientY=a.clientY,q.offsetX=a.offsetX,q.offsetY=a.offsetY,this._eventOutput.emit("start",q),this._loopBound||(g.on("prerender",d.bind(this)),this._loopBound=!0));var b=j(),e=this._prevTime||b,f=void 0!==a.wheelDeltaX?a.wheelDeltaX:-a.deltaX,h=void 0!==a.wheelDeltaY?a.wheelDeltaY:-a.deltaY;1===a.deltaMode&&(f*=this.options.lineHeight,h*=this.options.lineHeight),this.options.rails&&(Math.abs(f)>Math.abs(h)?h=0:f=0);var k,l,m=Math.max(b-e,i),n=f/m,o=h/m,p=this.options.scale;this.options.direction===c.DIRECTION_X?(l=p*f,k=p*n,this._position+=l):this.options.direction===c.DIRECTION_Y?(l=p*h,k=p*o,this._position+=l):(l=[p*f,p*h],k=[p*n,p*o],this._position[0]+=l[0],this._position[1]+=l[1]);var q=this._payload;q.delta=l,q.velocity=k,q.position=this._position,q.slip=!0,this._eventOutput.emit("update",q),this._prevTime=b,this._prevVel=k}var f=a("../core/EventHandler"),g=a("../core/Engine"),h=a("../core/OptionsManager");c.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},c.DIRECTION_X=0,c.DIRECTION_Y=1;var i=8,j=Date.now;c.prototype.getOptions=function(){return this.options},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},b.exports=c},{"../core/Engine":4,"../core/EventHandler":7,"../core/OptionsManager":10}],33:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new i(this.options),a&&this.setOptions(a),this._eventOutput=new h,this._touchTracker=new g({touchLimit:this.options.touchLimit}),h.setOutputHandler(this,this._eventOutput),h.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",d.bind(this)),this._touchTracker.on("trackmove",e.bind(this)),this._touchTracker.on("trackend",f.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function d(a){var b,c;void 0!==this.options.direction?(this._position=0,b=0,c=0):(this._position=[0,0],b=[0,0],c=[0,0]);var d=this._payload;d.delta=c,d.position=this._position,d.velocity=b,d.clientX=a.x,d.clientY=a.y,d.count=a.count,d.touch=a.identifier,this._eventOutput.emit("start",d)}function e(a){var b=a.history,d=b[b.length-1],e=b[b.length-2],f=b[b.length-this.options.velocitySampleLength]?b[b.length-this.options.velocitySampleLength]:b[b.length-2],g=f.timestamp,h=d.timestamp,i=d.x-e.x,k=d.y-e.y,l=d.x-f.x,m=d.y-f.y;this.options.rails&&(Math.abs(i)>Math.abs(k)?k=0:i=0,Math.abs(l)>Math.abs(m)?m=0:l=0);var n,o,p=Math.max(h-g,j),q=l/p,r=m/p,s=this.options.scale;this.options.direction===c.DIRECTION_X?(o=s*i,n=s*q,this._position+=o):this.options.direction===c.DIRECTION_Y?(o=s*k,n=s*r,this._position+=o):(o=[s*i,s*k],n=[s*q,s*r],this._position[0]+=o[0],this._position[1]+=o[1]);var t=this._payload;t.delta=o,t.velocity=n,t.position=this._position,t.clientX=a.x,t.clientY=a.y,t.count=a.count,t.touch=a.identifier,this._eventOutput.emit("update",t)}function f(a){this._payload.count=a.count,this._eventOutput.emit("end",this._payload)}var g=a("./TouchTracker"),h=a("../core/EventHandler"),i=a("../core/OptionsManager");c.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},c.DIRECTION_X=0,c.DIRECTION_Y=1;var j=8;c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},c.prototype.getOptions=function(){return this.options},b.exports=c},{"../core/EventHandler":7,"../core/OptionsManager":10,"./TouchTracker":34}],34:[function(a,b){function c(a,b,c){return{x:a.clientX,y:a.clientY,identifier:a.identifier,origin:b.origin,timestamp:j(),count:b.touches.length,history:c}}function d(a){if(!(a.touches.length>this.touchLimit)){this.isTouched=!0;for(var b=0;b<a.changedTouches.length;b++){var d=a.changedTouches[b],e=c(d,a,null);this.eventOutput.emit("trackstart",e),this.selective||this.touchHistory[d.identifier]||this.track(e)}}}function e(a){if(!(a.touches.length>this.touchLimit))for(var b=0;b<a.changedTouches.length;b++){var d=a.changedTouches[b],e=this.touchHistory[d.identifier];if(e){var f=c(d,a,e);this.touchHistory[d.identifier].push(f),this.eventOutput.emit("trackmove",f)}}}function f(a){if(this.isTouched){for(var b=0;b<a.changedTouches.length;b++){var d=a.changedTouches[b],e=this.touchHistory[d.identifier];if(e){var f=c(d,a,e);this.eventOutput.emit("trackend",f),delete this.touchHistory[d.identifier]}}this.isTouched=!1}}function g(){for(var a in this.touchHistory){var b=this.touchHistory[a];this.eventOutput.emit("trackend",{touch:b[b.length-1].touch,timestamp:Date.now(),count:0,history:b}),delete this.touchHistory[a]}}function h(a){this.selective=a.selective,this.touchLimit=a.touchLimit||1,this.touchHistory={},this.eventInput=new i,this.eventOutput=new i,i.setInputHandler(this,this.eventInput),i.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",d.bind(this)),this.eventInput.on("touchmove",e.bind(this)),this.eventInput.on("touchend",f.bind(this)),this.eventInput.on("touchcancel",f.bind(this)),this.eventInput.on("unpipe",g.bind(this)),this.isTouched=!1}var i=a("../core/EventHandler"),j=Date.now;h.prototype.track=function(a){this.touchHistory[a.identifier]=[a]},b.exports=h},{"../core/EventHandler":7}],35:[function(a,b){function c(){this._eventInput=new d,this._eventOutput=new d,d.setInputHandler(this,this._eventInput),d.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var d=a("../core/EventHandler");c.calculateAngle=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.atan2(d,c)},c.calculateDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},c.calculateCenter=function(a,b){return[(a[0]+b[0])/2,(a[1]+b[1])/2]};var e=Date.now;c.prototype.handleStart=function(a){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b];this.touchAEnabled?this.touchBEnabled||(this.touchBId=c.identifier,this.touchBEnabled=!0,this.posB=[c.pageX,c.pageY],this.timestampB=e(),this._startUpdate(a)):(this.touchAId=c.identifier,this.touchAEnabled=!0,this.posA=[c.pageX,c.pageY],this.timestampA=e())}},c.prototype.handleMove=function(a){if(this.touchAEnabled&&this.touchBEnabled){for(var b,c=this.timestampA,d=this.timestampB,f=0;f<a.changedTouches.length;f++){var g=a.changedTouches[f];g.identifier===this.touchAId?(this.posA=[g.pageX,g.pageY],this.timestampA=e(),b=this.timestampA-c):g.identifier===this.touchBId&&(this.posB=[g.pageX,g.pageY],this.timestampB=e(),b=this.timestampB-d)}b&&this._moveUpdate(b)}},c.prototype.handleEnd=function(a){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b];(c.identifier===this.touchAId||c.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},b.exports=c},{"../core/EventHandler":7}],36:[function(a,b){b.exports={Accumulator:a("./Accumulator"),DesktopEmulationMode:a("./DesktopEmulationMode"),FastClick:a("./FastClick"),GenericSync:a("./GenericSync"),MouseSync:a("./MouseSync"),PinchSync:a("./PinchSync"),RotateSync:a("./RotateSync"),ScaleSync:a("./ScaleSync"),ScrollSync:a("./ScrollSync"),TouchSync:a("./TouchSync"),TouchTracker:a("./TouchTracker"),TwoFingerSync:a("./TwoFingerSync")}},{"./Accumulator":24,"./DesktopEmulationMode":25,"./FastClick":26,"./GenericSync":27,"./MouseSync":28,"./PinchSync":29,"./RotateSync":30,"./ScaleSync":31,"./ScrollSync":32,"./TouchSync":33,"./TouchTracker":34,"./TwoFingerSync":35}],37:[function(a,b){function c(a){return this.values=a||[[1,0,0],[0,1,0],[0,0,1]],this}var d=a("./Vector"),e=new c,f=new d;c.prototype.get=function(){return this.values},c.prototype.set=function(a){this.values=a},c.prototype.vectorMultiply=function(a){var b=this.get(),c=a.x,d=a.y,e=a.z,g=b[0],h=b[1],i=b[2],j=g[0],k=g[1],l=g[2],m=h[0],n=h[1],o=h[2],p=i[0],q=i[1],r=i[2];return f.setXYZ(j*c+k*d+l*e,m*c+n*d+o*e,p*c+q*d+r*e)},c.prototype.multiply=function(a){for(var b=this.get(),c=[[]],d=0;3>d;d++){c[d]=[];for(var f=0;3>f;f++){for(var g=0,h=0;3>h;h++)g+=b[d][h]*a[h][f];c[d][f]=g}}return e.set(c)},c.prototype.transpose=function(){for(var a=[],b=this.get(),c=0;3>c;c++)for(var d=0;3>d;d++)a[c][d]=b[d][c];return e.set(a)},c.prototype.clone=function(){for(var a=this.get(),b=[],d=0;3>d;d++)b[d]=a[d].slice();return new c(b)},b.exports=c},{"./Vector":41}],38:[function(a,b){function c(a,b,c,d){return 1===arguments.length?this.set(a):(this.w=void 0!==a?a:1,this.x=void 0!==b?b:0,this.y=void 0!==c?c:0,this.z=void 0!==d?d:0),this}var d=a("./Matrix"),e=new c(1,0,0,0);c.prototype.add=function(a){return e.setWXYZ(this.w+a.w,this.x+a.x,this.y+a.y,this.z+a.z)},c.prototype.sub=function(a){return e.setWXYZ(this.w-a.w,this.x-a.x,this.y-a.y,this.z-a.z)},c.prototype.scalarDivide=function(a){return this.scalarMultiply(1/a)},c.prototype.scalarMultiply=function(a){return e.setWXYZ(this.w*a,this.x*a,this.y*a,this.z*a)},c.prototype.multiply=function(a){var b=this.x,c=this.y,d=this.z,f=this.w,g=a.x,h=a.y,i=a.z,j=a.w||0;return e.setWXYZ(f*j-b*g-c*h-d*i,b*j+g*f+h*d-c*i,c*j+h*f+b*i-g*d,d*j+i*f+g*c-b*h)};var f=new c(1,0,0,0);c.prototype.rotateVector=function(a){return f.set(this.conj()),e.set(this.multiply(a).multiply(f))},c.prototype.inverse=function(){return e.set(this.conj().scalarDivide(this.normSquared()))},c.prototype.negate=function(){return this.scalarMultiply(-1)},c.prototype.conj=function(){return e.setWXYZ(this.w,-this.x,-this.y,-this.z)},c.prototype.normalize=function(a){return a=void 0===a?1:a,this.scalarDivide(a*this.norm())},c.prototype.makeFromAngleAndAxis=function(a,b){var c=b.normalize(),d=.5*a,e=-Math.sin(d);return this.x=e*c.x,this.y=e*c.y,this.z=e*c.z,this.w=Math.cos(d),this},c.prototype.setWXYZ=function(a,b,c,d){return e.clear(),this.w=a,this.x=b,this.y=c,this.z=d,this},c.prototype.set=function(a){return a instanceof Array?(this.w=0,this.x=a[0],this.y=a[1],this.z=a[2]):(this.w=a.w,this.x=a.x,this.y=a.y,this.z=a.z),this!==e&&e.clear(),this},c.prototype.put=function(a){a.set(e)},c.prototype.clone=function(){return new c(this)},c.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},c.prototype.isEqual=function(a){return a.w===this.w&&a.x===this.x&&a.y===this.y&&a.z===this.z},c.prototype.dot=function(a){return this.w*a.w+this.x*a.x+this.y*a.y+this.z*a.z},c.prototype.normSquared=function(){return this.dot(this)},c.prototype.norm=function(){return Math.sqrt(this.normSquared())},c.prototype.isZero=function(){return!(this.x||this.y||this.z)},c.prototype.getTransform=function(){var a=this.normalize(1),b=a.x,c=a.y,d=a.z,e=a.w;return[1-2*c*c-2*d*d,2*b*c-2*d*e,2*b*d+2*c*e,0,2*b*c+2*d*e,1-2*b*b-2*d*d,2*c*d-2*b*e,0,2*b*d-2*c*e,2*c*d+2*b*e,1-2*b*b-2*c*c,0,0,0,0,1]};var g=new d;c.prototype.getMatrix=function(){var a=this.normalize(1),b=a.x,c=a.y,d=a.z,e=a.w;return g.set([[1-2*c*c-2*d*d,2*b*c+2*d*e,2*b*d-2*c*e],[2*b*c-2*d*e,1-2*b*b-2*d*d,2*c*d+2*b*e],[2*b*d+2*c*e,2*c*d-2*b*e,1-2*b*b-2*c*c]])};var h=1e-5;c.prototype.slerp=function(a,b){var c,d,f,g,i;return d=this.dot(a),1-d>h?(c=Math.acos(d),f=Math.sin(c),g=Math.sin((1-b)*c)/f,i=Math.sin(b*c)/f):(g=1-b,i=b),e.set(this.scalarMultiply(g/i).add(a).multiply(i))},b.exports=c},{"./Matrix":37}],39:[function(a,b){function c(a,b){return a+e()*(b-a)}function d(a,b){return a+e()*(b-a+1)>>0}var e=Math.random,f={};f.integer=function(a,b,c){if(a=void 0!==a?a:0,b=void 0!==b?b:1,void 0!==c){for(var e=[],f=0;c>f;f++)e.push(d(a,b));return e}return d(a,b)},f.range=function(a,b,d){if(a=void 0!==a?a:0,b=void 0!==b?b:1,void 0!==d){for(var e=[],f=0;d>f;f++)e.push(c(a,b));return e}return c(a,b)},f.sign=function(a){return a=void 0!==a?a:.5,e()<a?1:-1},f.bool=function(a){return a=void 0!==a?a:.5,e()<a},b.exports=f},{}],40:[function(a,b){var c={};c.clamp=function(a,b){return Math.max(Math.min(a,b[1]),b[0])},c.length=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c]*a[c];return Math.sqrt(b)},b.exports=c},{}],41:[function(a,b){function c(a,b,c){return 1===arguments.length&&void 0!==a?this.set(a):(this.x=a||0,this.y=b||0,this.z=c||0),this}function d(a,b,c){return this.x=a,this.y=b,this.z=c,this}function e(a){return d.call(this,a[0],a[1],a[2]||0)}function f(a){return d.call(this,a.x,a.y,a.z)}function g(a){return d.call(this,a,0,0)}var h=new c(0,0,0);c.prototype.add=function(a){return d.call(h,this.x+a.x,this.y+a.y,this.z+a.z)},c.prototype.sub=function(a){return d.call(h,this.x-a.x,this.y-a.y,this.z-a.z)},c.prototype.mult=function(a){return d.call(h,a*this.x,a*this.y,a*this.z)},c.prototype.div=function(a){return this.mult(1/a)},c.prototype.cross=function(a){var b=this.x,c=this.y,e=this.z,f=a.x,g=a.y,i=a.z;return d.call(h,e*g-c*i,b*i-e*f,c*f-b*g)},c.prototype.equals=function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},c.prototype.rotateX=function(a){var b=this.x,c=this.y,e=this.z,f=Math.cos(a),g=Math.sin(a);return d.call(h,b,c*f-e*g,c*g+e*f)},c.prototype.rotateY=function(a){var b=this.x,c=this.y,e=this.z,f=Math.cos(a),g=Math.sin(a);return d.call(h,e*g+b*f,c,e*f-b*g)},c.prototype.rotateZ=function(a){var b=this.x,c=this.y,e=this.z,f=Math.cos(a),g=Math.sin(a);return d.call(h,b*f-c*g,b*g+c*f,e)},c.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},c.prototype.normSquared=function(){return this.dot(this)},c.prototype.norm=function(){return Math.sqrt(this.normSquared())},c.prototype.normalize=function(a){0===arguments.length&&(a=1);var b=this.norm();return b>1e-7?f.call(h,this.mult(a/b)):d.call(h,a,0,0)},c.prototype.clone=function(){return new c(this)},c.prototype.isZero=function(){return!(this.x||this.y||this.z)},c.prototype.set=function(a){return a instanceof Array?e.call(this,a):"number"==typeof a?g.call(this,a):f.call(this,a)},c.prototype.setXYZ=function(){return d.apply(this,arguments)},c.prototype.set1D=function(a){return g.call(this,a)},c.prototype.put=function(a){this===h?f.call(a,h):f.call(a,this)},c.prototype.clear=function(){return d.call(this,0,0,0)},c.prototype.cap=function i(i){if(1/0===i)return f.call(h,this);var a=this.norm();return a>i?f.call(h,this.mult(i/a)):f.call(h,this)},c.prototype.project=function(a){return a.mult(this.dot(a))},c.prototype.reflectAcross=function(a){return a.normalize().put(a),f(h,this.sub(this.project(a).mult(2)))},c.prototype.get=function(){return[this.x,this.y,this.z]},c.prototype.get1D=function(){return this.x},b.exports=c},{}],42:[function(a,b){b.exports={Matrix:a("./Matrix"),Quaternion:a("./Quaternion"),Random:a("./Random"),Utilities:a("./Utilities"),Vector:a("./Vector")}},{"./Matrix":37,"./Quaternion":38,"./Random":39,"./Utilities":40,"./Vector":41}],43:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this._positionState=new j([0,0]),this._differential=[0,0],this._active=!0,this.sync=new m(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new k,k.setInputHandler(this,this.sync),k.setOutputHandler(this,this.eventOutput),h.call(this)}function d(a){var b=this.options,c=b.projection,d=b.snapX,e=b.snapY,f=c&p.x?a[0]:0,g=c&p.y?a[1]:0;return d>0&&(f-=f%d),e>0&&(g-=g%e),[f,g]}function e(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function f(a){if(this._active){var b=this.options;this._differential=a.position;var c=d.call(this,this._differential);this._differential[0]-=c[0],this._differential[1]-=c[1];var e=this.getPosition();if(e[0]+=c[0],e[1]+=c[1],b.xRange){var f=[b.xRange[0]+.5*b.snapX,b.xRange[1]-.5*b.snapX];e[0]=q(e[0],f)}if(b.yRange){var g=[b.yRange[0]+.5*b.snapY,b.yRange[1]-.5*b.snapY];e[1]=q(e[1],g)}this.eventOutput.emit("update",{position:e})}}function g(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function h(){this.sync.on("start",e.bind(this)),this.sync.on("update",f.bind(this)),this.sync.on("end",g.bind(this))}var i=a("../core/Transform"),j=a("../transitions/Transitionable"),k=a("../core/EventHandler"),l=a("../math/Utilities"),m=a("../inputs/GenericSync"),n=a("../inputs/MouseSync"),o=a("../inputs/TouchSync");m.register({mouse:n,touch:o});var p={x:1,y:2};c.DIRECTION_X=p.x,c.DIRECTION_Y=p.y;var q=l.clamp;c.DEFAULT_OPTIONS={projection:p.x|p.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},c.prototype.setOptions=function(a){var b=this.options;if(void 0!==a.projection){var c=a.projection;this.options.projection=0,["x","y"].forEach(function(a){-1!==c.indexOf(a)&&(b.projection|=p[a])})}void 0!==a.scale&&(b.scale=a.scale,this.sync.setOptions({scale:a.scale})),void 0!==a.xRange&&(b.xRange=a.xRange),void 0!==a.yRange&&(b.yRange=a.yRange),void 0!==a.snapX&&(b.snapX=a.snapX),void 0!==a.snapY&&(b.snapY=a.snapY)},c.prototype.getPosition=function(){return this._positionState.get()},c.prototype.setRelativePosition=function(a,b,c){var d=this.getPosition(),e=[d[0]+a[0],d[1]+a[1]];this.setPosition(e,b,c)},c.prototype.setPosition=function(a,b,c){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(a,b,c)},c.prototype.activate=function(){this._active=!0},c.prototype.deactivate=function(){this._active=!1},c.prototype.toggle=function(){this._active=!this._active},c.prototype.modify=function(a){var b=this.getPosition();return{transform:i.translate(b[0],b[1]),target:a}},b.exports=c},{"../core/EventHandler":7,"../core/Transform":15,"../inputs/GenericSync":27,"../inputs/MouseSync":28,"../inputs/TouchSync":33,"../math/Utilities":40,"../transitions/Transitionable":88}],44:[function(a,b){function c(a,b){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new e(this.options),a&&this.setOptions(a),b||(b=0),this.transitionHelper=new d(b)}var d=a("../transitions/Transitionable"),e=a("../core/OptionsManager");c.DEFAULT_OPTIONS={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},c.prototype.show=function(a,b){a=a||this.options.transition,this.set(1,a,b)},c.prototype.hide=function(a,b){a=a||this.options.transition,this.set(0,a,b)},c.prototype.set=function(a,b,c){this.halt(),this.transitionHelper.set(a,b,c)},c.prototype.halt=function(){this.transitionHelper.halt()},c.prototype.isVisible=function(){return this.transitionHelper.get()>0},c.prototype.modify=function(a){var b=this.transitionHelper.get();return this.options.cull&&!b?void 0:{opacity:b,target:a}},b.exports=c},{"../core/OptionsManager":10,"../transitions/Transitionable":88}],45:[function(a,b){function c(){this._chain=[],arguments.length&&this.addModifier.apply(this,arguments)}c.prototype.addModifier=function(){Array.prototype.push.apply(this._chain,arguments)},c.prototype.removeModifier=function(a){var b=this._chain.indexOf(a);0>b||this._chain.splice(b,1)},c.prototype.modify=function(a){for(var b=this._chain,c=a,d=0;d<b.length;d++)c=b[d].modify(c);return c},b.exports=c},{}],46:[function(a,b){function c(a){this._transformState=new g(e.identity),this._opacityState=new f(1),this._originState=new f([0,0]),this._alignState=new f([0,0]),this._sizeState=new f([0,0]),this._proportionsState=new f([0,0]),this._modifier=new d({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null,proportions:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,this._hasProportions=!1,a&&(a.transform&&this.setTransform(a.transform),void 0!==a.opacity&&this.setOpacity(a.opacity),a.origin&&this.setOrigin(a.origin),a.align&&this.setAlign(a.align),a.size&&this.setSize(a.size),a.proportions&&this.setProportions(a.proportions))}var d=a("../core/Modifier"),e=a("../core/Transform"),f=a("../transitions/Transitionable"),g=a("../transitions/TransitionableTransform");c.prototype.setTransform=function(a,b,c){return this._transformState.set(a,b,c),this},c.prototype.setOpacity=function(a,b,c){return this._opacityState.set(a,b,c),this},c.prototype.setOrigin=function(a,b,c){return null===a?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(a,b,c),this)},c.prototype.setAlign=function(a,b,c){return null===a?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(a,b,c),this)},c.prototype.setSize=function(a,b,c){return null===a?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(a,b,c),this)},c.prototype.setProportions=function(a,b,c){return null===a?(this._hasProportions&&(this._modifier.proportionsFrom(null),this._hasProportions=!1),this):(this._hasProportions||(this._hasProportions=!0,this._modifier.proportionsFrom(this._proportionsState)),this._proportionsState.set(a,b,c),this)},c.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt(),this._proportionsState.halt()},c.prototype.getTransform=function(){return this._transformState.get()},c.prototype.getFinalTransform=function(){return this._transformState.getFinal()
},c.prototype.getOpacity=function(){return this._opacityState.get()},c.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},c.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},c.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},c.prototype.getProportions=function(){return this._hasProportions?this._proportionsState.get():null},c.prototype.modify=function(a){return this._modifier.modify(a)},b.exports=c},{"../core/Modifier":9,"../core/Transform":15,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89}],47:[function(a,b){b.exports={Draggable:a("./Draggable"),Fader:a("./Fader"),ModifierChain:a("./ModifierChain"),StateModifier:a("./StateModifier")}},{"./Draggable":43,"./Fader":44,"./ModifierChain":45,"./StateModifier":46}],48:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=v(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function d(a){return a.applyForce?this._forces:a.applyConstraint?this._constraints:void 0}function e(a,b,c){return void 0===b&&(b=this.getParticlesAndBodies()),b instanceof Array||(b=[b]),a.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:a,id:this._currAgentId,targets:b,source:c},d.call(this,a).push(this._currAgentId),this._currAgentId++}function f(a){return this._agentData[a]}function g(a){var b=f.call(this,this._forces[a]);b.agent.applyForce(b.targets,b.source)}function h(){for(var a=this._forces.length-1;a>-1;a--)g.call(this,a)}function i(a,b){var c=this._agentData[this._constraints[a]];return c.agent.applyConstraint(c.targets,c.source,b)}function j(a){for(var b=0;b<this.options.constraintSteps;){for(var c=this._constraints.length-1;c>-1;c--)i.call(this,c,a);b++}}function k(a,b){a.integrateVelocity(b),this.options.velocityCap&&a.velocity.cap(this.options.velocityCap).put(a.velocity)}function l(a,b){a.integrateAngularMomentum(b),a.updateAngularVelocity(),this.options.angularVelocityCap&&a.angularVelocity.cap(this.options.angularVelocityCap).put(a.angularVelocity)}function m(a,b){a.integrateOrientation(b)}function n(a,b){a.integratePosition(b),a.emit(w.update,a)}function o(a){h.call(this,a),this.forEach(k,a),this.forEachBody(l,a),j.call(this,a),this.forEachBody(m,a),this.forEach(n,a)}function p(){var a=0,b=0;return this.forEach(function(c){b=c.getEnergy(),a+=b}),a}function q(){var a=0;for(var b in this._agentData)a+=this.getAgentEnergy(b);return a}var r=a("../core/EventHandler"),s=17,t=1e3/120,u=17,v=Date.now,w={start:"start",update:"update",end:"end"};c.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},c.prototype.setOptions=function(a){for(var b in a)this.options[b]&&(this.options[b]=a[b])},c.prototype.addBody=function(a){return a._engine=this,a.isBody?(this._bodies.push(a),this._hasBodies=!0):this._particles.push(a),a.on("start",this.wake.bind(this)),a},c.prototype.removeBody=function(a){var b=a.isBody?this._bodies:this._particles,c=b.indexOf(a);if(c>-1){for(var d in this._agentData)this.detachFrom(d.id,a);b.splice(c,1)}0===this.getBodies().length&&(this._hasBodies=!1)},c.prototype.attach=function(a,b,c){if(this.wake(),a instanceof Array){for(var d=[],f=0;f<a.length;f++)d[f]=e.call(this,a[f],b,c);return d}return e.call(this,a,b,c)},c.prototype.attachTo=function(a,b){f.call(this,a).targets.push(b)},c.prototype.detach=function(a){var b=this.getAgent(a),c=d.call(this,b),e=c.indexOf(a);c.splice(e,1),delete this._agentData[a]},c.prototype.detachFrom=function(a,b){var c=f.call(this,a);if(c.source===b)this.detach(a);else{var d=c.targets,e=d.indexOf(b);e>-1&&d.splice(e,1)}},c.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},c.prototype.getAgent=function(a){return f.call(this,a).agent},c.prototype.getParticles=function(){return this._particles},c.prototype.getBodies=function(){return this._bodies},c.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},c.prototype.forEachParticle=function(a,b){for(var c=this.getParticles(),d=0,e=c.length;e>d;d++)a.call(this,c[d],b)},c.prototype.forEachBody=function(a,b){if(this._hasBodies)for(var c=this.getBodies(),d=0,e=c.length;e>d;d++)a.call(this,c[d],b)},c.prototype.forEach=function(a,b){this.forEachParticle(a,b),this.forEachBody(a,b)},c.prototype.getAgentEnergy=function(a){var b=f.call(this,a);return b.agent.getEnergy(b.targets,b.source)},c.prototype.getEnergy=function(){return p.call(this)+q.call(this)},c.prototype.step=function(){if(!this.isSleeping()){var a=v(),b=a-this._prevTime;this._prevTime=a,t>b||(b>u&&(b=u),o.call(this,s),this.emit(w.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},c.prototype.isSleeping=function(){return this._isSleeping},c.prototype.isActive=function(){return!this._isSleeping},c.prototype.sleep=function(){this._isSleeping||(this.forEach(function(a){a.sleep()}),this.emit(w.end,this),this._isSleeping=!0)},c.prototype.wake=function(){this._isSleeping&&(this._prevTime=v(),this.emit(w.start,this),this._isSleeping=!1)},c.prototype.emit=function(a,b){null!==this._eventHandler&&this._eventHandler.emit(a,b)},c.prototype.on=function(a,b){null===this._eventHandler&&(this._eventHandler=new r),this._eventHandler.on(a,b)},b.exports=c},{"../core/EventHandler":7}],49:[function(a,b){function c(a){d.call(this,a),a=a||{},this.orientation=new g,this.angularVelocity=new f,this.angularMomentum=new f,this.torque=new f,a.orientation&&this.orientation.set(a.orientation),a.angularVelocity&&this.angularVelocity.set(a.angularVelocity),a.angularMomentum&&this.angularMomentum.set(a.angularMomentum),a.torque&&this.torque.set(a.torque),this.angularVelocity.w=0,this.setMomentsOfInertia(),this.pWorld=new f}var d=a("./Particle"),e=a("../../core/Transform"),f=a("../../math/Vector"),g=a("../../math/Quaternion"),h=a("../../math/Matrix"),i=a("../integrators/SymplecticEuler");c.DEFAULT_OPTIONS=d.DEFAULT_OPTIONS,c.DEFAULT_OPTIONS.orientation=[0,0,0,1],c.DEFAULT_OPTIONS.angularVelocity=[0,0,0],c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.isBody=!0,c.prototype.setMass=function(){d.prototype.setMass.apply(this,arguments),this.setMomentsOfInertia()},c.prototype.setMomentsOfInertia=function(){this.inertia=new h,this.inverseInertia=new h},c.prototype.updateAngularVelocity=function(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))},c.prototype.toWorldCoordinates=function(a){return this.pWorld.set(this.orientation.rotateVector(a))},c.prototype.getEnergy=function(){return d.prototype.getEnergy.call(this)+.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)},c.prototype.reset=function(a,b,c,e){d.prototype.reset.call(this,a,b),this.angularVelocity.clear(),this.setOrientation(c||[1,0,0,0]),this.setAngularMomentum(e||[0,0,0])},c.prototype.setOrientation=function(a){this.orientation.set(a)},c.prototype.setAngularVelocity=function(a){this.wake(),this.angularVelocity.set(a)},c.prototype.setAngularMomentum=function(a){this.wake(),this.angularMomentum.set(a)},c.prototype.applyForce=function(a,b){d.prototype.applyForce.call(this,a),void 0!==b&&this.applyTorque(b.cross(a))},c.prototype.applyTorque=function(a){this.wake(),this.torque.set(this.torque.add(a))},c.prototype.getTransform=function(){return e.thenMove(this.orientation.getTransform(),e.getTranslate(d.prototype.getTransform.call(this)))},c.prototype._integrate=function(a){d.prototype._integrate.call(this,a),this.integrateAngularMomentum(a),this.updateAngularVelocity(a),this.integrateOrientation(a)},c.prototype.integrateAngularMomentum=function(a){i.integrateAngularMomentum(this,a)},c.prototype.integrateOrientation=function(a){i.integrateOrientation(this,a)},b.exports=c},{"../../core/Transform":15,"../../math/Matrix":37,"../../math/Quaternion":38,"../../math/Vector":41,"../integrators/SymplecticEuler":72,"./Particle":51}],50:[function(a,b){function c(a){a=a||{},this.setRadius(a.radius||0),d.call(this,a)}var d=a("./Body"),e=a("../../math/Matrix");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.setRadius=function(a){this.radius=a,this.size=[2*this.radius,2*this.radius],this.setMomentsOfInertia()},c.prototype.setMomentsOfInertia=function(){var a=this.mass,b=this.radius;this.inertia=new e([[.25*a*b*b,0,0],[0,.25*a*b*b,0],[0,0,.5*a*b*b]]),this.inverseInertia=new e([[4/(a*b*b),0,0],[0,4/(a*b*b),0],[0,0,2/(a*b*b)]])},b.exports=c},{"../../math/Matrix":37,"./Body":49}],51:[function(a,b){function c(a){a=a||{};var b=c.DEFAULT_OPTIONS;this.position=new e,this.velocity=new e,this.force=new e,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==a.mass?a.mass:b.mass,this.inverseMass=1/this.mass,this.setPosition(a.position||b.position),this.setVelocity(a.velocity||b.velocity),this.force.set(a.force||[0,0,0]),this.transform=f.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function d(){this._eventOutput=new g,this._eventOutput.bindThis(this),g.setOutputHandler(this,this._eventOutput)}var e=a("../../math/Vector"),f=a("../../core/Transform"),g=a("../../core/EventHandler"),h=a("../integrators/SymplecticEuler");c.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var i={start:"start",update:"update",end:"end"},j=Date.now;c.prototype.isBody=!1,c.prototype.isActive=function(){return!this._isSleeping},c.prototype.sleep=function(){this._isSleeping||(this.emit(i.end,this),this._isSleeping=!0)},c.prototype.wake=function(){this._isSleeping&&(this.emit(i.start,this),this._isSleeping=!1,this._prevTime=j(),this._engine&&this._engine.wake())},c.prototype.setPosition=function(a){this.position.set(a)},c.prototype.setPosition1D=function(a){this.position.x=a},c.prototype.getPosition=function(){return this._engine.step(),this.position.get()},c.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},c.prototype.setVelocity=function(a){this.velocity.set(a),(0!==a[0]||0!==a[1]||0!==a[2])&&this.wake()},c.prototype.setVelocity1D=function(a){this.velocity.x=a,0!==a&&this.wake()},c.prototype.getVelocity=function(){return this.velocity.get()},c.prototype.setForce=function(a){this.force.set(a),this.wake()},c.prototype.getVelocity1D=function(){return this.velocity.x},c.prototype.setMass=function(a){this.mass=a,this.inverseMass=1/a},c.prototype.getMass=function(){return this.mass},c.prototype.reset=function(a,b){this.setPosition(a||[0,0,0]),this.setVelocity(b||[0,0,0])},c.prototype.applyForce=function(a){a.isZero()||(this.force.add(a).put(this.force),this.wake())},c.prototype.applyImpulse=function(a){if(!a.isZero()){var b=this.velocity;b.add(a.mult(this.inverseMass)).put(b)}},c.prototype.integrateVelocity=function(a){h.integrateVelocity(this,a)},c.prototype.integratePosition=function(a){h.integratePosition(this,a)},c.prototype._integrate=function(a){this.integrateVelocity(a),this.integratePosition(a)},c.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},c.prototype.getTransform=function(){this._engine.step();var a=this.position,b=this.transform;return b[12]=a.x,b[13]=a.y,b[14]=a.z,b},c.prototype.modify=function(a){var b=this._spec.target;return b.transform=this.getTransform(),b.target=a,this._spec},c.prototype.emit=function(a,b){this._eventOutput&&this._eventOutput.emit(a,b)},c.prototype.on=function(){return d.call(this),this.on.apply(this,arguments)},c.prototype.removeListener=function(){return d.call(this),this.removeListener.apply(this,arguments)},c.prototype.pipe=function(){return d.call(this),this.pipe.apply(this,arguments)},c.prototype.unpipe=function(){return d.call(this),this.unpipe.apply(this,arguments)},b.exports=c},{"../../core/EventHandler":7,"../../core/Transform":15,"../../math/Vector":41,"../integrators/SymplecticEuler":72}],52:[function(a,b){function c(a){a=a||{},this.size=a.size||[0,0],d.call(this,a)}var d=a("./Body"),e=a("../../math/Matrix");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.setSize=function(a){this.size=a,this.setMomentsOfInertia()},c.prototype.setMomentsOfInertia=function(){var a=this.mass,b=this.size[0],c=this.size[1];this.inertia=new e([[a*c*c/12,0,0],[0,a*b*b/12,0],[0,0,a*(b*b+c*c)/12]]),this.inverseInertia=new e([[12/(a*c*c),0,0],[0,12/(a*b*b),0],[0,0,12/(a*(b*b+c*c))]])},b.exports=c},{"../../math/Matrix":37,"./Body":49}],53:[function(a,b){b.exports={Body:a("./Body"),Circle:a("./Circle"),Particle:a("./Particle"),Rectangle:a("./Rectangle")}},{"./Body":49,"./Circle":50,"./Particle":51,"./Rectangle":52}],54:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this.normal=new e,this.pDiff=new e,this.vDiff=new e,this.impulse1=new e,this.impulse2=new e,d.call(this)}var d=a("./Constraint"),e=a("../../math/Vector");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0},c.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},c.prototype.applyConstraint=function(a,b,c){if(void 0!==b)for(var d=b.velocity,e=b.position,f=b.inverseMass,g=b.radius,h=this.options,i=h.drift,j=-h.slop,k=h.restitution,l=this.normal,m=this.pDiff,n=this.vDiff,o=this.impulse1,p=this.impulse2,q=0;q<a.length;q++){var r=a[q];if(r!==b){var s=r.velocity,t=r.position,u=r.inverseMass,v=r.radius;m.set(t.sub(e)),n.set(s.sub(d));var w=m.norm(),x=w-(g+v),y=1/(f+u),z=0;if(0>x){if(l.set(m.normalize()),this._eventOutput){var A={target:r,source:b,overlap:x,normal:l};this._eventOutput.emit("preCollision",A),this._eventOutput.emit("collision",A)}var B=j>=x?((1+k)*l.dot(n)+i/c*(x-j))/(z+c/y):(1+k)*l.dot(n)/(z+c/y);l.mult(c*B).put(o),o.mult(-1).put(p),b.applyImpulse(o),r.applyImpulse(p),this._eventOutput&&this._eventOutput.emit("postCollision",A)}}}},b.exports=c},{"../../math/Vector":41,"./Constraint":55}],55:[function(a,b){function c(){this.options=this.options||{},this._eventOutput=new d,d.setOutputHandler(this,this._eventOutput)}var d=a("../../core/EventHandler");c.prototype.setOptions=function(a){this._eventOutput.emit("change",a)},c.prototype.applyConstraint=function(){},c.prototype.getEnergy=function(){return 0},b.exports=c},{"../../core/EventHandler":7}],56:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this.J=new e,this.impulse=new e,d.call(this)}var d=a("./Constraint"),e=a("../../math/Vector");c.prototype=Object.create(d.prototype),c.prototype.constructor=c;var f=1e-7,g=Math.PI;c.DEFAULT_OPTIONS={equation:function(){return 0},plane:function(a,b,c){return c},period:0,dampingRatio:0},c.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},c.prototype.applyConstraint=function(a,b,c){for(var d=this.options,e=this.impulse,h=this.J,i=d.equation,j=d.plane,k=d.dampingRatio,l=d.period,m=0;m<a.length;m++){var n,o,p=a[m],q=p.velocity,r=p.position,s=p.mass;if(0===l)n=0,o=1;else{var t=4*s*g*k/l,u=4*s*g*g/(l*l);n=1/(t+c*u),o=c*u/(t+c*u)}var v=r.x,w=r.y,x=r.z,y=i(v,w,x),z=(i(v+f,r,r)-y)/f,A=(i(v,w+f,r)-y)/f,B=(i(v,w,r+f)-y)/f,C=j(v,w,x),D=(j(v+f,w,x)-C)/f,E=(j(v,w+f,x)-C)/f,F=(j(v,w,x+f)-C)/f;h.setXYZ(z+D,A+E,B+F);var G=o/c*(y+C),H=-(h.dot(q)+G)/(n+c*h.normSquared()/s);e.set(h.mult(c*H)),p.applyImpulse(e)}},b.exports=c},{"../../math/Vector":41,"./Constraint":55}],57:[function(a,b){function c(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),this.impulse=new e,this.normal=new e,this.diffP=new e,this.diffV=new e,d.call(this)}var d=a("./Constraint"),e=a("../../math/Vector");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var f=Math.PI;c.prototype.setOptions=function(a){a.anchor&&(a.anchor.position instanceof e&&(this.options.anchor=a.anchor.position),a.anchor instanceof e&&(this.options.anchor=a.anchor),a.anchor instanceof Array&&(this.options.anchor=new e(a.anchor))),void 0!==a.length&&(this.options.length=a.length),void 0!==a.dampingRatio&&(this.options.dampingRatio=a.dampingRatio),void 0!==a.period&&(this.options.period=a.period),void 0!==a.minLength&&(this.options.minLength=a.minLength)},c.prototype.setAnchor=function(a){this.options.anchor||(this.options.anchor=new e),this.options.anchor.set(a)},c.prototype.applyConstraint=function(a,b,c){var d,e,g=this.normal,h=this.diffP,i=this.diffV,j=this.impulse,k=this.options,l=k.dampingRatio,m=k.period,n=k.minLength;if(b){var o=b.velocity;d=b.position,e=b.inverseMass}else d=this.options.anchor,e=0;for(var p=this.options.length,q=0;q<a.length;q++){var r=a[q],s=r.velocity,t=r.position,u=r.inverseMass;h.set(t.sub(d)),g.set(h.normalize());var v=h.norm()-p;if(Math.abs(v)<n)return;i.set(b?s.sub(o):s);var w,x,y=1/(u+e);if(0===m)w=0,x=1;else{var z=4*y*f*l/m,A=4*y*f*f/(m*m);w=1/(z+c*A),x=c*A/(z+c*A)}var B=x/c*v,C=-(g.dot(i)+B)/(w+c/y);j.set(g.mult(c*C)),r.applyImpulse(j),b&&b.applyImpulse(j.mult(-1))}},b.exports=c},{"../../math/Vector":41,"./Constraint":55}],58:[function(a,b){function c(a){d.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),this.pDiff=new e,this.vDiff=new e,this.impulse1=new e,this.impulse2=new e}var d=a("./Constraint"),e=a("../../math/Vector");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var f=Math.PI;c.prototype.setOptions=function(a){void 0!==a.anchor&&(a.anchor instanceof e&&(this.options.anchor=a.anchor),a.anchor.position instanceof e&&(this.options.anchor=a.anchor.position),a.anchor instanceof Array&&(this.options.anchor=new e(a.anchor))),void 0!==a.length&&(this.options.length=a.length),void 0!==a.dampingRatio&&(this.options.dampingRatio=a.dampingRatio),void 0!==a.period&&(this.options.period=a.period),d.prototype.setOptions.call(this,a)},c.prototype.getEnergy=function(a,b){for(var c=this.options,d=c.length,e=c.anchor||b.position,g=Math.pow(2*f/c.period,2),h=0,i=0;i<a.length;i++){var j=a[i],k=e.sub(j.position).norm()-d;h+=.5*g*k*k}return h},c.prototype.applyConstraint=function(a,b,c){for(var d=this.options,e=this.pDiff,g=this.vDiff,h=this.impulse1,i=this.impulse2,j=d.length,k=d.anchor||b.position,l=d.period,m=d.dampingRatio,n=0;n<a.length;n++){var o=a[n],p=o.position,q=o.velocity,r=o.mass,s=o.inverseMass;e.set(p.sub(k));var t,u=e.norm()-j;if(b){var v=b.inverseMass,w=b.velocity;g.set(q.sub(w)),t=1/(s+v)}else g.set(q),t=r;var x,y;if(0===this.options.period)x=0,y=1;else{var z=4*t*f*f/(l*l),A=4*t*f*m/l;y=c*z/(A+c*z),x=1/(A+c*z)}var B=y/c*u;e.normalize(-B).sub(g).mult(c/(x+c/t)).put(h),o.applyImpulse(h),b&&(h.mult(-1).put(i),b.applyImpulse(i))}},b.exports=c},{"../../math/Vector":41,"./Constraint":55}],59:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this.J=new e,this.impulse=new e,d.call(this)}var d=a("./Constraint"),e=a("../../math/Vector");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={equation:void 0,period:0,dampingRatio:0};var f=1e-7,g=Math.PI;c.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},c.prototype.applyConstraint=function(a,b,c){for(var d=this.impulse,e=this.J,h=this.options,i=h.equation,j=h.dampingRatio,k=h.period,l=0;l<a.length;l++){var m,n,o=a[l],p=o.velocity,q=o.position,r=o.mass;if(0===k)m=0,n=1;else{var s=4*r*g*j/k,t=4*r*g*g/(k*k);m=1/(s+c*t),n=c*t/(s+c*t)}var u=q.x,v=q.y,w=q.z,x=i(u,v,w),y=(i(u+f,q,q)-x)/f,z=(i(u,v+f,q)-x)/f,A=(i(u,v,q+f)-x)/f;e.setXYZ(y,z,A);var B=n/c*x,C=-(e.dot(p)+B)/(m+c*e.normSquared()/r);d.set(e.mult(c*C)),o.applyImpulse(d)}},b.exports=c},{"../../math/Vector":41,"./Constraint":55}],60:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this.diff=new i,this.impulse=new i,h.call(this)}function d(a,b){return b.dot(a)}function e(a){var b=this.options.normal,c=this.options.distance;return a.dot(b)+c}function f(a,b,d){var e=a.position,f=a.velocity,g=a.mass,h=this.options.normal,i=this.options.onContact,j=this.options.restitution,k=this.impulse,l=this.options.drift,m=-this.options.slop,n=0;if(this._eventOutput){var o={particle:a,wall:this,overlap:b,normal:h};this._eventOutput.emit("preCollision",o),this._eventOutput.emit("collision",o)}switch(i){case c.ON_CONTACT.REFLECT:var p=m>b?-((1+j)*h.dot(f)+l/d*(b-m))/(g*d+n):-((1+j)*h.dot(f))/(g*d+n);k.set(h.mult(d*p)),a.applyImpulse(k),a.setPosition(e.add(h.mult(-b)))}this._eventOutput&&this._eventOutput.emit("postCollision",o)}function g(a,b){var d=this.options.onContact,e=a.position,f=this.options.normal;d===c.ON_CONTACT.REFLECT&&a.setPosition(e.add(f.mult(-b)))}var h=a("./Constraint"),i=a("../../math/Vector");c.prototype=Object.create(h.prototype),c.prototype.constructor=c,c.ON_CONTACT={REFLECT:0,SILENT:1},c.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:c.ON_CONTACT.REFLECT},c.prototype.setOptions=function(a){void 0!==a.normal&&(a.normal instanceof i&&(this.options.normal=a.normal.clone()),a.normal instanceof Array&&(this.options.normal=new i(a.normal))),void 0!==a.restitution&&(this.options.restitution=a.restitution),void 0!==a.drift&&(this.options.drift=a.drift),void 0!==a.slop&&(this.options.slop=a.slop),void 0!==a.distance&&(this.options.distance=a.distance),void 0!==a.onContact&&(this.options.onContact=a.onContact)},c.prototype.applyConstraint=function(a,b,c){for(var h=this.options.normal,i=0;i<a.length;i++){var j=a[i],k=j.position,l=j.velocity,m=j.radius||0,n=e.call(this,k.add(h.mult(-m))),o=d.call(this,h,l);0>=n&&(0>o?f.call(this,j,n,c):g.call(this,j,n,c))}},b.exports=c},{"../../math/Vector":41,"./Constraint":55}],61:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),e.call(this,a.sides||this.options.sides),g.call(this)}function d(a,b,d){var e,f=c.SIDES;switch(parseInt(a)){case f.LEFT:e=b[0]*d[0];break;case f.TOP:e=b[1]*d[1];break;case f.FRONT:e=b[2]*d[2];break;case f.RIGHT:e=b[0]*(1-d[0]);break;case f.BOTTOM:e=b[1]*(1-d[1]);break;case f.BACK:e=b[2]*(1-d[2])}return e}function e(a){this.components={};for(var b=this.components,c=0;c<a.length;c++){var e=a[c];b[c]=new h({normal:j[e].clone(),distance:d(e,this.options.size,this.options.origin)})}}function f(a){this.forEach(function(b){b.setOptions(a)});for(var b in a)this.options[b]=a[b]}var g=a("./Constraint"),h=a("./Wall"),i=a("../../math/Vector");c.prototype=Object.create(g.prototype),c.prototype.constructor=c,c.ON_CONTACT=h.ON_CONTACT,c.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]},c.DEFAULT_OPTIONS={sides:c.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],drift:.5,slop:0,restitution:.5,onContact:c.ON_CONTACT.REFLECT};var j={0:new i(1,0,0),1:new i(-1,0,0),2:new i(0,1,0),3:new i(0,-1,0),4:new i(0,0,1),5:new i(0,0,-1)};c.prototype.setOptions=function(a){var b=!1;void 0!==a.restitution&&f.call(this,{restitution:a.restitution}),void 0!==a.drift&&f.call(this,{drift:a.drift}),void 0!==a.slop&&f.call(this,{slop:a.slop}),void 0!==a.onContact&&f.call(this,{onContact:a.onContact}),void 0!==a.size&&(b=!0),void 0!==a.sides&&(this.options.sides=a.sides),void 0!==a.origin&&(b=!0),b&&this.setSize(a.size,a.origin)},c.prototype.setSize=function(a,b){b=b||this.options.origin,b.length<3&&(b[2]=.5),this.forEach(function(c,e){var f=d(e,a,b);c.setOptions({distance:f})}),this.options.size=a,this.options.origin=b},c.prototype.applyConstraint=function(a,b,c){this.forEach(function(d){d.applyConstraint(a,b,c)})},c.prototype.forEach=function(a){var b=this.options.sides;for(var c in this.sides)a(b[c],c)},c.prototype.rotateZ=function(a){this.forEach(function(b){var c=b.options.normal;c.rotateZ(a).put(c)})},c.prototype.rotateX=function(a){this.forEach(function(b){var c=b.options.normal;c.rotateX(a).put(c)})},c.prototype.rotateY=function(a){this.forEach(function(b){var c=b.options.normal;c.rotateY(a).put(c)})},b.exports=c},{"../../math/Vector":41,"./Constraint":55,"./Wall":60}],62:[function(a,b){b.exports={Collision:a("./Collision"),Constraint:a("./Constraint"),Curve:a("./Curve"),Distance:a("./Distance"),Snap:a("./Snap"),Surface:a("./Surface"),Wall:a("./Wall"),Walls:a("./Walls")}},{"./Collision":54,"./Constraint":55,"./Curve":56,"./Distance":57,"./Snap":58,"./Surface":59,"./Wall":60,"./Walls":61}],63:[function(a,b){function c(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),d.call(this)}var d=a("./Force");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.FORCE_FUNCTIONS={LINEAR:function(a){return a},QUADRATIC:function(a){return a.mult(a.norm())}},c.DEFAULT_OPTIONS={strength:.01,forceFunction:c.FORCE_FUNCTIONS.LINEAR},c.prototype.applyForce=function(a){var b,c,d=this.options.strength,e=this.options.forceFunction,f=this.force;for(b=0;b<a.length;b++)c=a[b],e(c.velocity).mult(-d).put(f),c.applyForce(f)},c.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},b.exports=c},{"./Force":64}],64:[function(a,b){function c(a){this.force=new d(a),this._eventOutput=new e,e.setOutputHandler(this,this._eventOutput)}var d=a("../../math/Vector"),e=a("../../core/EventHandler");c.prototype.setOptions=function(a){this._eventOutput.emit("change",a)},c.prototype.applyForce=function(a){for(var b=a.length;b--;)a[b].applyForce(this.force)},c.prototype.getEnergy=function(){return 0},b.exports=c},{"../../core/EventHandler":7,"../../math/Vector":41}],65:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this.disp=new e,d.call(this)}var d=a("./Force"),e=a("../../math/Vector");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DECAY_FUNCTIONS={LINEAR:function(a,b){return Math.max(1-1/b*a,0)},MORSE:function(a,b){var c=0===b?100:b,d=a+c*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(d/c-1),2),0)},INVERSE:function(a,b){return 1/(1-b+a)},GRAVITY:function(a,b){return 1/(1-b+a*a)}},c.DEFAULT_OPTIONS={strength:1,anchor:void 0,range:[0,1/0],cutoff:0,cap:1/0,decayFunction:c.DECAY_FUNCTIONS.GRAVITY},c.prototype.setOptions=function(a){void 0!==a.anchor&&(a.anchor.position instanceof e&&(this.options.anchor=a.anchor.position),a.anchor instanceof Array&&(this.options.anchor=new e(a.anchor)),delete a.anchor);for(var b in a)this.options[b]=a[b]},c.prototype.applyForce=function(a,b){var c=this.options,d=this.force,e=this.disp,f=c.strength,g=c.anchor||b.position,h=c.cap,i=c.cutoff,j=c.range[0],k=c.range[1],l=c.decayFunction;if(0!==f)for(var m,n,o,p,q=a.length;q--;)m=a[q],m!==b&&(n=m.mass,o=m.position,e.set(o.sub(g)),p=e.norm(),k>p&&p>j&&(d.set(e.normalize(f*n*l(p,i)).cap(h)),m.applyForce(d)))},b.exports=c},{"../../math/Vector":41,"./Force":64}],66:[function(a,b){function c(a){d.call(this,a)}var d=a("./Drag");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS=d.DEFAULT_OPTIONS,c.FORCE_FUNCTIONS=d.FORCE_FUNCTIONS,c.FORCE_FUNCTIONS={LINEAR:function(a){return a},QUADRATIC:function(a){return a.mult(a.norm())}},c.prototype.applyForce=function(a){var b,c,d=this.options.strength,e=this.options.forceFunction,f=this.force;for(b=0;b<a.length;b++)c=a[b],e(c.angularVelocity).mult(-100*d).put(f),c.applyTorque(f)},c.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},b.exports=c},{"./Drag":63}],67:[function(a,b){function c(a){h.call(this,a)}function d(){var a=this.options;a.stiffness=Math.pow(2*j/a.period,2)}function e(){var a=this.options;a.damping=4*j*a.dampingRatio/a.period}function f(){d.call(this),e.call(this)}var g=a("./Force"),h=a("./Spring"),i=a("../../math/Quaternion");c.prototype=Object.create(h.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS=h.DEFAULT_OPTIONS,c.FORCE_FUNCTIONS=h.FORCE_FUNCTIONS;var j=Math.PI;c.prototype.setOptions=function(a){void 0!==a.anchor&&(a.anchor instanceof i&&(this.options.anchor=a.anchor),a.anchor instanceof Array&&(this.options.anchor=new i(a.anchor))),void 0!==a.period&&(this.options.period=a.period),void 0!==a.dampingRatio&&(this.options.dampingRatio=a.dampingRatio),void 0!==a.length&&(this.options.length=a.length),void 0!==a.forceFunction&&(this.options.forceFunction=a.forceFunction),void 0!==a.maxLength&&(this.options.maxLength=a.maxLength),f.call(this),g.prototype.setOptions.call(this,a)},c.prototype.applyForce=function(a){var b,c,d,e,f=this.force,g=this.options,h=this.disp,i=g.stiffness,j=g.damping,k=g.length,l=g.anchor,m=g.forceFunction,n=g.maxLength;for(b=0;b<a.length;b++){if(c=a[b],h.set(l.sub(c.orientation)),d=h.norm()-k,0===d)return;e=c.mass,i*=e,j*=e,f.set(h.normalize(i*m(d,n))),j&&f.add(c.angularVelocity.mult(-j)).put(f),c.applyTorque(f)}},c.prototype.getEnergy=function(a){for(var b=this.options,c=b.length,d=b.anchor,e=b.stiffness,f=0,g=0;g<a.length;g++){var h=a[g],i=d.sub(h.orientation).norm()-c;f+=.5*e*i*i}return f},b.exports=c},{"../../math/Quaternion":38,"./Force":64,"./Spring":68}],68:[function(a,b){function c(a){g.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),this.disp=new h(0,0,0),f.call(this)}function d(){var a=this.options;a.stiffness=Math.pow(2*i/a.period,2)}function e(){var a=this.options;a.damping=4*i*a.dampingRatio/a.period}function f(){d.call(this),e.call(this)}var g=a("./Force"),h=a("../../math/Vector");c.prototype=Object.create(g.prototype),c.prototype.constructor=c;var i=Math.PI,j=150;c.FORCE_FUNCTIONS={FENE:function(a,b){var c=.99*b,d=Math.max(Math.min(a,c),-c);return d/(1-d*d/(b*b))},HOOK:function(a){return a}},c.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:c.FORCE_FUNCTIONS.HOOK},c.prototype.setOptions=function(a){void 0!==a.anchor&&(a.anchor.position instanceof h&&(this.options.anchor=a.anchor.position),a.anchor instanceof h&&(this.options.anchor=a.anchor),a.anchor instanceof Array&&(this.options.anchor=new h(a.anchor))),void 0!==a.period&&(a.period<j&&(a.period=j,console.warn("The period of a SpringTransition is capped at "+j+" ms. Use a SnapTransition for faster transitions")),this.options.period=a.period),void 0!==a.dampingRatio&&(this.options.dampingRatio=a.dampingRatio),void 0!==a.length&&(this.options.length=a.length),void 0!==a.forceFunction&&(this.options.forceFunction=a.forceFunction),void 0!==a.maxLength&&(this.options.maxLength=a.maxLength),f.call(this),g.prototype.setOptions.call(this,a)},c.prototype.applyForce=function(a,b){var c,d,e,f,g,h,i=this.force,j=this.disp,k=this.options,l=k.stiffness,m=k.damping,n=k.length,o=k.maxLength,p=k.anchor||b.position,q=k.forceFunction;for(c=0;c<a.length;c++){if(d=a[c],e=d.position,f=d.velocity,p.sub(e).put(j),g=j.norm()-n,0===g)return;h=d.mass,l*=h,m*=h,j.normalize(l*q(g,o)).put(i),m&&(b?i.add(f.sub(b.velocity).mult(-m)).put(i):i.add(f.mult(-m)).put(i)),d.applyForce(i),b&&b.applyForce(i.mult(-1))}},c.prototype.getEnergy=function(a,b){for(var c=this.options,d=c.length,e=b?b.position:c.anchor,f=c.stiffness,g=0,h=0;h<a.length;h++){var i=a[h],j=e.sub(i.position).norm()-d;g+=.5*f*j*j}return g},b.exports=c},{"../../math/Vector":41,"./Force":64}],69:[function(a,b){function c(a){e.call(this),this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this.evaluation=new f}function d(a){var b=c.FIELDS;switch(a){case b.CONSTANT:this.options.direction?this.options.direction instanceof Array&&(this.options.direction=new f(this.options.direction)):this.options.direction=new f(0,1,0);break;case b.POINT_ATTRACTOR:this.options.position?this.options.position instanceof Array&&(this.options.position=new f(this.options.position)):this.options.position=new f(0,0,0)}}var e=a("./Force"),f=a("../../math/Vector");c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.FIELDS={CONSTANT:function(a,b){b.direction.put(this.evaluation)
},LINEAR:function(a){a.put(this.evaluation)},RADIAL:function(a){a.mult(-1).put(this.evaluation)},POINT_ATTRACTOR:function(a,b){b.position.sub(a).put(this.evaluation)}},c.DEFAULT_OPTIONS={strength:.01,field:c.FIELDS.CONSTANT},c.prototype.setOptions=function(a){void 0!==a.strength&&(this.options.strength=a.strength),void 0!==a.field&&(this.options.field=a.field,d.call(this,this.options.field))},c.prototype.applyForce=function(a){var b,c,d=this.force,e=this.options.strength,f=this.options.field;for(b=0;b<a.length;b++)c=a[b],f.call(this,c.position,this.options),this.evaluation.mult(c.mass*e).put(d),c.applyForce(d)},c.prototype.getEnergy=function(a){var b,d,e=this.options.field,f=c.FIELDS,g=0;switch(e){case f.CONSTANT:g=a.length*this.options.direction.norm();break;case f.RADIAL:for(b=0;b<a.length;b++)d=a[b],g+=d.position.norm();break;case f.POINT_ATTRACTOR:for(b=0;b<a.length;b++)d=a[b],g+=d.position.sub(this.options.position).norm()}return g*=this.options.strength},b.exports=c},{"../../math/Vector":41,"./Force":64}],70:[function(a,b){b.exports={Drag:a("./Drag"),Force:a("./Force"),Repulsion:a("./Repulsion"),RotationalDrag:a("./RotationalDrag"),RotationalSpring:a("./RotationalSpring"),Spring:a("./Spring"),VectorField:a("./VectorField")}},{"./Drag":63,"./Force":64,"./Repulsion":65,"./RotationalDrag":66,"./RotationalSpring":67,"./Spring":68,"./VectorField":69}],71:[function(a,b){b.exports={PhysicsEngine:a("./PhysicsEngine"),bodies:a("./bodies"),constraints:a("./constraints"),forces:a("./forces"),integrators:a("./integrators")}},{"./PhysicsEngine":48,"./bodies":53,"./constraints":62,"./forces":70,"./integrators":73}],72:[function(a,b){var c={};c.integrateVelocity=function(a,b){var c=a.velocity,d=a.inverseMass,e=a.force;e.isZero()||(c.add(e.mult(b*d)).put(c),e.clear())},c.integratePosition=function(a,b){var c=a.position,d=a.velocity;c.add(d.mult(b)).put(c)},c.integrateAngularMomentum=function(a,b){var c=a.angularMomentum,d=a.torque;d.isZero()||(c.add(d.mult(b)).put(c),d.clear())},c.integrateOrientation=function(a,b){var c=a.orientation,d=a.angularVelocity;d.isZero()||c.add(c.multiply(d).scalarMultiply(.5*b)).put(c)},b.exports=c},{}],73:[function(a,b){b.exports={SymplecticEuler:a("./SymplecticEuler")}},{"./SymplecticEuler":72}],74:[function(a,b){function c(a){a&&a.canvasSize&&(this._canvasSize=a.canvasSize),d.apply(this,arguments),this._canvasSize||(this._canvasSize=this.getSize()),this._backBuffer=document.createElement("canvas"),this._canvasSize&&(this._backBuffer.width=this._canvasSize[0],this._backBuffer.height=this._canvasSize[1]),this._contextId=void 0}var d=a("../core/Surface");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.elementType="canvas",c.prototype.elementClass="famous-surface",c.prototype.setContent=function(){},c.prototype.deploy=function(a){this._canvasSize&&(a.width=this._canvasSize[0],a.height=this._canvasSize[1]),"2d"===this._contextId&&(a.getContext(this._contextId).drawImage(this._backBuffer,0,0),this._backBuffer.width=0,this._backBuffer.height=0)},c.prototype.recall=function(a){this.getSize();this._backBuffer.width=a.width,this._backBuffer.height=a.height,"2d"===this._contextId&&(this._backBuffer.getContext(this._contextId).drawImage(a,0,0),a.width=0,a.height=0)},c.prototype.getContext=function(a){return this._contextId=a,this._currentTarget?this._currentTarget.getContext(a):this._backBuffer.getContext(a)},c.prototype.setSize=function(a,b){d.prototype.setSize.apply(this,arguments),b&&(this._canvasSize=[b[0],b[1]]),this._currentTarget&&(this._currentTarget.width=this._canvasSize[0],this._currentTarget.height=this._canvasSize[1])},b.exports=c},{"../core/Surface":14}],75:[function(a,b){function c(a){d.call(this,a),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new e(this._container),this.setContent(this._container)}var d=a("../core/Surface"),e=a("../core/Context");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.elementType="div",c.prototype.elementClass="famous-surface",c.prototype.add=function(){return this.context.add.apply(this.context,arguments)},c.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),d.prototype.render.apply(this,arguments)},c.prototype.deploy=function(){return this._shouldRecalculateSize=!0,d.prototype.deploy.apply(this,arguments)},c.prototype.commit=function(){var a=this._size?[this._size[0],this._size[1]]:null,b=d.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||a&&(this._size[0]!==a[0]||this._size[1]!==a[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),b},b.exports=c},{"../core/Context":1,"../core/Surface":14}],76:[function(a,b){function c(a){a&&(this._method=a.method||""),d.apply(this,arguments)}var d=a("./ContainerSurface");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.elementType="form",c.prototype.deploy=function(a){return this._method&&(a.method=this._method),d.prototype.deploy.apply(this,arguments)},b.exports=c},{"./ContainerSurface":75}],77:[function(a,b){function c(){this._imageUrl=void 0,d.apply(this,arguments)}var d=a("../core/Surface"),e=[],f=[],g=[],h=!0;c.enableCache=function(){h=!0},c.disableCache=function(){h=!1},c.clearCache=function(){e=[],f=[],g=[]},c.getCache=function(){return{urlCache:e,countCache:f,nodeCache:f}},c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.elementType="img",c.prototype.elementClass="famous-surface",c.prototype.setContent=function(a){var b=e.indexOf(this._imageUrl);-1!==b&&(1===f[b]?(e.splice(b,1),f.splice(b,1),g.splice(b,1)):f[b]--),b=e.indexOf(a),-1===b?(e.push(a),f.push(1)):f[b]++,this._imageUrl=a,this._contentDirty=!0},c.prototype.deploy=function(a){var b=e.indexOf(this._imageUrl);if(void 0===g[b]&&h){var c=new Image;c.src=this._imageUrl||"",g[b]=c}a.src=this._imageUrl||""},c.prototype.recall=function(a){a.src=""},b.exports=c},{"../core/Surface":14}],78:[function(a,b){function c(a){this._placeholder=a.placeholder||"",this._value=a.value||"",this._type=a.type||"text",this._name=a.name||"",d.apply(this,arguments),this.on("click",this.focus.bind(this)),window.addEventListener("click",function(a){a.target!==this._currentTarget&&this.blur()}.bind(this))}var d=a("../core/Surface");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.elementType="input",c.prototype.elementClass="famous-surface",c.prototype.setPlaceholder=function(a){return this._placeholder=a,this._contentDirty=!0,this},c.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},c.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},c.prototype.setValue=function(a){return this._value=a,this._contentDirty=!0,this},c.prototype.setType=function(a){return this._type=a,this._contentDirty=!0,this},c.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},c.prototype.setName=function(a){return this._name=a,this._contentDirty=!0,this},c.prototype.getName=function(){return this._name},c.prototype.deploy=function(a){""!==this._placeholder&&(a.placeholder=this._placeholder),a.value=this._value,a.type=this._type,a.name=this._name},b.exports=c},{"../core/Surface":14}],79:[function(a,b){function c(a){d.apply(this,arguments),this._type="submit",a&&a.onClick&&this.setOnClick(a.onClick)}var d=a("./InputSurface");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.setOnClick=function(a){this.onClick=a},c.prototype.deploy=function(a){this.onclick&&(a.onClick=this.onClick),d.prototype.deploy.apply(this,arguments)},b.exports=c},{"./InputSurface":78}],80:[function(a,b){function c(a){this._placeholder=a.placeholder||"",this._value=a.value||"",this._name=a.name||"",this._wrap=a.wrap||"",this._cols=a.cols||"",this._rows=a.rows||"",d.apply(this,arguments),this.on("click",this.focus.bind(this))}var d=a("../core/Surface");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.elementType="textarea",c.prototype.elementClass="famous-surface",c.prototype.setPlaceholder=function(a){return this._placeholder=a,this._contentDirty=!0,this},c.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},c.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},c.prototype.setValue=function(a){return this._value=a,this._contentDirty=!0,this},c.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},c.prototype.setName=function(a){return this._name=a,this._contentDirty=!0,this},c.prototype.getName=function(){return this._name},c.prototype.setWrap=function(a){return this._wrap=a,this._contentDirty=!0,this},c.prototype.setColumns=function(a){return this._cols=a,this._contentDirty=!0,this},c.prototype.setRows=function(a){return this._rows=a,this._contentDirty=!0,this},c.prototype.deploy=function(a){""!==this._placeholder&&(a.placeholder=this._placeholder),""!==this._value&&(a.value=this._value),""!==this._name&&(a.name=this._name),""!==this._wrap&&(a.wrap=this._wrap),""!==this._cols&&(a.cols=this._cols),""!==this._rows&&(a.rows=this._rows)},b.exports=c},{"../core/Surface":14}],81:[function(a,b){function c(a){d.apply(this,arguments),this._videoUrl=void 0,this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a)}var d=a("../core/Surface");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={autoplay:!1},c.prototype.elementType="video",c.prototype.elementClass="famous-surface",c.prototype.setOptions=function(a){a.size&&this.setSize(a.size),a.classes&&this.setClasses(a.classes),a.properties&&this.setProperties(a.properties),a.autoplay&&(this.options.autoplay=a.autoplay),a.src&&(this._videoUrl=a.src,this._contentDirty=!0)},c.prototype.setContent=function(a){this._videoUrl=a,this._contentDirty=!0},c.prototype.deploy=function(a){a.src=this._videoUrl,a.autoplay=this.options.autoplay},c.prototype.recall=function(a){a.src=""},b.exports=c},{"../core/Surface":14}],82:[function(a,b){b.exports={CanvasSurface:a("./CanvasSurface"),ContainerSurface:a("./ContainerSurface"),FormContainerSurface:a("./FormContainerSurface"),ImageSurface:a("./ImageSurface"),InputSurface:a("./InputSurface"),SubmitInputSurface:a("./SubmitInputSurface"),TextareaSurface:a("./TextareaSurface"),VideoSurface:a("./VideoSurface")}},{"./CanvasSurface":74,"./ContainerSurface":75,"./FormContainerSurface":76,"./ImageSurface":77,"./InputSurface":78,"./SubmitInputSurface":79,"./TextareaSurface":80,"./VideoSurface":81}],83:[function(a,b){function c(a){this._map=a||null,this._cachedOutput=null,this._cachedInput=Number.NaN}c.create=function(a){var b=new c(a);return b.get.bind(b)},c.prototype.get=function(a){return a!==this._cachedInput&&(this._cachedInput=a,this._cachedOutput=this._map(a)),this._cachedOutput},b.exports=c},{}],84:[function(a,b){var c={inQuad:function(a){return a*a},outQuad:function(a){return-(a-=1)*a+1},inOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},inCubic:function(a){return a*a*a},outCubic:function(a){return--a*a*a+1},inOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},inQuart:function(a){return a*a*a*a},outQuart:function(a){return-(--a*a*a*a-1)},inOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},inQuint:function(a){return a*a*a*a*a},outQuint:function(a){return--a*a*a*a*a+1},inOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},inSine:function(a){return-1*Math.cos(a*(Math.PI/2))+1},outSine:function(a){return Math.sin(a*(Math.PI/2))},inOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},inExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},outExpo:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},inOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},inCirc:function(a){return-(Math.sqrt(1-a*a)-1)},outCirc:function(a){return Math.sqrt(1- --a*a)},inOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},inElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)))},outElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/c)+1)},inOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2===(a/=.5)?1:(c||(c=.3*1.5),b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)*.5+1)},inBack:function(a,b){return void 0===b&&(b=1.70158),a*a*((b+1)*a-b)},outBack:function(a,b){return void 0===b&&(b=1.70158),--a*a*((b+1)*a+b)+1},inOutBack:function(a,b){return void 0===b&&(b=1.70158),(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},inBounce:function(a){return 1-c.outBounce(1-a)},outBounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},inOutBounce:function(a){return.5>a?.5*c.inBounce(2*a):.5*c.outBounce(2*a-1)+.5}};b.exports=c},{}],85:[function(a,b){function c(a){this.method=a,this._instances=[],this.state=[]}var d=a("../utilities/Utility");c.SUPPORTS_MULTIPLE=!0,c.prototype.get=function(){for(var a=0;a<this._instances.length;a++)this.state[a]=this._instances[a].get();return this.state},c.prototype.set=function(a,b,c){for(var e=d.after(a.length,c),f=0;f<a.length;f++)this._instances[f]||(this._instances[f]=new this.method),this._instances[f].set(a[f],b,e)},c.prototype.reset=function(a){for(var b=0;b<a.length;b++)this._instances[b]||(this._instances[b]=new this.method),this._instances[b].reset(a[b])},b.exports=c},{"../utilities/Utility":95}],86:[function(a,b){function c(a){a=a||0,this.endState=new s(a),this.initState=new s,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new p,this.particle=new q,this.spring=new r({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function d(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function e(){var a=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===a?this._restTolerance:this._restTolerance*a}function f(a){this.endState.set(a),e.call(this)}function g(){this.PE.wake()}function h(){this.PE.sleep()}function i(a){this.particle.position.set(a)}function j(a){this.particle.velocity.set(a)}function k(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function m(a){this._callback=a}function n(a){var b=c.DEFAULT_OPTIONS;void 0===a.period&&(a.period=b.period),void 0===a.dampingRatio&&(a.dampingRatio=b.dampingRatio),void 0===a.velocity&&(a.velocity=b.velocity),this.spring.setOptions({period:a.period,dampingRatio:a.dampingRatio}),j.call(this,a.velocity)}function o(){if(this.PE.isSleeping()){if(this._callback){var a=this._callback;this._callback=void 0,a()}}else d.call(this)<this._absRestTolerance&&(i.call(this,this.endState),j.call(this,[0,0,0]),h.call(this))}var p=a("../physics/PhysicsEngine"),q=a("../physics/bodies/Particle"),r=a("../physics/constraints/Snap"),s=a("../math/Vector");c.SUPPORTS_MULTIPLE=3,c.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},c.prototype.reset=function(a,b){this._dimensions=a instanceof Array?a.length:0,this.initState.set(a),i.call(this,a),f.call(this,a),b&&j.call(this,b),m.call(this,void 0)},c.prototype.getVelocity=function(){return l.call(this)},c.prototype.setVelocity=function(a){this.call(this,j(a))},c.prototype.isActive=function(){return!this.PE.isSleeping()},c.prototype.halt=function(){this.set(this.get())},c.prototype.get=function(){return o.call(this),k.call(this)},c.prototype.set=function(a,b,c){return b?(this._dimensions=a instanceof Array?a.length:0,g.call(this),n.call(this,b),f.call(this,a),void m.call(this,c)):(this.reset(a),void(c&&c()))},b.exports=c},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/constraints/Snap":58}],87:[function(a,b){function c(a){a=a||0,this.endState=new s(a),this.initState=new s,this._dimensions=void 0,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new p,this.spring=new r({anchor:this.endState}),this.particle=new q,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function d(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function e(a){this.particle.setPosition(a)}function f(a){this.particle.setVelocity(a)}function g(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function h(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function i(a){this._callback=a}function j(){this.PE.wake()}function k(){this.PE.sleep()}function l(){if(this.PE.isSleeping()){if(this._callback){var a=this._callback;this._callback=void 0,a()}}else d.call(this)<this._absRestTolerance&&(e.call(this,this.endState),f.call(this,[0,0,0]),k.call(this))}function m(a){var b=c.DEFAULT_OPTIONS;void 0===a.period&&(a.period=b.period),void 0===a.dampingRatio&&(a.dampingRatio=b.dampingRatio),void 0===a.velocity&&(a.velocity=b.velocity),a.period<150&&(a.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:a.period,dampingRatio:a.dampingRatio}),f.call(this,a.velocity)}function n(){var a=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===a?this._restTolerance:this._restTolerance*a}function o(a){this.endState.set(a),n.call(this)}var p=a("../physics/PhysicsEngine"),q=a("../physics/bodies/Particle"),r=a("../physics/forces/Spring"),s=a("../math/Vector");c.SUPPORTS_MULTIPLE=3,c.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},c.prototype.reset=function(a,b){this._dimensions=a instanceof Array?a.length:0,this.initState.set(a),e.call(this,a),o.call(this,a),b&&f.call(this,b),i.call(this,void 0)},c.prototype.getVelocity=function(){return h.call(this)},c.prototype.setVelocity=function(a){this.call(this,f(a))},c.prototype.isActive=function(){return!this.PE.isSleeping()},c.prototype.halt=function(){this.set(this.get())},c.prototype.get=function(){return l.call(this),g.call(this)},c.prototype.set=function(a,b,c){return b?(this._dimensions=a instanceof Array?a.length:0,j.call(this),m.call(this,b),o.call(this,a),void i.call(this,c)):(this.reset(a),void(c&&c()))},b.exports=c},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/forces/Spring":68}],88:[function(a,b){function c(a){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(a)}function d(){if(this._callback){var a=this._callback;this._callback=void 0,a()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var b=null,c=this.currentAction[0],h=this.currentAction[1];h instanceof Object&&h.method?(b=h.method,"string"==typeof b&&(b=g[b])):b=f,this._currentMethod!==b&&(this._engineInstance=!(c instanceof Object)||b.SUPPORTS_MULTIPLE===!0||c.length<=b.SUPPORTS_MULTIPLE?new b:new e(b),this._currentMethod=b),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(h.velocity=this.velocity),this._engineInstance.set(c,h,d.bind(this))}var e=a("./MultipleTransition"),f=a("./TweenTransition"),g={};c.register=function(a){var b=!0;for(var d in a)c.registerMethod(d,a[d])||(b=!1);return b},c.registerMethod=function(a,b){return a in g?!1:(g[a]=b,!0)},c.unregisterMethod=function(a){return a in g?(delete g[a],!0):!1},c.prototype.set=function(a,b,c){if(!b)return this.reset(a),c&&c(),this;var e=[a,b];return this.actionQueue.push(e),this.callbackQueue.push(c),this.currentAction||d.call(this),this},c.prototype.reset=function(a,b){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=a,this.velocity=b,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},c.prototype.delay=function(a,b){this.set(this.get(),{duration:a,curve:function(){return 0}},b)},c.prototype.get=function(a){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(a)),this.state},c.prototype.isActive=function(){return!!this.currentAction},c.prototype.halt=function(){return this.set(this.get())},b.exports=c},{"./MultipleTransition":85,"./TweenTransition":90}],89:[function(a,b){function c(a){this._final=g.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=new f(this._finalTranslate),this.rotate=new f(this._finalRotate),this.skew=new f(this._finalSkew),this.scale=new f(this._finalScale),a&&this.set(a)}function d(){return g.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}function e(){return g.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}var f=a("./Transitionable"),g=a("../core/Transform"),h=a("../utilities/Utility");c.prototype.setTranslate=function(a,b,c){return this._finalTranslate=a,this._final=e.call(this),this.translate.set(a,b,c),this},c.prototype.setScale=function(a,b,c){return this._finalScale=a,this._final=e.call(this),this.scale.set(a,b,c),this},c.prototype.setRotate=function(a,b,c){return this._finalRotate=a,this._final=e.call(this),this.rotate.set(a,b,c),this},c.prototype.setSkew=function(a,b,c){return this._finalSkew=a,this._final=e.call(this),this.skew.set(a,b,c),this},c.prototype.set=function(a,b,c){var d=g.interpret(a);this._finalTranslate=d.translate,this._finalRotate=d.rotate,this._finalSkew=d.skew,this._finalScale=d.scale,this._final=a;var e=c?h.after(4,c):null;return this.translate.set(d.translate,b,e),this.rotate.set(d.rotate,b,e),this.skew.set(d.skew,b,e),this.scale.set(d.scale,b,e),this},c.prototype.setDefaultTransition=function(a){this.translate.setDefault(a),this.rotate.setDefault(a),this.skew.setDefault(a),this.scale.setDefault(a)},c.prototype.get=function(){return this.isActive()?d.call(this):this._final},c.prototype.getFinal=function(){return this._final},c.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},c.prototype.halt=function(){return this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt(),this._final=this.get(),this._finalTranslate=this.translate.get(),this._finalRotate=this.rotate.get(),this._finalSkew=this.skew.get(),this._finalScale=this.scale.get(),this},b.exports=c},{"../core/Transform":15,"../utilities/Utility":95,"./Transitionable":88}],90:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),a&&this.setOptions(a),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function d(a,b,c){return(1-c)*a+c*b}function e(a){return a instanceof Object?a instanceof Array?a.slice(0):Object.create(a):a}function f(a,b){var d={curve:b.curve};return b.duration&&(d.duration=b.duration),b.speed&&(d.speed=b.speed),a instanceof Object&&(void 0!==a.duration&&(d.duration=a.duration),a.curve&&(d.curve=a.curve),a.speed&&(d.speed=a.speed)),"string"==typeof d.curve&&(d.curve=c.getCurve(d.curve)),d}function g(a,b,c,d,e){var f,g=1e-7,h=(c(e)-c(e-g))/g;if(a instanceof Array){f=[];for(var i=0;i<a.length;i++)f[i]="number"==typeof a[i]?h*(a[i]-b[i])/d:0}else f=h*(a-b)/d;return f}function h(a,b,c){var e;if(a instanceof Array){e=[];for(var f=0;f<a.length;f++)e[f]="number"==typeof a[f]?d(a[f],b[f],c):a[f]}else e=d(a,b,c);return e}c.Curves={linear:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return a*(2-a)},easeInOut:function(a){return.5>=a?2*a*a:-2*a*a+4*a-1},easeOutBounce:function(a){return a*(3-2*a)},spring:function(a){return(1-a)*Math.sin(6*Math.PI*a)+a}},c.SUPPORTS_MULTIPLE=!0,c.DEFAULT_OPTIONS={curve:c.Curves.linear,duration:500,speed:0};var i={};c.registerCurve=function(a,b){return i[a]?!1:(i[a]=b,!0)},c.unregisterCurve=function(a){return i[a]?(delete i[a],!0):!1},c.getCurve=function(a){var b=i[a];if(void 0!==b)return b;throw new Error("curve not registered")},c.getCurves=function(){return i},c.prototype.setOptions=function(a){void 0!==a.curve&&(this.options.curve=a.curve),void 0!==a.duration&&(this.options.duration=a.duration),void 0!==a.speed&&(this.options.speed=a.speed)},c.prototype.set=function(a,b,c){if(!b)return this.reset(a),void(c&&c());if(this._startValue=e(this.get()),b=f(b,this.options),b.speed){var d=this._startValue;if(d instanceof Object){var g=0;for(var h in d)g+=(a[h]-d[h])*(a[h]-d[h]);b.duration=Math.sqrt(g)/b.speed}else b.duration=Math.abs(a-d)/b.speed}this._startTime=Date.now(),this._endValue=e(a),this._startVelocity=e(b.velocity),this._duration=b.duration,this._curve=b.curve,this._active=!0,this._callback=c},c.prototype.reset=function(a,b){if(this._callback){var c=this._callback;this._callback=void 0,c()}this.state=e(a),this.velocity=e(b),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},c.prototype.getVelocity=function(){return this.velocity},c.prototype.get=function(a){return this.update(a),this.state},c.prototype.update=function(a){if(this._active){if(a||(a=Date.now()),!(this._updateTime>=a)){this._updateTime=a;var b=a-this._startTime;if(b>=this._duration)this.state=this._endValue,this.velocity=g(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>b)this.state=this._startValue,this.velocity=this._startVelocity;else{var c=b/this._duration;this.state=h(this._startValue,this._endValue,this._curve(c)),this.velocity=g(this.state,this._startValue,this._curve,this._duration,c)}}}else if(this._callback){var d=this._callback;this._callback=void 0,d()}},c.prototype.isActive=function(){return this._active},c.prototype.halt=function(){this.reset(this.get())},c.registerCurve("linear",c.Curves.linear),c.registerCurve("easeIn",c.Curves.easeIn),c.registerCurve("easeOut",c.Curves.easeOut),c.registerCurve("easeInOut",c.Curves.easeInOut),c.registerCurve("easeOutBounce",c.Curves.easeOutBounce),c.registerCurve("spring",c.Curves.spring),c.customCurve=function(a,b){return a=a||0,b=b||0,function(c){return a*c+(-2*a-b+3)*c*c+(a+b-2)*c*c*c}},b.exports=c},{}],91:[function(a,b){function c(a){a=a||0,this.endState=new t(a),this.initState=new t,this.spring=new r({anchor:this.endState}),this.wall=new s,this._restTolerance=1e-10,this._dimensions=1,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new p,this.particle=new q,this.PE.addBody(this.particle),this.PE.attach([this.wall,this.spring],this.particle)}function d(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function e(){var a=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===a?this._restTolerance:this._restTolerance*a}function f(){this.PE.wake()}function g(){this.PE.sleep()}function h(a){this.endState.set(a);var b=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:0===b?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),e.call(this)}function i(a){this.particle.position.set(a)}function j(a){this.particle.velocity.set(a)}function k(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function m(a){this._callback=a}function n(){if(this.PE.isSleeping()){if(this._callback){var a=this._callback;this._callback=void 0,a()}}else{var b=d.call(this);b<this._absRestTolerance&&(g.call(this),i.call(this,this.endState),j.call(this,[0,0,0]))}}function o(a){var b=c.DEFAULT_OPTIONS;void 0===a.period&&(a.period=b.period),void 0===a.dampingRatio&&(a.dampingRatio=b.dampingRatio),void 0===a.velocity&&(a.velocity=b.velocity),void 0===a.restitution&&(a.restitution=b.restitution),this.spring.setOptions({period:a.period,dampingRatio:a.dampingRatio}),this.wall.setOptions({restitution:a.restitution}),j.call(this,a.velocity)}var p=a("../physics/PhysicsEngine"),q=a("../physics/bodies/Particle"),r=a("../physics/forces/Spring"),s=a("../physics/constraints/Wall"),t=a("../math/Vector");c.SUPPORTS_MULTIPLE=3,c.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,restitution:.5},c.prototype.reset=function(a,b){this._dimensions=a instanceof Array?a.length:0,this.initState.set(a),i.call(this,a),b&&j.call(this,b),h.call(this,a),m.call(this,void 0)},c.prototype.getVelocity=function(){return l.call(this)},c.prototype.setVelocity=function(a){this.call(this,j(a))},c.prototype.isActive=function(){return!this.PE.isSleeping()},c.prototype.halt=function(){this.set(this.get())},c.prototype.get=function(){return n.call(this),k.call(this)},c.prototype.set=function(a,b,c){return b?(this._dimensions=a instanceof Array?a.length:0,f.call(this),o.call(this,b),h.call(this,a),void m.call(this,c)):(this.reset(a),void(c&&c()))},b.exports=c},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/constraints/Wall":60,"../physics/forces/Spring":68}],92:[function(a,b){b.exports={CachedMap:a("./CachedMap"),Easing:a("./Easing"),MultipleTransition:a("./MultipleTransition"),SnapTransition:a("./SnapTransition"),SpringTransition:a("./SpringTransition"),Transitionable:a("./Transitionable"),TransitionableTransform:a("./TransitionableTransform"),TweenTransition:a("./TweenTransition"),WallTransition:a("./WallTransition")}},{"./CachedMap":83,"./Easing":84,"./MultipleTransition":85,"./SnapTransition":86,"./SpringTransition":87,"./Transitionable":88,"./TransitionableTransform":89,"./TweenTransition":90,"./WallTransition":91}],93:[function(a,b){var c={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};b.exports=c},{}],94:[function(a,b){function c(a){return j.on(k,a),a}function d(a,b){var d=l(),e=function(){var c=l();c-d>=b&&(a.apply(this,arguments),j.removeListener(k,e))};return c(e)}function e(a,b){var d=l(),e=function(){var c=l();c-d>=b&&(a.apply(this,arguments),d=l())};return c(e)}function f(a,b){if(void 0===b)return void 0;var d=function(){b--,0>=b&&(a.apply(this,arguments),h(d))};return c(d)}function g(a,b){b=b||1;var d=b,e=function(){b--,0>=b&&(a.apply(this,arguments),b=d)};return c(e)}function h(a){j.removeListener(k,a)}function i(a,b){var c,e,f,g,i;return function(){e=this,i=arguments,f=l();var j=function(){var h=l-f;b>h?c=d(j,b-h):(c=null,g=a.apply(e,i))};return h(c),c=d(j,b),g}}var j=a("../core/Engine"),k="prerender",l=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};b.exports={setTimeout:d,setInterval:e,debounce:i,after:f,every:g,clear:h}},{"../core/Engine":4}],95:[function(a,b){var c={};c.Direction={X:0,Y:1,Z:2},c.after=function(a,b){var c=a;
return function(){c--,0===c&&b.apply(this,arguments)}},c.loadURL=function(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===this.readyState&&b&&b(this.responseText)},c.open("GET",a),c.send()},c.createDocumentFragmentFromHTML=function(a){var b=document.createElement("div");b.innerHTML=a;for(var c=document.createDocumentFragment();b.hasChildNodes();)c.appendChild(b.firstChild);return c},c.clone=function(a){var b;if("object"==typeof a){b=a instanceof Array?[]:{};for(var d in a)if("object"==typeof a[d]&&null!==a[d])if(a[d]instanceof Array){b[d]=new Array(a[d].length);for(var e=0;e<a[d].length;e++)b[d][e]=c.clone(a[d][e])}else b[d]=c.clone(a[d]);else b[d]=a[d]}else b=a;return b},b.exports=c},{}],96:[function(a,b){b.exports={KeyCodes:a("./KeyCodes"),Timer:a("./Timer"),Utility:a("./Utility")}},{"./KeyCodes":93,"./Timer":94,"./Utility":95}],97:[function(a,b){function c(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS||c.DEFAULT_OPTIONS),this._optionsManager=new f(this.options),a&&this.setOptions(a),this._eventInput=new e,this._eventOutput=new e,e.setInputHandler(this,this._eventInput),e.setOutputHandler(this,this._eventOutput),this._id=d.register(this)}var d=a("../core/Entity"),e=(a("../core/Transform"),a("../core/EventHandler")),f=a("../core/OptionsManager");c.DEFAULT_OPTIONS={},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},c.prototype.getOptions=function(a){return this._optionsManager.getOptions(a)},c.prototype.render=function(){return this._id},c.prototype.commit=function(){},b.exports=c},{"../core/Entity":5,"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Transform":15}],98:[function(a,b){function c(){j.apply(this,arguments),this.state=new h(0),this._isOpen=!1,this.setOutputFunction(function(a,b,c){var e=d.call(this),g=this.options.direction===i.Direction.X?f.translate(e*b,0,.001*(e-1)*b):f.translate(0,e*b,.001*(e-1)*b),h=a.render();if(this.options.stackRotation){var j=this.options.stackRotation*c*(1-e);h={transform:f.rotateZ(j),origin:[.5,.5],target:h}}return{transform:g,size:a.getSize(),target:h}})}function d(a){return a?this._isOpen?1:0:this.state.get()}function e(a,b,c){this.state.halt(),this.state.set(a,b,c)}var f=a("../core/Transform"),g=a("../core/OptionsManager"),h=a("../transitions/Transitionable"),i=a("../utilities/Utility"),j=a("./SequentialLayout");c.prototype=Object.create(j.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS=g.patch(j.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0}),c.prototype.getSize=function(){var a=j.prototype.getSize.apply(this,arguments),b=this._items?this._items.get().getSize():[0,0];b||(b=[0,0]);var c=d.call(this),e=1-c;return[b[0]*e+a[0]*c,b[1]*e+a[1]*c]},c.prototype.isOpen=function(){return this._isOpen},c.prototype.open=function(a){this._isOpen=!0,e.call(this,1,this.options.transition,a)},c.prototype.close=function(a){this._isOpen=!1,e.call(this,0,this.options.transition,a)},c.prototype.toggle=function(a){this._isOpen?this.close(a):this.open(a)},b.exports=c},{"../core/OptionsManager":10,"../core/Transform":15,"../transitions/Transitionable":88,"../utilities/Utility":95,"./SequentialLayout":110}],99:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new k(this.options),a&&this.setOptions(a),this._position=new l(0),this._direction=d(this.options.side),this._orientation=e(this.options.side),this._isOpen=!1,this._cachedLength=0,this.drawer=new i,this.content=new i,this._eventInput=new m,this._eventOutput=new m,m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput),this._eventInput.on("update",g.bind(this)),this._eventInput.on("end",h.bind(this))}function d(a){var b=c.SIDES;return a===b.LEFT||a===b.RIGHT?n:o}function e(a){var b=c.SIDES;return a===b.LEFT||a===b.TOP?1:-1}function f(a){var b,c=this.options;if(c.drawerLength)b=c.drawerLength;else{var d=a.getSize();b=d?d[this._direction]:c.drawerLength}return this._orientation*b}function g(a){var b,c,d=this.getPosition()+a.delta;this._cachedLength=f.call(this,this.drawer),1===this._orientation?(b=0,c=this._cachedLength):(b=this._cachedLength,c=0),d>c?d=c:b>d&&(d=b),this.setPosition(d)}function h(a){var b=a.velocity,c=this._orientation*this.getPosition(),d=this.options,e=this._orientation*this._cachedLength,f=d.positionThreshold||e/2,g=d.velocityThreshold;if(d.transition instanceof Object&&(d.transition.velocity=a.velocity),0===c)return void(this._isOpen=!1);if(c===e)return void(this._isOpen=!0);var h=Math.abs(b)>g||!this._isOpen&&c>f||this._isOpen&&f>c;h?this.toggle():this.reset()}var i=a("../core/RenderNode"),j=a("../core/Transform"),k=a("../core/OptionsManager"),l=a("../transitions/Transitionable"),m=a("../core/EventHandler"),n=0,o=1;c.SIDES={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3},c.DEFAULT_OPTIONS={side:c.SIDES.LEFT,drawerLength:0,velocityThreshold:0,positionThreshold:0,transition:!0},c.prototype.setOptions=function(a){this._optionsManager.setOptions(a),void 0!==a.side&&(this._direction=d(a.side),this._orientation=e(a.side))},c.prototype.open=function(a,b){a instanceof Function&&(b=a),void 0===a&&(a=this.options.transition),this._cachedLength=f.call(this,this.drawer),this.setPosition(this._cachedLength,a,b),this._isOpen||(this._isOpen=!0,this._eventOutput.emit("open"))},c.prototype.close=function(a,b){a instanceof Function&&(b=a),void 0===a&&(a=this.options.transition),this.setPosition(0,a,b),this._isOpen&&(this._isOpen=!1,this._eventOutput.emit("close"))},c.prototype.setPosition=function(a,b,c){this._position.isActive()&&this._position.halt(),this._position.set(a,b,c)},c.prototype.getPosition=function(){return this._position.get()},c.prototype.setProgress=function(a,b,c){return this._position.set(a*this._cachedLength,b,c)},c.prototype.getProgress=function(){return this._position.get()/this._cachedLength},c.prototype.toggle=function(a){this._isOpen?this.close(a):this.open(a)},c.prototype.reset=function(a){this._isOpen?this.open(a):this.close(a)},c.prototype.isOpen=function(){return this._isOpen},c.prototype.render=function(){var a=this.getPosition();(!this._isOpen&&0>a&&1===this._orientation||a>0&&-1===this._orientation)&&(a=0,this.setPosition(a));var b=this._direction===n?j.translate(a,0,0):j.translate(0,a,0);return[{transform:j.behind,target:this.drawer.render()},{transform:b,target:this.content.render()}]},b.exports=c},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88}],100:[function(a,b){function c(a){this._currentTarget=null,this._size=[void 0,void 0],this._controller=new i(a),this._controller.inTransformFrom(e.create(d.bind(this,1e-4))),this._controller.outTransformFrom(e.create(d.bind(this,-1e-4))),this._eventInput=new g,g.setInputHandler(this,this._eventInput),this._entityId=f.register(this),a&&this.setOptions(a)}function d(a,b){return h.translate(this._size[0]*(1-b),0,a*(1-b))}var e=a("../transitions/CachedMap"),f=a("../core/Entity"),g=a("../core/EventHandler"),h=a("../core/Transform"),i=a("./RenderController");c.prototype.show=function(a){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=a,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},c.prototype.setOptions=function(a){this._controller.setOptions(a)},c.prototype.render=function(){return this._entityId},c.prototype.commit=function(a){return this._size[0]=a.size[0],this._size[1]=a.size[1],{transform:a.transform,opacity:a.opacity,origin:a.origin,size:a.size,target:this._controller.render()}},b.exports=c},{"../core/Entity":5,"../core/EventHandler":7,"../core/Transform":15,"../transitions/CachedMap":83,"./RenderController":106}],101:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this.optionsManager=new h(this.options),a&&this.setOptions(a),this.id=f.register(this),this._ratios=new j(this.options.ratios),this._nodes=[],this._size=[0,0],this._cachedDirection=null,this._cachedLengths=[],this._cachedTransforms=null,this._ratiosDirty=!1,this._eventOutput=new i,i.setOutputHandler(this,this._eventOutput)}function d(a,b,d){var e,f,h,i,j=0,k=b,l=0;for(this._cachedLengths=[],this._cachedTransforms=[],i=0;i<a.length;i++)f=a[i],h=this._nodes[i],"number"!=typeof f?k-=h.getSize()[d]||0:l+=f;for(i=0;i<a.length;i++)h=this._nodes[i],f=a[i],b="number"==typeof f?k*f/l:h.getSize()[d],e=d===c.DIRECTION_X?g.translate(j,0,0):g.translate(0,j,0),this._cachedTransforms.push(e),this._cachedLengths.push(b),j+=b}function e(a,b){for(var c=0;c<a.length;c++)if("number"!=typeof a[c]&&this._nodes[c].getSize()[b]!==this._cachedLengths[c])return!0;return!1}var f=a("../core/Entity"),g=a("../core/Transform"),h=a("../core/OptionsManager"),i=a("../core/EventHandler"),j=a("../transitions/Transitionable");c.DIRECTION_X=0,c.DIRECTION_Y=1,c.DEFAULT_OPTIONS={direction:c.DIRECTION_X,transition:!1,ratios:[]},c.prototype.render=function(){return this.id},c.prototype.setOptions=function(a){this.optionsManager.setOptions(a)},c.prototype.sequenceFrom=function(a){if(this._nodes=a,0===this._ratios.get().length){for(var b=[],c=0;c<this._nodes.length;c++)b.push(1);this.setRatios(b)}},c.prototype.setRatios=function(a,b,c){void 0===b&&(b=this.options.transition);var d=this._ratios;0===d.get().length&&(b=void 0),d.isActive()&&d.halt(),d.set(a,b,c),this._ratiosDirty=!0},c.prototype.getSize=function(){return this._size},c.prototype.commit=function(a){var b,c=a.size,f=a.transform,h=a.origin,i=a.opacity,j=this._ratios.get(),k=this.options.direction,l=c[k];(l!==this._size[k]||this._ratiosDirty||this._ratios.isActive()||k!==this._cachedDirection||e.call(this,j,k))&&(d.call(this,j,l,k),l!==this._size[k]&&(this._size[0]=c[0],this._size[1]=c[1]),k!==this._cachedDirection&&(this._cachedDirection=k),this._ratiosDirty&&(this._ratiosDirty=!1));for(var m=[],n=0;n<j.length;n++)b=[void 0,void 0],l=this._cachedLengths[n],b[k]=l,m.push({transform:this._cachedTransforms[n],size:b,target:this._nodes[n].render()});return c&&0!==h[0]&&0!==h[1]&&(f=g.moveThen([-c[0]*h[0],-c[1]*h[1],0],f)),{transform:f,size:c,opacity:i,target:m}},b.exports=c},{"../core/Entity":5,"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Transform":15,"../transitions/Transitionable":88}],102:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new f(this.options),a&&this.setOptions(a),this.angle=new e(0),this.frontNode=void 0,this.backNode=void 0,this.flipped=!1}var d=a("../core/Transform"),e=a("../transitions/Transitionable"),f=(a("../core/RenderNode"),a("../core/OptionsManager"));c.DIRECTION_X=0,c.DIRECTION_Y=1;var g=1;c.DEFAULT_OPTIONS={transition:!0,direction:c.DIRECTION_X},c.prototype.flip=function(a,b){var c=this.flipped?0:Math.PI;this.setAngle(c,a,b),this.flipped=!this.flipped},c.prototype.setAngle=function(a,b,c){void 0===b&&(b=this.options.transition),this.angle.isActive()&&this.angle.halt(),this.angle.set(a,b,c)},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},c.prototype.setFront=function(a){this.frontNode=a},c.prototype.setBack=function(a){this.backNode=a},c.prototype.render=function(){var a,b,e=this.angle.get();this.options.direction===c.DIRECTION_X?(a=d.rotateY(e),b=d.rotateY(e+Math.PI)):(a=d.rotateX(e),b=d.rotateX(e+Math.PI));var f=[];return this.frontNode&&f.push({transform:a,target:this.frontNode.render()}),this.backNode&&f.push({transform:d.moveThen([0,0,g],b),target:this.backNode.render()}),f},b.exports=c},{"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88}],103:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this.optionsManager=new l(this.options),a&&this.setOptions(a),this.id=g.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new j,j.setOutputHandler(this,this._eventOutput)}function d(a,b,c){var d=[a[0],a[1]];d[0]-=this.options.gutterSize[0]*(b-1),d[1]-=this.options.gutterSize[1]*(c-1);for(var g,h=Math.round(d[1]/c),i=Math.round(d[0]/b),j=0,k=0,l=0;c>l;l++){g=0;for(var m=0;b>m;m++)void 0===this._modifiers[k]?e.call(this,k,[i,h],[g,j,0],1):f.call(this,k,[i,h],[g,j,0],1),k++,g+=i+this.options.gutterSize[0];j+=h+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[a[0],a[1]],this._activeCount=c*b,l=this._activeCount;l<this._modifiers.length;l++)f.call(this,l,[Math.round(i),Math.round(h)],[0,0],0);this._eventOutput.emit("reflow")}function e(a,b,c,d){var e={transform:new n(h.translate.apply(null,c)),opacity:new m(d),size:new m(b)},f=new k({transform:e.transform,opacity:e.opacity,size:e.size});this._states[a]=e,this._modifiers[a]=f}function f(a,b,c,d){var e=this._states[a],f=e.size,g=e.opacity,h=e.transform,i=this.options.transition;h.halt(),g.halt(),f.halt(),h.setTranslate(c,i),f.set(b,i),g.set(d,i)}var g=a("../core/Entity"),h=(a("../core/RenderNode"),a("../core/Transform")),i=a("../core/ViewSequence"),j=a("../core/EventHandler"),k=a("../core/Modifier"),l=a("../core/OptionsManager"),m=a("../transitions/Transitionable"),n=a("../transitions/TransitionableTransform");c.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},c.prototype.render=function(){return this.id},c.prototype.setOptions=function(a){return this.optionsManager.setOptions(a)},c.prototype.sequenceFrom=function(a){a instanceof Array&&(a=new i(a)),this.sequence=a},c.prototype.commit=function(a){var b=a.transform,c=a.opacity,e=a.origin,f=a.size,g=this.options.dimensions[0],i=this.options.dimensions[1];(f[0]!==this._contextSizeCache[0]||f[1]!==this._contextSizeCache[1]||g!==this._dimensionsCache[0]||i!==this._dimensionsCache[1])&&d.call(this,f,g,i);for(var j=this.sequence,k=[],l=0;j&&l<this._modifiers.length;){var m=j.get(),n=this._modifiers[l];l>=this._activeCount&&this._states[l].opacity.isActive()&&(this._modifiers.splice(l,1),this._states.splice(l,1)),m&&k.push(n.modify({origin:e,target:m.render()})),j=j.getNext(),l++}return f&&(b=h.moveThen([-f[0]*e[0],-f[1]*e[1],0],b)),{transform:b,opacity:c,size:f,target:k}},b.exports=c},{"../core/Entity":5,"../core/EventHandler":7,"../core/Modifier":9,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../core/ViewSequence":17,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89}],104:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new j(this.options),a&&this.setOptions(a),this._entityId=g.register(this),this.header=new h,this.footer=new h,this.content=new h}function d(a,b){var c=a.getSize();return c?c[this.options.direction]:b}function e(a){return this.options.direction===c.DIRECTION_X?i.translate(a,0,0):i.translate(0,a,0)}function f(a,b){return this.options.direction===c.DIRECTION_X?[a,b[1]]:[b[0],a]}var g=a("../core/Entity"),h=a("../core/RenderNode"),i=a("../core/Transform"),j=a("../core/OptionsManager");c.DIRECTION_X=0,c.DIRECTION_Y=1,c.DEFAULT_OPTIONS={direction:c.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},c.prototype.render=function(){return this._entityId},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},c.prototype.commit=function(a){var b=a.transform,c=a.origin,g=a.size,h=a.opacity,j=void 0!==this.options.headerSize?this.options.headerSize:d.call(this,this.header,this.options.defaultHeaderSize),k=void 0!==this.options.footerSize?this.options.footerSize:d.call(this,this.footer,this.options.defaultFooterSize),l=g[this.options.direction]-j-k;g&&(b=i.moveThen([-g[0]*c[0],-g[1]*c[1],0],b));var m=[{size:f.call(this,j,g),target:this.header.render()},{transform:e.call(this,j),size:f.call(this,l,g),target:this.content.render()},{transform:e.call(this,j+l),size:f.call(this,k,g),target:this.footer.render()}];return{transform:b,opacity:h,size:g,target:m}},b.exports=c},{"../core/Entity":5,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15}],105:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),a&&this.setOptions(a),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var d=a("../core/Transform"),e=a("../core/Modifier"),f=a("../core/RenderNode"),g=a("../utilities/Utility"),h=a("../core/OptionsManager"),i=a("../transitions/Transitionable"),j=a("../transitions/TransitionableTransform");c.DEFAULT_OPTIONS={inTransform:d.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],inAlign:[.5,.5],outTransform:d.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],outAlign:[.5,.5],showTransform:d.identity,showOpacity:1,showOrigin:[.5,.5],showAlign:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},c.prototype.show=function(a,b,c){if(!a)return this.hide(c);if(b instanceof Function&&(c=b,b=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,a,b,c));this.hide()}this._showing=!0;var d={transform:new j(this.options.inTransform),origin:new i(this.options.inOrigin),align:new i(this.options.inAlign),opacity:new i(this.options.inOpacity)},h=new e({transform:d.transform,opacity:d.opacity,origin:d.origin,align:d.align}),k=new f;k.add(h).add(a),this.nodes.push(k),this.states.push(d),this.transforms.push(h);var l=c?g.after(3,c):void 0;b||(b=this.options.inTransition),d.transform.set(this.options.showTransform,b,l),d.opacity.set(this.options.showOpacity,b,l),d.origin.set(this.options.showOrigin,b,l),d.align.set(this.options.showAlign,b,l)},c.prototype.hide=function(a,b){if(this._showing){this._showing=!1,a instanceof Function&&(b=a,a=void 0);var c=this.nodes[this.nodes.length-1],d=this.transforms[this.transforms.length-1],e=this.states[this.states.length-1],f=g.after(3,function(){this.nodes.splice(this.nodes.indexOf(c),1),this.states.splice(this.states.indexOf(e),1),this.transforms.splice(this.transforms.indexOf(d),1),b&&b.call(this)}.bind(this));a||(a=this.options.outTransition),e.transform.set(this.options.outTransform,a,f),e.opacity.set(this.options.outOpacity,a,f),e.origin.set(this.options.outOrigin,a,f),e.align.set(this.options.outAlign,a,f)}},c.prototype.render=function(){for(var a=[],b=0;b<this.nodes.length;b++)a.push(this.nodes[b].render());return a},b.exports=c},{"../core/Modifier":9,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89,"../utilities/Utility":95}],106:[function(a,b){function c(){i.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=c.DefaultMap.transform,this.inOpacityMap=c.DefaultMap.opacity,this.inOriginMap=c.DefaultMap.origin,this.outTransformMap=c.DefaultMap.transform,this.outOpacityMap=c.DefaultMap.opacity,this.outOriginMap=c.DefaultMap.origin,this._output=[]}function d(a,b){return a(b.get())}var e=a("../core/Modifier"),f=a("../core/RenderNode"),g=a("../core/Transform"),h=a("../transitions/Transitionable"),i=a("../core/View");c.prototype=Object.create(i.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},c.DefaultMap={transform:function(){return g.identity},opacity:function(a){return a},origin:null},c.prototype.inTransformFrom=function(a){if(a instanceof Function)this.inTransformMap=a;else{if(!a||!a.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=a.get.bind(a)}return this},c.prototype.inOpacityFrom=function(a){if(a instanceof Function)this.inOpacityMap=a;else{if(!a||!a.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=a.get.bind(a)}return this},c.prototype.inOriginFrom=function(a){if(a instanceof Function)this.inOriginMap=a;else{if(!a||!a.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=a.get.bind(a)}return this},c.prototype.outTransformFrom=function(a){if(a instanceof Function)this.outTransformMap=a;else{if(!a||!a.get)throw new Error("outTransformFrom takes only function or getter object");this.outTransformMap=a.get.bind(a)}return this},c.prototype.outOpacityFrom=function(a){if(a instanceof Function)this.outOpacityMap=a;else{if(!a||!a.get)throw new Error("outOpacityFrom takes only function or getter object");this.outOpacityMap=a.get.bind(a)}return this},c.prototype.outOriginFrom=function(a){if(a instanceof Function)this.outOriginMap=a;else{if(!a||!a.get)throw new Error("outOriginFrom takes only function or getter object");this.outOriginMap=a.get.bind(a)}return this},c.prototype.show=function(a,b,c){if(!a)return this.hide(c);if(b instanceof Function&&(c=b,b=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=a:(this._nextRenderable=a,this.hide(function(){this._nextRenderable===a&&this.show(this._nextRenderable,c),this._nextRenderable=null})));this.hide()}var g=null,i=this._renderables.indexOf(a);if(i>=0){this._showing=i,g=this._states[i],g.halt();var j=this._outgoingRenderables.indexOf(a);j>=0&&this._outgoingRenderables.splice(j,1)}else{g=new h(0);var k=new e({transform:this.inTransformMap?d.bind(this,this.inTransformMap,g):null,opacity:this.inOpacityMap?d.bind(this,this.inOpacityMap,g):null,origin:this.inOriginMap?d.bind(this,this.inOriginMap,g):null}),l=new f;l.add(k).add(a),this._showing=this._nodes.length,this._nodes.push(l),this._modifiers.push(k),this._states.push(g),this._renderables.push(a)}b||(b=this.options.inTransition),g.set(1,b,c)},c.prototype.hide=function(a,b){if(!(this._showing<0)){var c=this._showing;this._showing=-1,a instanceof Function&&(b=a,a=void 0);var e=this._nodes[c],f=this._modifiers[c],g=this._states[c],h=this._renderables[c];f.transformFrom(this.outTransformMap?d.bind(this,this.outTransformMap,g):null),f.opacityFrom(this.outOpacityMap?d.bind(this,this.outOpacityMap,g):null),f.originFrom(this.outOriginMap?d.bind(this,this.outOriginMap,g):null),this._outgoingRenderables.indexOf(h)<0&&this._outgoingRenderables.push(h),a||(a=this.options.outTransition),g.halt(),g.set(0,a,function(a,c,d,e){if(this._outgoingRenderables.indexOf(e)>=0){var f=this._nodes.indexOf(a);this._nodes.splice(f,1),this._modifiers.splice(f,1),this._states.splice(f,1),this._renderables.splice(f,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(e),1),this._showing>=f&&this._showing--}b&&b.call(this)}.bind(this,e,f,g,h))}},c.prototype.render=function(){var a=this._output;a.length>this._nodes.length&&a.splice(this._nodes.length);for(var b=0;b<this._nodes.length;b++)a[b]=this._nodes[b].render();return a},b.exports=c},{"../core/Modifier":9,"../core/RenderNode":11,"../core/Transform":15,"../core/View":16,"../transitions/Transitionable":88}],107:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new g(this.options),a&&this.setOptions(a),this.container=new d(this.options.container),this.scrollview=new f(this.options.scrollview),this.container.add(this.scrollview),this._eventInput=new e,e.setInputHandler(this,this._eventInput),this._eventInput.pipe(this.scrollview),this._eventOutput=new e,e.setOutputHandler(this,this._eventOutput),this.container.pipe(this._eventOutput),this.scrollview.pipe(this._eventOutput)}var d=a("../surfaces/ContainerSurface"),e=a("../core/EventHandler"),f=a("./Scrollview"),g=(a("../utilities/Utility"),a("../core/OptionsManager"));c.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{}},c.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},c.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},c.prototype.getSize=function(){return this.container.getSize.apply(this.container,arguments)},c.prototype.render=function(){return this.container.render()},b.exports=c},{"../core/EventHandler":7,"../core/OptionsManager":10,"../surfaces/ContainerSurface":75,"../utilities/Utility":95,"./Scrollview":109}],108:[function(a,b){function c(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new j(this.options),a&&this._optionsManager.setOptions(a),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new i,this.group.add({render:g.bind(this)}),this._entityId=h.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput)}function d(a){a||(a=this._contextSize);var b=this.options.direction;return void 0===a[b]?this._contextSize[b]:a[b]}function e(a,b,c){var e=a.getSize?a.getSize():this._contextSize,f=this._outputFunction(b);return c.push({transform:f,target:a.render()}),d.call(this,e)}function f(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?d.call(this,this.getCumulativeSize()):d.call(this,this._contextSize)}function g(){for(var a=null,b=this._position,c=[],g=-this._positionOffset,h=f.call(this),i=this._node;i&&g-b<h+this.options.margin;)g+=e.call(this,i,g,c),i=i.getNext?i.getNext():null;var j=this._node,k=d.call(this,j.getSize());if(h>g){for(;j&&h>k;)j=j.getPrevious(),j&&(k+=d.call(this,j.getSize()));for(j=this._node;j&&h>k;)j=j.getNext(),j&&(k+=d.call(this,j.getSize()))}for(!i&&h-o>g-b?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:g-h})):!this._node.getPrevious()&&-o>b?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),i=this._node&&this._node.getPrevious?this._node.getPrevious():null,g=-this._positionOffset,i&&(a=i.getSize?i.getSize():this._contextSize,g-=d.call(this,a));i&&g-b>-(h+this.options.margin);)e.call(this,i,g,c),i=i.getPrevious?i.getPrevious():null,i&&(a=i.getSize?i.getSize():this._contextSize,g-=d.call(this,a));return c}var h=a("../core/Entity"),i=a("../core/Group"),j=a("../core/OptionsManager"),k=a("../core/Transform"),l=a("../utilities/Utility"),m=a("../core/ViewSequence"),n=a("../core/EventHandler");c.DEFAULT_OPTIONS={direction:l.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var o=0;c.prototype.getCumulativeSize=function(a){return void 0===a&&(a=this._node._.cumulativeSizes.length-1),this._node._.getSize(a)},c.prototype.setOptions=function(a){a.groupScroll!==this.options.groupScroll&&(a.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(a)},c.prototype.onEdge=function(){return this._onEdge},c.prototype.outputFrom=function(a,b){a||(a=function(a){return this.options.direction===l.Direction.X?k.translate(a,0):k.translate(0,a)}.bind(this),b||(b=a)),this._outputFunction=a,this._masterOutputFunction=b?b:function(b){return k.inverse(a(-b))}},c.prototype.positionFrom=function(a){a instanceof Function?this._positionGetter=a:a&&a.get?this._positionGetter=a.get.bind(a):(this._positionGetter=null,this._position=a),this._positionGetter&&(this._position=this._positionGetter.call(this))},c.prototype.sequenceFrom=function(a){a instanceof Array&&(a=new m({array:a})),this._node=a,this._positionOffset=0},c.prototype.getSize=function(a){return a?this._contextSize:this._size},c.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},c.prototype.commit=function(a){var b=a.transform,c=a.opacity,d=a.origin,e=a.size;this.options.clipSize||e[0]===this._contextSize[0]&&e[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=e[0],this._contextSize[1]=e[1],this.options.direction===l.Direction.X?(this._size[0]=f.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=f.call(this)));var g=this._masterOutputFunction(-this._position);return{transform:k.multiply(b,g),size:e,opacity:c,origin:d,target:this.group.render()}},b.exports=c},{"../core/Entity":5,"../core/EventHandler":7,"../core/Group":8,"../core/OptionsManager":10,"../core/Transform":15,"../core/ViewSequence":17,"../utilities/Utility":95}],109:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),this._scroller=new w(this.options),this.sync=new y(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:void 0!==this.options.preventDefault?this.options.preventDefault:this.options.direction!==x.Direction.Y}),this._physicsEngine=new p,this._particle=new q,this._physicsEngine.addBody(this._particle),this.spring=new s({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new r({forceFunction:r.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new r({forceFunction:r.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=B.NONE,this._onEdge=C.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new t,this._eventOutput=new t,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),t.setInputHandler(this,this._eventInput),t.setOutputHandler(this,this._eventOutput),g.call(this),a&&this.setOptions(a)}function d(a){this._touchCount=a.count,void 0===a.count&&(this._touchCount=1),i.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function e(a){var b=-a.velocity,c=-a.delta;if(this._onEdge!==C.NONE&&a.slip&&(0>b&&this._onEdge===C.TOP||b>0&&this._onEdge===C.BOTTOM?this._earlyEnd||(f.call(this,a),this._earlyEnd=!0):this._earlyEnd&&Math.abs(b)>Math.abs(this.getVelocity())&&d.call(this,a)),!this._earlyEnd){if(this._touchVelocity=b,a.slip){var e=this.options.speedLimit;-e>b?b=-e:b>e&&(b=e),this.setVelocity(b);var g=16*e;c>g?c=g:-g>c&&(c=-g)}this.setPosition(this.getPosition()+c),this._displacement+=c,this._springState===B.NONE&&n.call(this)}}function f(a){if(this._touchCount=a.count||0,!this._touchCount){i.call(this),this._onEdge!==C.NONE&&m.call(this,this._edgeSpringPosition,B.EDGE),h.call(this);var b=-a.velocity,c=this.options.speedLimit;a.slip&&(c*=this.options.edgeGrip),-c>b?b=-c:b>c&&(b=c),this.setVelocity(b),this._touchVelocity=0,this._needsPaginationCheck=!0}}function g(){this._eventInput.bindThis(this),this._eventInput.on("start",d),this._eventInput.on("update",e),this._eventInput.on("end",f),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(a){this._edgeSpringPosition=a.position,k.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(a){this._springState===B.NONE&&n.call(this),this._displacement=a.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==B.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function h(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function i(){this._springState=B.NONE,this._physicsEngine.detachAll()}function j(a){var b=this.options.direction,c=a.getSize();
return c?c[b]:this._scroller.getSize()[b]}function k(a){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=a,this._touchCount||this._springState===B.EDGE||m.call(this,this._edgeSpringPosition,B.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(i.call(this),h.call(this))}function l(){if(!this._touchCount&&this._springState!==B.EDGE){var a=this.getVelocity();if(!(Math.abs(a)>=this.options.pageStopSpeed)){var b=this.getPosition(),c=Math.abs(a)>this.options.pageSwitchSpeed,d=j.call(this,this._node),e=b>.5*d,f=a>0,g=0>a;this._needsPaginationCheck=!1,e&&!c||c&&f?this.goToNextPage():c&&g?this.goToPreviousPage():m.call(this,0,B.PAGE)}}}function m(a,b){var c;b===B.EDGE?(this._edgeSpringPosition=a,c={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):b===B.PAGE&&(this._pageSpringPosition=a,c={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(c),b&&!this._springState&&(i.call(this),this._springState=b,h.call(this)),this._springState=b}function n(){var a=0,b=this.getPosition();b+=(0>b?-.5:.5)>>0;for(var c=j.call(this,this._node),d=this._node.getNext();a+b>=c&&d;)a-=c,this._scroller.sequenceFrom(d),this._node=d,d=this._node.getNext(),c=j.call(this,this._node);for(var e,f=this._node.getPrevious();0>=a+b&&f;)e=j.call(this,f),this._scroller.sequenceFrom(f),this._node=f,a+=e,f=this._node.getPrevious();a&&o.call(this,a),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*c&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*c&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function o(a){this._edgeSpringPosition+=a,this._pageSpringPosition+=a,this.setPosition(this.getPosition()+a),this._totalShift+=a,this._springState===B.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===B.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var p=a("../physics/PhysicsEngine"),q=a("../physics/bodies/Particle"),r=a("../physics/forces/Drag"),s=a("../physics/forces/Spring"),t=a("../core/EventHandler"),u=a("../core/OptionsManager"),v=a("../core/ViewSequence"),w=a("../views/Scroller"),x=a("../utilities/Utility"),y=a("../inputs/GenericSync"),z=a("../inputs/ScrollSync"),A=a("../inputs/TouchSync");y.register({scroll:z,touch:A});var B={NONE:0,EDGE:1,PAGE:2},C={TOP:-1,NONE:0,BOTTOM:1};c.DEFAULT_OPTIONS={direction:x.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},c.prototype.getCurrentIndex=function(){return this._node.index},c.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===C.TOP)return null;if(this.getPosition()>1&&this._springState===B.NONE)return m.call(this,0,B.PAGE),this._node;var a=this._node.getPrevious();if(a){var b=j.call(this,a);this._scroller.sequenceFrom(a),this._node=a,o.call(this,b),m.call(this,0,B.PAGE)}return a},c.prototype.goToNextPage=function(){if(!this._node||this._onEdge===C.BOTTOM)return null;var a=this._node.getNext();if(a){var b=j.call(this,this._node);this._scroller.sequenceFrom(a),this._node=a,o.call(this,-b),m.call(this,0,B.PAGE)}return a},c.prototype.goToPage=function(a){var b,c=this.getCurrentIndex();if(c>a)for(b=0;c-a>b;b++)this.goToPreviousPage();if(a>c)for(b=0;a-c>b;b++)this.goToNextPage()},c.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},c.prototype.getPosition=function(){return this._particle.getPosition1D()},c.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},c.prototype.getOffset=c.prototype.getPosition,c.prototype.setPosition=function(a){this._particle.setPosition1D(a)},c.prototype.setOffset=c.prototype.setPosition,c.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},c.prototype.setVelocity=function(a){this._particle.setVelocity1D(a)},c.prototype.setOptions=function(a){void 0!==a.direction&&("x"===a.direction?a.direction=x.Direction.X:"y"===a.direction&&(a.direction=x.Direction.Y)),a.groupScroll!==this.options.groupScroll&&(a.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(a),this._scroller.setOptions(a),void 0!==a.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==a.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==a.edgePeriod||void 0!==a.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(a.rails||void 0!==a.direction||void 0!==a.syncScale||a.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===x.Direction.X?y.DIRECTION_X:y.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},c.prototype.sequenceFrom=function(a){return a instanceof Array&&(a=new v({array:a,trackSize:!0})),this._node=a,this._scroller.sequenceFrom(a)},c.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},c.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&l.call(this),this._scroller.render()},b.exports=c},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/ViewSequence":17,"../inputs/GenericSync":27,"../inputs/ScrollSync":32,"../inputs/TouchSync":33,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/forces/Drag":63,"../physics/forces/Spring":68,"../utilities/Utility":95,"../views/Scroller":108}],110:[function(a,b){function c(a){this._items=null,this._size=null,this._outputFunction=c.DEFAULT_OUTPUT_FUNCTION,this.options=g.clone(this.constructor.DEFAULT_OPTIONS||c.DEFAULT_OPTIONS),this.optionsManager=new d(this.options),a&&this.setOptions(a)}var d=a("../core/OptionsManager"),e=a("../core/Transform"),f=a("../core/ViewSequence"),g=a("../utilities/Utility");c.DEFAULT_OPTIONS={direction:g.Direction.Y,itemSpacing:0},c.DEFAULT_OUTPUT_FUNCTION=function(a,b){var c=this.options.direction===g.Direction.X?e.translate(b,0):e.translate(0,b);return{transform:c,target:a.render()}},c.prototype.getSize=function(){return this._size||this.render(),this._size},c.prototype.sequenceFrom=function(a){return a instanceof Array&&(a=new f(a)),this._items=a,this},c.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},c.prototype.setOutputFunction=function(a){return this._outputFunction=a,this},c.prototype.render=function(){var a=0,b=1^this.options.direction,c=this._items,d=null,e=[],f={},g=[],h=0;for(this._size=[0,0];c&&(d=c.get());)d.getSize&&(e=d.getSize()),f=this._outputFunction.call(this,d,a,h++),g.push(f),e&&(e[this.options.direction]&&(a+=e[this.options.direction]),e[b]>this._size[b]&&(this._size[b]=e[b])),c=c.getNext(),this.options.itemSpacing&&c&&(a+=this.options.itemSpacing);return this._size[this.options.direction]=a,g},b.exports=c},{"../core/OptionsManager":10,"../core/Transform":15,"../core/ViewSequence":17,"../utilities/Utility":95}],111:[function(a,b){b.exports={ContextualView:a("./ContextualView"),Deck:a("./Deck"),DrawerLayout:a("./DrawerLayout"),EdgeSwapper:a("./EdgeSwapper"),FlexibleLayout:a("./FlexibleLayout"),Flipper:a("./Flipper"),GridLayout:a("./GridLayout"),HeaderFooterLayout:a("./HeaderFooterLayout"),Lightbox:a("./Lightbox"),RenderController:a("./RenderController"),ScrollContainer:a("./ScrollContainer"),Scroller:a("./Scroller"),Scrollview:a("./Scrollview"),SequentialLayout:a("./SequentialLayout")}},{"./ContextualView":97,"./Deck":98,"./DrawerLayout":99,"./EdgeSwapper":100,"./FlexibleLayout":101,"./Flipper":102,"./GridLayout":103,"./HeaderFooterLayout":104,"./Lightbox":105,"./RenderController":106,"./ScrollContainer":107,"./Scroller":108,"./Scrollview":109,"./SequentialLayout":110}],112:[function(a,b){function c(){g.apply(this,arguments),this.title=new e({classes:this.options.classes,content:this.options.content}),this.back=new e({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new e({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new d({id:"master",size:this.options.size,target:[{transform:f.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:f.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(a){var b=a.id,c=a.value;"size"===b?(this.layout.id.master.setSize(c),this.title.setSize(c),this.back.setSize([c[1],c[1]]),this.more.setSize([c[1],c[1]])):"backClasses"===b?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):"backContent"===b?this.back.setContent(this.options.backContent):"classes"===b?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):"content"===b?this.setContent(this.options.content):"moreClasses"===b?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):"moreContent"===b&&this.more.setContent(this.options.content)}.bind(this))}var d=a("../core/Scene"),e=a("../core/Surface"),f=a("../core/Transform"),g=a("../core/View");c.prototype=Object.create(g.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={size:[void 0,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},c.prototype.setContent=function(a){return this.title.setContent(a)},b.exports=c},{"../core/Scene":12,"../core/Surface":14,"../core/Transform":15,"../core/View":16}],113:[function(a,b){function c(a){this.options=Object.create(c.DEFAULT_OPTIONS),this.optionsManager=new j(this.options),a&&this.setOptions(a),this.indicator=new f({size:this.options.indicatorSize,classes:["slider-back"]}),this.label=new e({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]}),this.eventOutput=new h,this.eventInput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput);var b=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new m(["mouse","touch"],{scale:b,direction:m.DIRECTION_X}),this.indicator.pipe(this.sync),this.sync.pipe(this),this.eventInput.on("update",function(a){this.set(a.position)}.bind(this)),this._drawPos=0,d.call(this)}function d(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}var e=a("../core/Surface"),f=a("../surfaces/CanvasSurface"),g=a("../core/Transform"),h=a("../core/EventHandler"),i=a("../math/Utilities"),j=a("../core/OptionsManager"),k=a("../inputs/MouseSync"),l=a("../inputs/TouchSync"),m=a("../inputs/GenericSync");m.register({mouse:k,touch:l}),c.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"},c.prototype.setOptions=function(a){return this.optionsManager.setOptions(a)},c.prototype.get=function(){return this.options.value},c.prototype.set=function(a){a!==this.options.value&&(this.options.value=i.clamp(a,this.options.range),d.call(this),this.eventOutput.emit("change",{value:a}))},c.prototype.getSize=function(){return this.options.size},c.prototype.render=function(){var a=this.options.range,b=Math.floor((this.get()-a[0])/(a[1]-a[0])*this.options.indicatorSize[0]);if(b<this._drawPos)this.indicator.getContext("2d").clearRect(b,0,this._drawPos-b+1,this.options.indicatorSize[1]);else if(b>this._drawPos){var c=this.indicator.getContext("2d");c.fillStyle=this.options.fillColor,c.fillRect(this._drawPos-1,0,b-this._drawPos+1,this.options.indicatorSize[1])}return this._drawPos=b,{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:g.translate(0,0,1),origin:[0,0],target:this.label.render()}]}},b.exports=c},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Surface":14,"../core/Transform":15,"../inputs/GenericSync":27,"../inputs/MouseSync":28,"../inputs/TouchSync":33,"../math/Utilities":40,"../surfaces/CanvasSurface":74}],114:[function(a,b){function c(){g.apply(this,arguments),this.layout=new h,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",d.bind(this))}function d(a){var b=a.id,c=a.value;if("direction"===b)this.layout.setOptions({dimensions:e.call(this.buttons.length,this.options.direction)});else if("buttons"===b)for(var d in this.buttons)this.buttons[d].setOptions(c);else if("sections"===b)for(var f in this.options.sections)this.defineSection(f,this.options.sections[f])}function e(a,b){return b===f.Direction.X?[a,1]:[1,a]}var f=a("../utilities/Utility"),g=a("../core/View"),h=a("../views/GridLayout"),i=a("./ToggleButton");c.prototype=Object.create(g.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={sections:[],widget:i,size:[void 0,50],direction:f.Direction.X,buttons:{toggleMode:i.ON}},c.prototype.defineSection=function(a,b){var c,d=this._buttonIds[a];if(void 0===d){d=this.buttons.length,this._buttonIds[a]=d;var f=this.options.widget;c=new f,this.buttons[d]=c,this.layout.setOptions({dimensions:e(this.buttons.length,this.options.direction)})}else c=this.buttons[d],c.unbind("select",this._buttonCallbacks[a]);this.options.buttons&&c.setOptions(this.options.buttons),c.setOptions(b),this._buttonCallbacks[a]=this.select.bind(this,a),c.on("select",this._buttonCallbacks[a])},c.prototype.select=function(a){var b=this._buttonIds[a];this.buttons[b]&&this.buttons[b].isSelected()?this._eventOutput.emit("select",{id:a}):this.buttons[b]&&this.buttons[b].select();for(var c=0;c<this.buttons.length;c++)c!==b&&this.buttons[c].deselect()},b.exports=c},{"../core/View":16,"../utilities/Utility":95,"../views/GridLayout":103,"./ToggleButton":115}],115:[function(a,b){function c(a){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:c.TOGGLE,crossfade:!0},this._eventOutput=new e,e.setOutputHandler(this,this._eventOutput),this.offSurface=new d,this.offSurface.on("click",function(){this.options.toggleMode!==c.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this._eventOutput),this.onSurface=new d,this.onSurface.on("click",function(){this.options.toggleMode!==c.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this._eventOutput),this.arbiter=new f({overlap:this.options.crossfade}),this.deselect(),a&&this.setOptions(a)}var d=a("../core/Surface"),e=a("../core/EventHandler"),f=a("../views/RenderController");c.OFF=0,c.ON=1,c.TOGGLE=2,c.prototype.select=function(){this.selected=!0,this.arbiter.show(this.onSurface,this.options.inTransition),this._eventOutput.emit("select")},c.prototype.deselect=function(){this.selected=!1,this.arbiter.show(this.offSurface,this.options.outTransition),this._eventOutput.emit("deselect")},c.prototype.isSelected=function(){return this.selected},c.prototype.setOptions=function(a){void 0!==a.content&&(this.options.content=a.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),a.offClasses&&(this.options.offClasses=a.offClasses,this.offSurface.setClasses(this.options.offClasses)),a.onClasses&&(this.options.onClasses=a.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==a.size&&(this.options.size=a.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==a.toggleMode&&(this.options.toggleMode=a.toggleMode),void 0!==a.outTransition&&(this.options.outTransition=a.outTransition),void 0!==a.inTransition&&(this.options.inTransition=a.inTransition),void 0!==a.crossfade&&(this.options.crossfade=a.crossfade,this.arbiter.setOptions({overlap:this.options.crossfade}))},c.prototype.getSize=function(){return this.options.size},c.prototype.render=function(){return this.arbiter.render()},b.exports=c},{"../core/EventHandler":7,"../core/Surface":14,"../views/RenderController":106}],116:[function(a,b){b.exports={NavigationBar:a("./NavigationBar"),Slider:a("./Slider"),TabBar:a("./TabBar"),ToggleButton:a("./ToggleButton")}},{"./NavigationBar":112,"./Slider":113,"./TabBar":114,"./ToggleButton":115}]},{},[23])(23)});